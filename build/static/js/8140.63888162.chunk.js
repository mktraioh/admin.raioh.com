"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[8140],{88200:(e,t,l)=>{l.d(t,{c:()=>c});l(99584);var a=l(95884),n=l(31508),d=l(87228),s=l(65236),i=l(97884);const c=e=>{let{open:t,handleCancel:l,text:c,click:o,loading:r,subTitle:u}=e;const{t:v}=(0,s.G)();return(0,i.jsxs)(a.default,{closable:!1,visible:t,footer:null,centered:!0,children:[(0,i.jsx)(n.cp,{status:"warning",title:c,subTitle:u}),(0,i.jsxs)("div",{className:"d-flex justify-content-end",children:[(0,i.jsx)(d.c,{type:"primary",className:"mr-2",onClick:o,loading:r,children:v("yes")}),(0,i.jsx)(d.c,{onClick:()=>l(),children:v("no")})]})]})}},58140:(e,t,l)=>{l.r(t),l.d(t,{default:()=>Z});var a=l(99584),n=l(73568),d=l(84616),s=l(98044),i=l(87228),c=l(66296),o=l(68496),r=l(15752),u=l(23424),v=l(36668),h=l(98948),m=l(59424),x=l(11168),f=l(30800);const p={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"};var y=l(47164),g=function(e,t){return a.createElement(y.c,(0,f.c)((0,f.c)({},e),{},{ref:t,icon:p}))};g.displayName="UploadOutlined";const j=a.forwardRef(g);var _=l(48292),C=l(32712),w=l(18896),k=l(65236),b=l(71376),M=l(68256),S=l(58896),H=l(19576),Y=l(40748),V=l(24968),G=l(69720),z=l(95312),I=l(53992),D=l(29416),N=l(95300),P=l(30432),T=l(61072),O=l(1428),R=l(77020),A=l(98016),E=l(46003),K=l(52640),W=l(77180),B=l(81560),L=l(63080),U=l(83072),q=l.n(U),F=l(88200),J=l(97884);const{RangePicker:Q}=n.default,{TabPane:X}=d.default;function Z(){var e,t,l,n;const f=(0,C.OY)(),p=(0,u.i6)(),{t:y}=(0,k.G)(),{defaultCurrency:g}=(0,C.w1)((e=>e.currency),C.G),[U,Z]=(0,a.useState)(),[$,ee]=(0,a.useState)(null),[te,le]=(0,a.useState)(null),[ae,ne]=(0,a.useState)(null),[de,se]=(0,a.useState)(null),ie=[{id:7,name:"all"},{id:8,name:"un_assigned_order"},{id:3,name:"ready"},{id:4,name:"on_a_way"},{id:5,name:"delivered"},{id:6,name:"canceled"}],[ce,oe]=(0,a.useState)([{title:y("id"),is_show:!0,dataIndex:"id",key:"id",sorter:!0},{title:y("client"),is_show:!0,dataIndex:"user",key:"user",render:e=>(0,J.jsxs)("div",{children:[null===e||void 0===e?void 0:e.firstname," ",null===e||void 0===e?void 0:e.lastname]})},{title:y("number.of.products"),is_show:!0,dataIndex:"order_details_count",key:"order_details_count",render:e=>(0,J.jsxs)("div",{className:"text-lowercase",children:[e||0," ",y("products")]})},{title:y("status"),is_show:!0,dataIndex:"status",key:"status",render:(e,t)=>(0,J.jsxs)("div",{children:["new"===e?(0,J.jsx)(s.c,{color:"blue",children:y(e)}):"canceled"===e?(0,J.jsx)(s.c,{color:"error",children:y(e)}):(0,J.jsx)(s.c,{color:"cyan",children:y(e)}),"delivered"!==e&&"canceled"!==e?(0,J.jsx)(v.c,{onClick:()=>ee(t)}):""]})},{title:y("deliveryman"),is_show:!0,dataIndex:"deliveryman",key:"deliveryman",render:(e,t)=>(0,J.jsx)("div",{children:"ready"===t.status&&"pickup"!==t.delivery_type?(0,J.jsx)(i.c,{type:"link",onClick:()=>se(t),children:(0,J.jsxs)(c.c,{children:[e?"".concat(e.firstname," ").concat(e.lastname):y("add.deliveryman"),(0,J.jsx)(v.c,{})]})}):(0,J.jsxs)("div",{children:[null===e||void 0===e?void 0:e.firstname," ",null===e||void 0===e?void 0:e.lastname]})})},{title:y("amount"),is_show:!0,dataIndex:"total_price",key:"total_price",render:e=>(0,V.c)(e,g.symbol)},{title:y("payment.type"),is_show:!0,dataIndex:"transaction",key:"transaction",render:e=>{var t;return y(null===e||void 0===e||null===(t=e.payment_system)||void 0===t?void 0:t.tag)||"-"}},{title:y("created.at"),is_show:!0,dataIndex:"created_at",key:"created_at"},{title:y("options"),is_show:!0,key:"options",render:(e,t)=>(0,J.jsxs)(c.c,{children:[(0,J.jsx)(i.c,{icon:(0,J.jsx)(D.Sum,{}),onClick:()=>le(t.id)}),(0,J.jsx)(i.c,{icon:(0,J.jsx)(h.c,{}),onClick:()=>(e=>{f((0,w.WC)({url:"order/details/".concat(e.id),id:"order_details",name:y("order.details")})),p("/order/details/".concat(e.id))})(t)}),(0,J.jsx)(O.c,{icon:(0,J.jsx)(m.c,{}),onClick:()=>{ye([t.id]),re(!0),je(!0)}}),(0,J.jsx)(i.c,{icon:(0,J.jsx)(x.c,{}),onClick:()=>ne(t.id)})]})}]),{setIsModalVisible:re}=(0,a.useContext)(A.e),[ue,ve]=(0,a.useState)(!1),{activeMenu:he}=(0,C.w1)((e=>e.menu),C.G),[me,xe]=(0,a.useState)("all"),fe=(null===(e=he.data)||void 0===e?void 0:e.role)||me,[pe,ye]=(0,a.useState)(null),[ge,je]=(0,a.useState)(null),[_e,Ce]=(0,a.useState)(!1),{orders:we,meta:ke,loading:be,params:Me,statistic:Se}=(0,C.w1)((e=>e.orders),C.G),He=null===he||void 0===he?void 0:he.data;(0,M.c)((()=>{var e;const t={search:null===He||void 0===He?void 0:He.search,sort:null===He||void 0===He?void 0:He.sort,column:null===He||void 0===He?void 0:He.column,perPage:null===He||void 0===He?void 0:He.perPage,page:null===He||void 0===He?void 0:He.page,deliveryman:null===He||void 0===He||null===(e=He.deliveryman)||void 0===e?void 0:e.value,date_from:null===He||void 0===He?void 0:He.date_from,date_to:null===He||void 0===He?void 0:He.date_to,status:"un_assigned_order"===(null===He||void 0===He?void 0:He.status)||null===He||void 0===He?void 0:He.status,"isset-deliveryman":"un_assigned_order"===(null===He||void 0===He?void 0:He.status)?1:0};f((0,S.Gc)(t))}),[null===he||void 0===he?void 0:he.data]);const Ye=e=>{const t=he.data;f((0,w.MH)({activeMenu:he,data:{...t,...e}}))},Ve=()=>{ee(null),se(null),le(null),ne(null)};(0,a.useEffect)((()=>{if(null!==he&&void 0!==he&&he.refetch){const e={status:null===He||void 0===He?void 0:He.status,page:null===He||void 0===He?void 0:He.page,perPage:10,type:"delivery"};f((0,S.Gc)(e)),f((0,w.CO)(he))}}),[null===he||void 0===he?void 0:he.refetch]);const Ge={selectedRowKeys:pe,onChange:e=>{ye(e)}};return(0,J.jsxs)("div",{children:[(0,J.jsx)("div",{children:be?(0,J.jsx)(W.c,{}):(0,J.jsx)(B.c,{data:Se,orders:we})}),(0,J.jsx)(o.default,{className:"p-0",children:(0,J.jsxs)(c.c,{wrap:!0,size:[12,20],children:[(0,J.jsx)(Y.c,{placeholder:y("search"),handleChange:e=>Ye({search:e}),defaultValue:null===(t=he.data)||void 0===t?void 0:t.search,resetSearch:!(null!==(l=he.data)&&void 0!==l&&l.search),style:{minWidth:300}}),(0,J.jsx)(Q,{format:"YYYY-MM-DD",onChange:e=>{return t=e,void f((0,w.MH)({activeMenu:he,data:{...He,date_from:t?q()(null===t||void 0===t?void 0:t[0]).format("YYYY-MM-DD").toString():void 0,date_to:t?q()(null===t||void 0===t?void 0:t[1]).format("YYYY-MM-DD").toString():void 0}}));var t}}),(0,J.jsx)(b.g,{className:"w-100",debounceTimeout:500,placeholder:y("select.deliveryman"),fetchOptions:e=>{const t={search:e};return L.c.getAll(t).then((e=>e.data.map((e=>({label:e.firstname+" "+e.lastname,value:e.id})))))},allowClear:!0,onChange:e=>Ye({deliveryman:e}),value:null===(n=he.data)||void 0===n?void 0:n.deliveryman}),(0,J.jsxs)(i.c,{onClick:()=>{ve(!0),R.c.export().then((e=>{const t=K.sp+e.data.file_name;window.location.href=t})).finally((()=>ve(!1)))},loading:ue,children:[(0,J.jsx)(j,{}),y("export")]}),(0,J.jsx)(O.c,{size:"",onClick:()=>{null===pe||0===pe.length?T.m4.warning(y("select.the.product")):(re(!0),je(!1))},children:y("delete.selected")}),(0,J.jsx)(i.c,{icon:(0,J.jsx)(_.c,{}),onClick:()=>{f((0,w.MH)({activeMenu:he,data:void 0}))},disabled:!he.data,style:{minWidth:100}}),(0,J.jsx)(I.c,{setColumns:oe,columns:ce})]})}),(0,J.jsxs)(o.default,{title:y("orders"),children:[(0,J.jsx)(d.default,{onChange:e=>{Ye({role:e,page:1}),xe(e)},type:"card",activeKey:fe,children:ie.map((e=>(0,J.jsx)(X,{tab:y(e.name)},e.name)))}),(0,J.jsx)(r.c,{scroll:{x:!0},rowSelection:Ge,columns:null===ce||void 0===ce?void 0:ce.filter((e=>e.is_show)),dataSource:we,loading:be,pagination:{pageSize:Me.perPage,page:Me.page,total:ke.total,defaultCurrent:Me.page},rowKey:e=>e.id,onChange:function(e,t,l){const{pageSize:a,current:n}=e,{field:d,order:s}=l,i=(0,H.c)(s);f((0,w.MH)({activeMenu:he,data:{...he.data,perPage:a,page:n,column:d,sort:i}}))}})]}),(0,J.jsx)(E.c,{click:()=>{Ce(!0);const e={...Object.assign({},...pe.map(((e,t)=>({["ids[".concat(t,"]")]:e}))))};R.c.delete(e).then((()=>{T.m4.success(y("successfully.deleted")),re(!1),f((0,S.Gc)()),je(null)})).finally((()=>Ce(!1)))},text:y(ge?"delete":"all.delete"),loading:_e,setText:ye}),U&&(0,J.jsx)(F.c,{open:U,handleCancel:()=>Z(null),click:U.restore?()=>{Ce(!0),R.c.restoreAll().then((()=>{T.m4.success(y("successfully.restored")),f((0,S.Gc)()),Z(null)})).finally((()=>Ce(!1)))}:()=>{Ce(!0),R.c.dropAll().then((()=>{T.m4.success(y("successfully.deleted")),f((0,S.Gc)()),Z(null)})).finally((()=>Ce(!1)))},text:U.restore?y("restore.modal.text"):y("read.carefully"),subTitle:U.restore?"":y("confirm.deletion"),loading:_e,setText:ye}),$&&(0,J.jsx)(G.c,{orderDetails:$,handleCancel:Ve,status:ie}),de&&(0,J.jsx)(z.c,{orderDetails:de,handleCancel:Ve}),te&&(0,J.jsx)(N.c,{id:te,handleCancel:Ve}),ae&&(0,J.jsx)(P.c,{id:ae,handleCancel:Ve})]})}},48292:(e,t,l)=>{l.d(t,{c:()=>c});var a=l(30800),n=l(99584);const d={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M899.1 869.6l-53-305.6H864c14.4 0 26-11.6 26-26V346c0-14.4-11.6-26-26-26H618V138c0-14.4-11.6-26-26-26H432c-14.4 0-26 11.6-26 26v182H160c-14.4 0-26 11.6-26 26v192c0 14.4 11.6 26 26 26h17.9l-53 305.6a25.95 25.95 0 0025.6 30.4h723c1.5 0 3-.1 4.4-.4a25.88 25.88 0 0021.2-30zM204 390h272V182h72v208h272v104H204V390zm468 440V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H416V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H202.8l45.1-260H776l45.1 260H672z"}}]},name:"clear",theme:"outlined"};var s=l(47164),i=function(e,t){return n.createElement(s.c,(0,a.c)((0,a.c)({},e),{},{ref:t,icon:d}))};i.displayName="ClearOutlined";const c=n.forwardRef(i)}}]);