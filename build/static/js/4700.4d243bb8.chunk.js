"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[4700],{71376:(e,t,s)=>{s.d(t,{g:()=>u});var a=s(99584),l=s(95976),n=s.n(l),i=s(2664),c=s(37728),r=s(97884);const u=e=>{let{fetchOptions:t,debounceTimeout:s=400,onClear:l,...u}=e;const[o,d]=(0,a.useState)(!1),[m,h]=(0,a.useState)([]),p=(0,a.useMemo)((()=>n()((e=>{h([]),d(!0),t(e).then((e=>{h(e),d(!1)}))}),s)),[t,s]);return(0,r.jsx)(i.default,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:p,onClear:()=>{p(""),l&&l()},notFoundContent:o?(0,r.jsx)(c.c,{size:"small"}):"no results",...u,options:m,onFocus:()=>{p("")}})}},54700:(e,t,s)=>{s.r(t),s.d(t,{default:()=>f});var a=s(99584),l=s(23424),n=s(61072),i=s(65732),c=s(68496),r=s(32712),u=s(18896),o=s(65236),d=s(99280),m=s(36008),h=s(55144),p=s(97884);const f=()=>{const{t:e}=(0,o.G)(),{activeMenu:t}=(0,r.w1)((e=>e.menu),r.G),s=(0,r.OY)(),[f]=i.c.useForm(),x=(0,l.i6)(),{myShop:b}=(0,r.w1)((e=>e.myShop),r.G);(0,a.useEffect)((()=>()=>{const e=f.getFieldsValue(!0);s((0,u.MH)({activeMenu:t,data:e}))}),[]);return(0,p.jsx)(c.default,{title:e("add.story"),className:"h-100",children:(0,p.jsx)(h.c,{form:f,handleSubmit:(a,l)=>{const i={...Object.assign({},...l.map(((e,t)=>({["file_urls[".concat(t,"]")]:e.name})))),product_id:a.products.value},c="seller/stories";return d.c.create(i).then((()=>{const a={shop_id:b.id};n.m4.success(e("successfully.created")),(0,r.wN)((()=>{s((0,u.MF)({...t,nextUrl:c})),s((0,m.M7)(a))})),x("/".concat(c))}))}})})}},55144:(e,t,s)=>{s.d(t,{c:()=>p});var a=s(99584),l=s(65732),n=s(68768),i=s(10260),c=s(87228),r=s(71376),u=s(65236),o=s(32712),d=s(31e3),m=s(40936),h=s(97884);function p(e){var t,s;let{form:p,handleSubmit:f}=e;const{t:x}=(0,u.G)(),{activeMenu:b}=(0,o.w1)((e=>e.menu),o.G),{myShop:g}=(0,o.w1)((e=>e.myShop),o.G),[j,v]=(0,a.useState)(null!==(t=null===(s=b.data)||void 0===s?void 0:s.image)&&void 0!==t?t:[]),[y,S]=(0,a.useState)(!1);return(0,h.jsxs)(l.c,{name:"story-form",layout:"vertical",onFinish:e=>{S(!0),f(e,j).finally((()=>S(!1)))},form:p,initialValues:{active:!0,...b.data},className:"d-flex flex-column h-100",children:[(0,h.jsxs)(n.c,{gutter:12,children:[(0,h.jsx)(i.c,{span:24,children:(0,h.jsx)(l.c.Item,{label:x("image"),name:"images",rules:[{required:0===j.length,message:x("required")}],children:(0,h.jsx)(m.c,{type:"categories",imageList:j,setImageList:v,form:p,multiple:!1})})}),(0,h.jsx)(i.c,{span:24,children:(0,h.jsx)(l.c.Item,{label:x("products"),name:"products",rules:[{required:!0,message:x("required")}],children:(0,h.jsx)(r.g,{fetchOptions:function(e){const t={search:e,shop_id:g.id,status:"published",active:1,rest:1};return d.c.getAll(t).then((e=>e.data.map((e=>({label:e.translation.title,value:e.id,key:e.id})))))},debounceTimeout:200})})})]}),(0,h.jsx)("div",{className:"flex-grow-1 d-flex flex-column justify-content-end",children:(0,h.jsx)("div",{className:"pb-5",children:(0,h.jsx)(c.c,{type:"primary",htmlType:"submit",loading:y,children:x("submit")})})})]})}}}]);