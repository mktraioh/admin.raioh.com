"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[8856],{84190:(e,a,l)=>{l.d(a,{u:()=>c});var t=l(99584),r=l(10876),s=l(37728),n=l(95976),i=l.n(n),o=l(97884);const c=e=>{let{fetchOptions:a,refetch:l=!1,debounceTimeout:n=400,...c}=e;const[d,u]=(0,t.useState)(!1),[m,h]=(0,t.useState)([]),v=(0,t.useMemo)((()=>i()((e=>{h([]),u(!0),a(e).then((e=>{h(e),u(!1)}))}),n)),[]);return(0,o.jsx)(r.default,{showSearch:!0,labelInValue:!0,filterTreeNode:(e,a)=>{var l;return null===(l=a.label)||void 0===l?void 0:l.localeCompare(e)},treeLine:!0,onSearch:e=>v(e),treeData:d?[]:m,treeDefaultExpandAll:!0,onFocus:()=>{m.length&&!l||(u(!0),a().then((e=>{h(e),u(!1)})))},notFoundContent:d?(0,o.jsx)(s.c,{size:"small"}):"no results",...c})}},33424:(e,a,l)=>{l.d(a,{c:()=>n});var t=l(71760),r=l.n(t),s=l(52640);async function n(e){let a={address:e,key:arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.KU};return r().get("https://maps.googleapis.com/maps/api/geocode/json",{params:a}).then((e=>{let{data:a}=e;return a.results[0]})).catch((e=>"not found"))}},77160:(e,a,l)=>{l.d(a,{c:()=>A});var t=l(99584),r=l(65732),s=l(66296),n=l(87228),i=l(23424),o=l(32712),c=l(18896),d=l(1284),u=l(65236),m=l(33131),h=l(10876),v=l(98044),p=l(68768),g=l(10260),j=l(68496),x=l(46712),f=l(26012),b=l(10240),y=l(50452),w=l(2664),_=l(64212),I=l(89896),k=l(40936),q=l(24332),P=l(6428),S=l(21984),F=l(75808),E=l(42080),N=l(84640),O=l(2340),V=l(84190),C=l(52640),H=l(55309),L=l(33424),M=l(97884);const{SHOW_ALL:D}=h.default,z=e=>{let{backImage:a,setBackImage:l,logoImage:s,setLogoImage:i,form:c,user:d,setLocation:m,location:h}=e;const{t:z}=(0,u.G)(),A=r.c.useWatch("categories",c),[Y,R]=(0,t.useState)(null),[B,G]=(0,t.useState)(null),[T,K]=(0,t.useState)(null),{defaultLang:W,languages:J}=(0,o.w1)((e=>e.formLang),o.G),[Q,U]=(0,t.useState)(""),{placePredictions:X,getPlacePredictions:Z,isPlacePredictionsLoading:$}=(0,H.c)({apiKey:C.KU,libraries:["places","geocode"]});const ee=()=>{R(!0),K(!0)},ae=()=>{R(!1),G(!1)},le=e=>{if(e.children)if(A.some((a=>a.value===e.value))){const a=A.filter((a=>a.value!==e.value)),l=a.filter((a=>!e.children.some((e=>e.value===a.value))));c.setFieldsValue({categories:l})}else c.setFieldsValue({categories:A.concat([{label:e.label,value:e.value},...e.children.map((e=>({label:e.label,value:e.value})))])});else null!==A&&void 0!==A&&A.some((a=>a.value===e.value))?c.setFieldsValue({categories:A.filter((a=>a.value!==e.value))}):c.setFieldsValue({categories:A.concat([e.parent,{label:e.label,value:e.value}])})};return(0,M.jsxs)(p.c,{gutter:12,children:[(0,M.jsx)(g.c,{span:24,children:(0,M.jsx)(j.default,{children:(0,M.jsxs)(p.c,{gutter:12,children:[(0,M.jsx)(g.c,{span:4,children:(0,M.jsx)(r.c.Item,{label:z("logo.image"),name:"logo_img",rules:[{validator:(e,a)=>0===(null===s||void 0===s?void 0:s.length)?Promise.reject(new Error(z("required"))):Promise.resolve()}],children:(0,M.jsx)(k.c,{type:"shops/logo",imageList:s,setImageList:i,form:c,multiple:!1,name:"logo_img"})})}),(0,M.jsx)(g.c,{span:4,children:(0,M.jsx)(r.c.Item,{label:z("background.image"),name:"background_img",rules:[{validator:(e,l)=>0===(null===a||void 0===a?void 0:a.length)?Promise.reject(new Error(z("required"))):Promise.resolve()}],children:(0,M.jsx)(k.c,{type:"shops/background",imageList:a,setImageList:l,form:c,multiple:!1,name:"background_img"})})}),(0,M.jsx)(g.c,{span:10,children:(0,M.jsx)(r.c.Item,{label:z("status.note"),name:"status_note",rules:[{validator:(e,a)=>a?a&&""===(null===a||void 0===a?void 0:a.trim())?Promise.reject(new Error(z("no.empty.space"))):a&&(null===a||void 0===a?void 0:a.length)<5?Promise.reject(new Error(z("must.be.at.least.5"))):Promise.resolve():Promise.reject(new Error(z("required")))}],children:(0,M.jsx)(_.c,{rows:4})})}),(0,M.jsx)(g.c,{span:4,children:(0,M.jsx)(r.c.Item,{name:"status",label:z("status"),children:(0,M.jsx)(x.default,{disabled:!0})})}),(0,M.jsx)(g.c,{span:2,children:(0,M.jsx)(r.c.Item,{label:z("open"),name:"open",valuePropName:"checked",children:(0,M.jsx)(f.c,{disabled:!0})})})]})})}),(0,M.jsx)(g.c,{span:24,children:(0,M.jsx)(j.default,{title:z("general"),children:(0,M.jsxs)(p.c,{gutter:12,children:[(0,M.jsx)(g.c,{span:12,children:(0,M.jsxs)(p.c,{gutter:12,children:[(0,M.jsx)(g.c,{span:24,children:J.map(((e,a)=>(0,M.jsx)(r.c.Item,{label:z("title"),name:"title[".concat(e.locale,"]"),rules:[{validator:(a,l)=>l||(null===e||void 0===e?void 0:e.locale)!==W?l&&""===(null===l||void 0===l?void 0:l.trim())?Promise.reject(new Error(z("no.empty.space"))):l&&(null===l||void 0===l?void 0:l.length)<2?Promise.reject(new Error(z("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(z("required")))}],hidden:e.locale!==W,children:(0,M.jsx)(x.default,{})},"title"+a)))}),(0,M.jsx)(g.c,{span:24,children:(0,M.jsx)(r.c.Item,{label:z("phone"),name:"phone",rules:[{required:!0,message:z("required")}],children:(0,M.jsx)(b.c,{min:0,className:"w-100"})})})]})}),(0,M.jsx)(g.c,{span:12,children:J.map(((e,a)=>(0,M.jsx)(r.c.Item,{label:z("description"),name:"description[".concat(e.locale,"]"),rules:[{validator:(a,l)=>l||(null===e||void 0===e?void 0:e.locale)!==W?l&&""===(null===l||void 0===l?void 0:l.trim())?Promise.reject(new Error(z("no.empty.space"))):l&&(null===l||void 0===l?void 0:l.length)<5?Promise.reject(new Error(z("must.be.at.least.5"))):Promise.resolve():Promise.reject(new Error(z("required")))}],hidden:e.locale!==W,children:(0,M.jsx)(_.c,{rows:4})},"desc"+a)))}),(0,M.jsx)(g.c,{span:8,children:(0,M.jsx)(r.c.Item,{label:z("shop.tags"),name:"tags",rules:[{required:!0,message:z("required")}],children:(0,M.jsx)(P.u,{mode:"multiple",fetchOptions:async function(e){K(!1);const a={search:e};return S.c.getAll(a).then((e=>{let{data:a}=e;return a.map((e=>{var a;return{label:(null===(a=e.translation)||void 0===a?void 0:a.title)||"no name",value:e.id}}))}))},refetch:T})})}),(0,M.jsx)(g.c,{span:8,children:(0,M.jsx)(r.c.Item,{label:z("seller"),name:"user",rules:[{required:!0,message:z("required")}],children:(0,M.jsx)(P.u,{disabled:!d,fetchOptions:async function(e){const a={search:e,roles:"user","empty-shop":1};return K(!1),E.c.search(a).then((e=>e.data.map((e=>({label:e.firstname+" "+(e.lastname||""),value:e.id})))))},refetch:T,dropdownRender:e=>(0,M.jsxs)(M.Fragment,{children:[e,(0,M.jsx)(y.c,{style:{margin:"8px 0"}}),(0,M.jsx)(n.c,{className:"w-100",icon:(0,M.jsx)(q.c,{}),onClick:ee,children:z("add.user")})]})})})}),(0,M.jsx)(g.c,{span:8,children:(0,M.jsx)(r.c.Item,{label:z("categories"),name:"categories",rules:[{required:!0,message:z("required")}],children:(0,M.jsx)(V.u,{treeCheckable:!0,tagRender:e=>{const{label:a,onClose:l}=e;return(0,M.jsx)(v.c,{onMouseDown:e=>{e.preventDefault(),e.stopPropagation()},onClose:l,style:{marginRight:3},children:a})},showCheckedStrategy:D,treeCheckStrictly:!0,refetch:!0,onSelect:(e,a)=>le(a),onDeselect:(e,a)=>le(a),fetchOptions:async function(e){const a={search:e,type:"shop",active:1,lang:W};return K(!1),F.c.getAll(a).then((e=>{let{data:a}=e;return a.map((e=>{var a,l;return{label:(null===(a=e.translation)||void 0===a?void 0:a.title)||"no name",value:e.id,disabled:0===(null===(l=e.children)||void 0===l?void 0:l.length),children:e.children.map((a=>{var l,t;return{label:null===(l=a.translation)||void 0===l?void 0:l.title,value:a.id,parent:{label:(null===(t=e.translation)||void 0===t?void 0:t.title)||"no name",value:e.id}}}))}}))}))}})})})]})})}),(0,M.jsx)(g.c,{span:8,children:(0,M.jsx)(j.default,{title:z("delivery"),children:(0,M.jsxs)(p.c,{gutter:8,children:[(0,M.jsx)(g.c,{span:12,children:(0,M.jsx)(r.c.Item,{name:"price",label:z("min.price"),rules:[{required:!0,message:z("required")}],children:(0,M.jsx)(b.c,{min:0,className:"w-100"})})}),(0,M.jsx)(g.c,{span:12,children:(0,M.jsx)(r.c.Item,{name:"price_per_km",label:z("price.per.km"),rules:[{required:!0,message:z("required")}],children:(0,M.jsx)(b.c,{min:0,className:"w-100"})})})]})})}),(0,M.jsx)(g.c,{span:8,children:(0,M.jsx)(j.default,{title:z("delivery.time"),children:(0,M.jsxs)(p.c,{gutter:12,children:[(0,M.jsx)(g.c,{span:12,children:(0,M.jsx)(r.c.Item,{name:"delivery_time_type",label:z("delivery_time_type"),rules:[{required:!0,message:z("required")}],children:(0,M.jsxs)(w.default,{className:"w-100",children:[(0,M.jsx)(w.default.Option,{value:"minute",label:z("minutes")}),(0,M.jsx)(w.default.Option,{value:"hour",label:z("hour")})]})})}),(0,M.jsx)(g.c,{span:12,children:(0,M.jsx)(r.c.Item,{name:"delivery_time_from",label:z("delivery_time_from"),rules:[{required:!0,message:z("required")}],children:(0,M.jsx)(b.c,{min:0,className:"w-100"})})}),(0,M.jsx)(g.c,{span:12,children:(0,M.jsx)(r.c.Item,{name:"delivery_time_to",label:z("delivery_time_to"),rules:[{required:!0,message:z("required")}],children:(0,M.jsx)(b.c,{min:0,className:"w-100"})})})]})})}),(0,M.jsx)(g.c,{span:8,children:(0,M.jsx)(j.default,{title:z("order.info"),children:(0,M.jsxs)(p.c,{gutter:12,children:[(0,M.jsx)(g.c,{span:12,children:(0,M.jsx)(r.c.Item,{label:z("min.amount"),name:"min_amount",rules:[{required:!0,message:z("required")}],children:(0,M.jsx)(b.c,{min:0,className:"w-100"})})}),(0,M.jsx)(g.c,{span:12,children:(0,M.jsx)(r.c.Item,{label:z("tax"),name:"tax",rules:[{required:!0,message:z("required")}],children:(0,M.jsx)(b.c,{min:0,max:100,addonAfter:"%",className:"w-100"})})}),(0,M.jsx)(g.c,{span:12,children:(0,M.jsx)(r.c.Item,{label:z("admin.comission"),name:"percentage",rules:[{required:!0,message:z("required")}],children:(0,M.jsx)(b.c,{min:0,max:100,className:"w-100",addonAfter:"%"})})})]})})}),(0,M.jsx)(g.c,{span:24,children:(0,M.jsx)(j.default,{title:z("address"),children:(0,M.jsxs)(p.c,{gutter:12,children:[(0,M.jsx)(g.c,{span:12,children:J.map(((e,a)=>(0,M.jsx)(r.c.Item,{label:z("address"),name:"address[".concat(e.locale,"]"),rules:[{required:e.locale===W,message:z("required")}],hidden:e.locale!==W,children:(0,M.jsx)(w.default,{allowClear:!0,searchValue:Q,showSearch:!0,autoClearSearchValue:!0,loading:$,options:null===X||void 0===X?void 0:X.map((e=>({label:e.description,value:e.description}))),onSearch:e=>{U(e),e.length>0&&Z({input:e})},onSelect:async e=>{const a=await(0,L.c)(e);m({lat:null===a||void 0===a?void 0:a.geometry.location.lat,lng:null===a||void 0===a?void 0:a.geometry.location.lng})}})},"address"+a)))}),(0,M.jsx)(g.c,{span:24,children:(0,M.jsx)(I.c,{location:h,setLocation:m,setAddress:e=>c.setFieldsValue({["address[".concat(W,"]")]:e})})})]})})}),Y&&(0,M.jsx)(N.c,{visible:Y,handleCancel:()=>ae()}),B&&(0,M.jsx)(O.c,{visible:B,handleCancel:()=>ae()})]})},A=e=>{var a,l,h,v,p,g,j,x,f;let{next:b,action_type:y="",user:w}=e;const{t:_}=(0,u.G)(),[I]=r.c.useForm(),k=(0,i.i6)(),q=(0,o.OY)(),{uuid:P}=(0,i.W4)(),{activeMenu:S}=(0,o.w1)((e=>e.menu),o.G),{settings:F}=(0,o.w1)((e=>e.globalSettings),o.G),[E,N]=(0,t.useState)(null!==S&&void 0!==S&&null!==(a=S.data)&&void 0!==a&&a.location?{lat:parseFloat(null===S||void 0===S||null===(l=S.data)||void 0===l||null===(h=l.location)||void 0===h?void 0:h.latitude),lng:parseFloat(null===S||void 0===S||null===(v=S.data)||void 0===v||null===(p=v.location)||void 0===p?void 0:p.longitude)}:(0,m.c)(F)),[O,V]=(0,t.useState)(!1),[C,H]=(0,t.useState)(null!==(g=S.data)&&void 0!==g&&g.logo_img?[null===(j=S.data)||void 0===j?void 0:j.logo_img]:[]),[L,D]=(0,t.useState)(null!==(x=S.data)&&void 0!==x&&x.background_img?[null===(f=S.data)||void 0===f?void 0:f.background_img]:[]);(0,t.useEffect)((()=>()=>{const e=I.getFieldsValue(!0);e.open_time=JSON.stringify(null===e||void 0===e?void 0:e.open_time),e.close_time=JSON.stringify(null===e||void 0===e?void 0:e.close_time),q((0,c.MH)({activeMenu:S,data:{...S.data,...e}}))}),[]);return(0,M.jsx)(M.Fragment,{children:(0,M.jsxs)(r.c,{form:I,name:"basic",layout:"vertical",onFinish:e=>{var a,l,t;V(!0);const r={...e,"images[0]":null===(a=C[0])||void 0===a?void 0:a.name,"images[1]":null===(l=L[0])||void 0===l?void 0:l.name,delivery_time_type:e.delivery_time_type,delivery_time_to:e.delivery_time_to,delivery_time_from:e.delivery_time_from,categories:e.categories.map((e=>e.value)),tags:null===e||void 0===e||null===(t=e.tags)||void 0===t?void 0:t.map((e=>e.value)),user_id:e.user.value,open:void 0,"location[latitude]":E.lat,"location[longitude]":E.lng,user:void 0,delivery_time:0};"edit"===y?function(e,a){d.c.update(P,a).then((()=>{q((0,c.MH)({activeMenu:S,data:e})),b()})).catch((e=>console.error(e.response.data.params))).finally((()=>V(!1)))}(e,r):function(e,a){d.c.create(a).then((a=>{let{data:l}=a;q((0,c.Ke)({id:"shop-".concat(l.uuid),url:"shop/".concat(l.uuid),name:_("add.shop"),data:{...e,id:null===l||void 0===l?void 0:l.id,seller:null===l||void 0===l?void 0:l.seller},refetch:!1})),k("/shop/".concat(l.uuid,"?step=1"))})).catch((e=>console.error(e.response.data.params))).finally((()=>V(!1)))}(e,r)},initialValues:{open:!1,status:"new",...S.data},children:[(0,M.jsx)(z,{form:I,user:w,backImage:L,setBackImage:D,logoImage:C,setLogoImage:H,location:E,setLocation:N}),(0,M.jsx)(s.c,{children:(0,M.jsx)(n.c,{type:"primary",htmlType:"submit",loading:O,children:_("next")})})]})})}},3740:(e,a,l)=>{l.d(a,{c:()=>v});var t=l(99584),r=l(77180),s=l(83072),n=l.n(s),i=l(94192),o=l(73259),c=l(23424),d=l(54112),u=l(75424),m=l(65732),h=l(97884);const v=e=>{let{next:a,prev:l}=e;const[s]=m.c.useForm(),[v,p]=(0,t.useState)([]),[g,j]=(0,t.useState)(new Array(7).fill(!1)),[x,f]=(0,t.useState)(!1),[b,y]=(0,t.useState)(!1),{uuid:w}=(0,c.W4)();return(0,t.useEffect)((()=>(s.setFieldsValue({working_days:d.Q}),w&&(y(!0),o.c.getById(w).then((e=>{p(e.data.closed_dates.filter((e=>e.day>n()(new Date).format("YYYY-MM-DD"))).map((e=>new Date(e.day))))})),i.c.getById(w).then((e=>{j(0!==e.data.dates.length?e.data.dates.map((e=>e.disabled)):[]),0!==e.data.dates.length&&s.setFieldsValue({working_days:e.data.dates.map((e=>({title:e.day,from:n()(e.from,"HH:mm:ss"),to:n()(e.to,"HH:mm:ss"),disabled:Boolean(e.disabled)})))})})).finally((()=>y(!1)))),()=>{y(!1),f(!1)})),[]),(0,h.jsx)(h.Fragment,{children:b?(0,h.jsx)(r.c,{}):(0,h.jsx)(u.c,{onFinish:e=>{f(!0);const l={dates:v?v.map((e=>n()(e).format("YYYY-MM-DD"))):void 0},t={dates:e.working_days.map((e=>({day:e.title,from:n()(e.from?e.from:"00").format("HH-mm"),to:n()(e.to?e.to:"00").format("HH-mm"),disabled:e.disabled})))};o.c.update(w,l).then((()=>{a()})).finally((()=>f(!1))),0!==e.working_days.length&&i.c.update(w,t).then((()=>{a()})).finally((()=>f(!1)))},prev:l,form:s,lines:g,loadingBtn:x,days:v,setDays:p,setLines:j,weeks:d.Q})})}},24332:(e,a,l)=>{l.d(a,{c:()=>o});var t=l(30800),r=l(99584);const s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 144H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H212V212h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H612V212h200v200zM464 544H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H212V612h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H612V612h200v200z"}}]},name:"appstore",theme:"outlined"};var n=l(47164),i=function(e,a){return r.createElement(n.c,(0,t.c)((0,t.c)({},e),{},{ref:a,icon:s}))};i.displayName="AppstoreOutlined";const o=r.forwardRef(i)},94404:(e,a,l)=>{l.d(a,{c:()=>u});var t=l(45072),r=l(99584),s=l(73568),n=function(e,a){var l={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&a.indexOf(t)<0&&(l[t]=e[t]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(t=Object.getOwnPropertySymbols(e);r<t.length;r++)a.indexOf(t[r])<0&&Object.prototype.propertyIsEnumerable.call(e,t[r])&&(l[t[r]]=e[t[r]])}return l},i=s.default.TimePicker,o=s.default.RangePicker,c=r.forwardRef((function(e,a){return r.createElement(o,(0,t.c)({},e,{dropdownClassName:e.popupClassName,picker:"time",mode:void 0,ref:a}))})),d=r.forwardRef((function(e,a){var l=e.addon,s=e.renderExtraFooter,o=e.popupClassName,c=n(e,["addon","renderExtraFooter","popupClassName"]),d=r.useMemo((function(){return s||(l||void 0)}),[l,s]);return r.createElement(i,(0,t.c)({},c,{dropdownClassName:o,mode:void 0,ref:a,renderExtraFooter:d}))}));d.displayName="TimePicker",d.RangePicker=c;const u=d}}]);