"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[7008],{19576:(e,l,n)=>{function d(e){switch(e){case"ascend":return"asc";case"descend":return"desc"}}n.d(l,{c:()=>d})},97008:(e,l,n)=>{n.r(l),n.d(l,{default:()=>E});var d=n(99584),i=n(66296),a=n(87968),t=n(98044),o=n(87228),s=n(68496),r=n(15752),u=n(32712),c=n(18896),v=n(65236),h=n(57024),m=n(68256),x=n(19576),p=n(36668),j=n(98948),g=n(95884),f=n(37564),b=n(97884);function w(e){var l,n,d,i,a,t,s,r,u,c;let{data:h,handleClose:m}=e;const{t:x}=(0,v.G)();return(0,b.jsx)(g.default,{title:x("request.details"),visible:!!h,onCancel:m,footer:(0,b.jsx)(o.c,{type:"default",onClick:m,children:x("cancel")}),children:(0,b.jsxs)(f.c,{bordered:!0,children:[(0,b.jsx)(f.c.Item,{span:3,label:x("id"),children:null===h||void 0===h?void 0:h.id}),(0,b.jsx)(f.c.Item,{span:3,label:x("firstname"),children:x(null===h||void 0===h||null===(l=h.model)||void 0===l?void 0:l.firstname)}),(0,b.jsx)(f.c.Item,{span:3,label:x("lastname"),children:x(null===h||void 0===h||null===(n=h.model)||void 0===n?void 0:n.lastname)}),(0,b.jsxs)(f.c.Item,{span:3,label:x("car"),children:[x(null===h||void 0===h||null===(d=h.data)||void 0===d?void 0:d.brand)," ",x(null===h||void 0===h||null===(i=h.data)||void 0===i?void 0:i.model)]}),(0,b.jsx)(f.c.Item,{span:3,label:x("car.number"),children:x(null===h||void 0===h||null===(a=h.data)||void 0===a?void 0:a.number)}),(0,b.jsx)(f.c.Item,{span:3,label:x("color"),children:x(null===h||void 0===h||null===(t=h.data)||void 0===t?void 0:t.color)}),(0,b.jsxs)(f.c.Item,{span:3,label:x("height"),children:[x(null===h||void 0===h||null===(s=h.data)||void 0===s?void 0:s.height),"  ",x("m")]}),(0,b.jsxs)(f.c.Item,{span:3,label:x("width"),children:[x(null===h||void 0===h||null===(r=h.data)||void 0===r?void 0:r.width),"  ",x("m")]}),(0,b.jsx)(f.c.Item,{span:3,label:x("status"),children:null!==h&&void 0!==h&&null!==(u=h.data)&&void 0!==u&&u.online?x("online"):x("offline")}),(0,b.jsx)(f.c.Item,{span:3,label:x("fuel"),children:x(null===h||void 0===h||null===(c=h.data)||void 0===c?void 0:c.type_of_technique)})]})})}var C=n(65732),y=n(68768),I=n(10260),k=n(2664),_=n(46712);const S=["pending","approved","canceled"];function P(e){let{data:l,handleClose:n,handleChange:i}=e;const{t:a}=(0,v.G)(),[t]=C.c.useForm(),[s,r]=(0,d.useState)(!1),[u,c]=(0,d.useState)(null===l||void 0===l?void 0:l.status);return(0,b.jsx)(b.Fragment,{children:(0,b.jsx)(g.default,{title:a("status.change"),visible:!!l,onCancel:n,footer:(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(o.c,{type:"default",onClick:n,children:a("cancel")}),(0,b.jsx)(o.c,{type:"primary",onClick:()=>t.submit(),loading:s,children:a("save")})]}),children:(0,b.jsx)(C.c,{form:t,layout:"vertical",onFinish:e=>{r(!0),i(null===l||void 0===l?void 0:l.id,e).final((()=>r(!1)))},initialValues:{status:null===l||void 0===l?void 0:l.status},children:(0,b.jsx)(y.c,{gutter:12,children:(0,b.jsxs)(I.c,{span:24,children:[(0,b.jsx)(C.c.Item,{label:a("status"),name:"status",rules:[{required:!0,message:a("required")}],children:(0,b.jsx)(k.default,{onChange:e=>c(e),children:S.map(((e,l)=>(0,b.jsx)(k.default.Option,{value:e,children:a(e)},e+l)))})}),"canceled"===u?(0,b.jsx)(C.c.Item,{name:"status_note",label:a("note"),rules:[{validator:(e,l)=>l?l&&""===(null===l||void 0===l?void 0:l.trim())?Promise.reject(new Error(a("no.empty.space"))):l&&(null===l||void 0===l?void 0:l.trim().length)<2?Promise.reject(new Error(a("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(a("required")))}],children:(0,b.jsx)(_.default.TextArea,{maxLength:250,showCount:!0})}):""]})})})})})}var q=n(68660),G=n(61072);function E(){const e=(0,u.OY)(),{t:l}=(0,v.G)(),{activeMenu:n}=(0,u.w1)((e=>e.menu),u.G),{deliverymanRequestData:g,meta:f,loading:C}=(0,u.w1)((e=>e.deliverymanRequest),u.G),[y,I]=(0,d.useState)(null),[k,_]=(0,d.useState)(null),[S,E]=(0,d.useState)(null),F=n.data,O={perPage:null===F||void 0===F?void 0:F.perPage,page:null===F||void 0===F?void 0:F.page,search:null===F||void 0===F?void 0:F.search,columns:null===F||void 0===F?void 0:F.columns};(0,m.c)((()=>{e((0,h.e)(O))}),[null===n||void 0===n?void 0:n.data]),(0,d.useEffect)((()=>{null!==n&&void 0!==n&&n.refetch&&(e((0,h.e)(O)),e((0,c.CO)(n)))}),[null===n||void 0===n?void 0:n.refetch]);const M={selectedRowKeys:y,onChange:e=>{I(e)}};const R=[{title:l("id"),dataIndex:"id",key:"id",is_show:!0},{title:l("name"),dataIndex:"name",key:"name",is_show:!0,render:(e,l)=>{var n,d;return(null===l||void 0===l||null===(n=l.model)||void 0===n?void 0:n.firstname)+" "+(null===l||void 0===l||null===(d=l.model)||void 0===d?void 0:d.lastname)}},{title:l("delivery.man.setting"),dataIndex:"setting",key:"setting",is_show:!0,render:(e,n)=>{var d,a,t,o;return(0,b.jsx)(i.c,{children:(0,b.jsxs)("span",{children:[l("brand"),": ",null===n||void 0===n||null===(d=n.data)||void 0===d?void 0:d.brand,(0,b.jsx)("br",{}),l("model"),": ",null===n||void 0===n||null===(a=n.data)||void 0===a?void 0:a.model,(0,b.jsx)("br",{}),l("number"),": ",null===n||void 0===n||null===(t=n.data)||void 0===t?void 0:t.number,(0,b.jsx)("br",{}),l("color"),": ",null===n||void 0===n||null===(o=n.data)||void 0===o?void 0:o.color]})})}},{title:l("image"),dataIndex:"image",key:"image",is_show:!0,render:(e,l)=>{var n;return(0,b.jsx)(a.c,{src:(null===l||void 0===l||null===(n=l.data)||void 0===n?void 0:n["images[0]"])||"https://via.placeholder.com/100",alt:"img",width:100,className:"rounded",preview:!0,placeholder:!0})}},{title:l("status"),dataIndex:"status",key:"status",is_show:!0,render:(e,n)=>(0,b.jsxs)("div",{children:["pending"===e?(0,b.jsx)(t.c,{color:"blue",children:l(e)}):"canceled"===e?(0,b.jsx)(t.c,{color:"error",children:l(e)}):(0,b.jsx)(t.c,{color:"cyan",children:l(e)}),n.deleted_at?"":(0,b.jsx)(p.c,{onClick:()=>E(n)})]})},{title:l("options"),key:"options",dataIndex:"options",is_show:!0,render:(e,l)=>(0,b.jsx)(i.c,{children:(0,b.jsx)(o.c,{icon:(0,b.jsx)(j.c,{}),onClick:e=>{e.stopPropagation(),_(l)}})})}];return(0,b.jsxs)(s.default,{title:l("deliveryman.request"),children:[(0,b.jsx)(r.c,{scroll:{x:!0},rowSelection:M,columns:null===R||void 0===R?void 0:R.filter((e=>null===e||void 0===e?void 0:e.is_show)),dataSource:g,pagination:{pageSize:null===f||void 0===f?void 0:f.perPage,total:null===f||void 0===f?void 0:f.total,current:null===F||void 0===F?void 0:F.page,page:(null===F||void 0===F?void 0:F.page)||1,defaultCurrent:null===F||void 0===F?void 0:F.page},onChange:function(l,d,i){const{pageSize:a,current:t}=l,{field:o,order:s}=i,r=(0,x.c)(s);e((0,c.MH)({activeMenu:n,data:{...null===n||void 0===n?void 0:n.data,perPage:a,page:t,column:o,sort:r}}))},rowKey:e=>null===e||void 0===e?void 0:e.id,loading:C}),k?(0,b.jsx)(w,{data:k,handleClose:()=>_(null)}):null,S?(0,b.jsx)(P,{data:S,handleChange:(d,i)=>{const a={status_note:null===i||void 0===i?void 0:i.status_note,status:null===i||void 0===i?void 0:i.status};return q.c.changeStatus(d,a).then((()=>{E(null),G.m4.success(l("successfully.updated")),e((0,h.e)(O)),e((0,c.CO)(n))}))},handleClose:()=>E(null)}):null]})}}}]);