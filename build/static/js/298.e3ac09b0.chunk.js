"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[298],{1428:(e,l,t)=>{t.d(l,{c:()=>o});t(99584);var n=t(87228),a=t(59424),s=t(61072),i=t(65236),d=t(75088),c=t(97884);function o(e){let{size:l="",onClick:t,type:o="default",...r}=e;const{t:u}=(0,i.G)(),{isDemo:h}=(0,d.c)();return(0,c.jsx)(n.c,{size:l,icon:(0,c.jsx)(a.c,{}),onClick:e=>{h?s.m4.warning(u("cannot.work.demo")):t(e)},type:o,...r})}},53992:(e,l,t)=>{t.d(l,{c:()=>x});var n=t(99584),a=t(49308),s=t(92200),i=t(66296),d=t(26012),c=t(72192),o=t(35928),r=t(87228),u=t(55512),h=t(65236),v=t(97884);const{Text:m}=a.default,x=e=>{let{columns:l=[],setColumns:t,style:a,size:x="",iconOnly:f}=e;const{t:p}=(0,h.G)(),[j,g]=(0,n.useState)(!1),b=(0,v.jsx)(s.c,{children:null===l||void 0===l?void 0:l.map(((e,n)=>(0,v.jsx)(s.c.Item,{children:(0,v.jsxs)(i.c,{className:"d-flex justify-content-between",children:[(0,v.jsx)(m,{children:e.title}),(0,v.jsx)(d.c,{defaultChecked:!0,onClick:()=>function(e){const n=null===l||void 0===l?void 0:l.map((l=>(l.dataIndex===e.dataIndex&&(l.is_show=!(null!==l&&void 0!==l&&l.is_show)),l)));t(n)}(e),disabled:1===n})]})},e+n)))});return(0,v.jsx)(c.c,{overlay:b,trigger:["click"],onVisibleChange:e=>{g(e)},visible:j,children:(0,v.jsx)(o.c,{title:p("change.columns"),children:(0,v.jsx)(r.c,{style:{...a},size:x,icon:(0,v.jsx)(u.c,{}),children:f?null:p("Columns")})})})}},40748:(e,l,t)=>{t.d(l,{c:()=>c});var n=t(99584),a=t(46712),s=t(78816),i=t(6724),d=t(97884);function c(e){let{handleChange:l,defaultValue:t,resetSearch:c,...o}=e;const[r,u]=(0,n.useState)(t),h=(0,n.useMemo)((()=>(0,s.debounce)((e=>{l(e)}),800)),[l]);return(0,n.useEffect)((()=>{u(t)}),[c,t]),(0,d.jsx)(a.default,{value:r,onChange:e=>{u(e.target.value),h(e.target.value)},prefix:(0,d.jsx)(i.c,{}),...o})}},19576:(e,l,t)=>{function n(e){switch(e){case"ascend":return"asc";case"descend":return"desc"}}t.d(l,{c:()=>n})},60298:(e,l,t)=>{t.r(l),t.d(l,{default:()=>R});var n=t(99584),a=t(36668),s=t(98948),i=t(59424),d=t(3952),c=t(84616),o=t(98044),r=t(66296),u=t(87228),h=t(68496),v=t(15752),m=t(61072),x=t(46003),f=t(98016),p=t(32712),j=t(23424),g=t(18896),b=t(36640),y=t(65236),C=t(1428),w=t(53992),k=t(40748),_=t(68256),S=t(19576),z=t(79728),M=t(65732),H=t(95884),I=t(68768),V=t(10260),Y=t(2664),D=t(97884);const G=["new","accepted","canceled"];function O(e){let{orderDetails:l,handleCancel:t,paramsData:a}=e;const{activeMenu:s}=(0,p.w1)((e=>e.menu),p.G),[i]=M.c.useForm(),d=(0,p.OY)(),{t:c}=(0,y.G)(),[o,r]=(0,n.useState)(!1);return(0,D.jsx)(H.default,{visible:!!l,title:l.title,onCancel:t,footer:[(0,D.jsx)(u.c,{type:"primary",onClick:()=>i.submit(),loading:o,children:c("save")}),(0,D.jsx)(u.c,{type:"default",onClick:t,children:c("cancel")})],children:(0,D.jsx)(M.c,{form:i,layout:"vertical",onFinish:e=>{r(!0);const n={...e};b.c.updateStatus(l.id,n).then((()=>{t(),d((0,z.o)(a)),d((0,g.CO)(s))})).finally((()=>r(!1)))},initialValues:{status:l.status},children:(0,D.jsx)(I.c,{gutter:12,children:(0,D.jsx)(V.c,{span:24,children:(0,D.jsx)(M.c.Item,{label:c("status"),name:"status",rules:[{required:!0,message:c("required")}],children:(0,D.jsx)(Y.default,{children:G.map(((e,l)=>(0,D.jsx)(Y.default.Option,{value:e,children:c(e)},e+l)))})})})})})})}var N=t(83072),E=t.n(N),P=t(37728),T=t(37564);const B=e=>{var l,t,a,s,i,d,c;let{id:o,handleClose:r}=e;const{t:h}=(0,y.G)(),[v,m]=(0,n.useState)(null),[x,f]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{f(!0),b.c.getById(o).then((e=>{m(e.data)})).catch((()=>{r()})).finally((()=>{f(!1)}))}),[o]),(0,D.jsx)(H.default,{visible:!!o,title:h("booking.detail"),onCancel:r,footer:[(0,D.jsx)(u.c,{type:"default",onClick:r,children:h("close")})],children:(0,D.jsx)(P.c,{spinning:x,children:(0,D.jsxs)(T.c,{bordered:!0,column:1,children:[(0,D.jsx)(T.c.Item,{label:h("start.date"),children:E()(null===v||void 0===v?void 0:v.start_date).format("YYYY-MM-DD HH:MM")}),(0,D.jsx)(T.c.Item,{label:h("booking.zone"),children:null===v||void 0===v||null===(l=v.table)||void 0===l||null===(t=l.shop_section.translation)||void 0===t?void 0:t.title}),(0,D.jsx)(T.c.Item,{label:h("table"),children:null===v||void 0===v||null===(a=v.table)||void 0===a?void 0:a.name}),(0,D.jsxs)(T.c.Item,{label:h("user"),children:[null===v||void 0===v||null===(s=v.user)||void 0===s?void 0:s.firstname," ",null===v||void 0===v||null===(i=v.user)||void 0===i?void 0:i.lastname," ",(0,D.jsx)("a",{href:"tel:".concat(null===v||void 0===v||null===(d=v.user)||void 0===d?void 0:d.phone),children:null===v||void 0===v||null===(c=v.user)||void 0===c?void 0:c.phone})]}),(0,D.jsx)(T.c.Item,{label:h("guests"),children:null===v||void 0===v?void 0:v.guest}),(0,D.jsx)(T.c.Item,{label:h("comment"),children:null===v||void 0===v?void 0:v.note})]})})})},F=["all","new","accepted","canceled","deleted_at"],{TabPane:K}=c.default,R=()=>{var e,l,t;const{t:M}=(0,y.G)(),H=(0,p.OY)(),I=(0,j.i6)(),{setIsModalVisible:V}=(0,n.useContext)(f.e),[Y,G]=(0,n.useState)(null),[N,P]=(0,n.useState)(!1),[T,R]=(0,n.useState)(null),[q,W]=(0,n.useState)(null),{activeMenu:L}=(0,p.w1)((e=>e.menu),p.G),[A,J]=(0,n.useState)("all"),Q=(null===(e=L.data)||void 0===e?void 0:e.role)||A,U=null===L||void 0===L?void 0:L.data,[X,Z]=(0,n.useState)(null),{myShop:$}=(0,p.w1)((e=>e.myShop),p.G),{booking:ee,meta:le,loading:te}=(0,p.w1)((e=>e.bookingList),p.G),ne={sort:null===U||void 0===U?void 0:U.sort,column:null===U||void 0===U?void 0:U.column,search:null!==U&&void 0!==U&&U.search?U.search:void 0,perPage:null===U||void 0===U?void 0:U.perPage,page:null===U||void 0===U?void 0:U.page,status:"deleted_at"===Q||"all"===Q?void 0:Q,deleted_at:"deleted_at"===(null===U||void 0===U?void 0:U.role)?null===U||void 0===U?void 0:U.role:null,shop_id:$.id},[ae,se]=(0,n.useState)([{title:M("id"),dataIndex:"id",key:"id",is_show:!0,sorter:!0},{title:M("start.date"),dataIndex:"start_date",key:"start_date",is_show:!0,render:e=>E()(e).format("YYYY-MM-DD HH:MM")},{title:M("table"),dataIndex:"title",key:"title",is_show:!0,render:(e,l)=>{var t;return null===l||void 0===l||null===(t=l.table)||void 0===t?void 0:t.name}},{title:M("user"),dataIndex:"user",key:"user",is_show:!0,render:e=>(0,D.jsxs)("span",{children:[e.firstname," ",null===e||void 0===e?void 0:e.lastname," ",(0,D.jsx)("a",{href:"tel:".concat(null===e||void 0===e?void 0:e.phone),children:null===e||void 0===e?void 0:e.phone})]})},{title:M("status"),is_show:!0,dataIndex:"status",key:"status",render:(e,l)=>(0,D.jsxs)("div",{children:["new"===e?(0,D.jsx)(o.c,{color:"blue",children:M(e)}):"canceled"===e?(0,D.jsx)(o.c,{color:"error",children:M(e)}):(0,D.jsx)(o.c,{color:"cyan",children:M(e)}),l.deleted_at?"":(0,D.jsx)(a.c,{onClick:()=>Z(l)})]})},{title:M("options"),key:"options",dataIndex:"options",is_show:!0,render:(e,l)=>(0,D.jsxs)(r.c,{children:[(0,D.jsx)(u.c,{icon:(0,D.jsx)(s.c,{}),onClick:()=>W(l.id),disabled:l.deleted_at}),(0,D.jsx)(C.c,{disabled:l.deleted_at,danger:!0,type:"primary",icon:(0,D.jsx)(i.c,{}),onClick:()=>{G([l.id]),V(!0),R(!0)}})]})}]);(0,_.c)((()=>{H((0,z.o)(ne))}),[L.data]),(0,n.useEffect)((()=>{L.refetch&&(H((0,z.o)(ne)),H((0,g.CO)(L)))}),[L.refetch]);const ie={selectedRowKeys:Y,onChange:e=>{G(e)}},de=e=>{const l=L.data;H((0,g.MH)({activeMenu:L,data:{...l,...e}}))};return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(h.default,{className:"p-0",children:(0,D.jsxs)(r.c,{wrap:!0,children:[(0,D.jsx)(k.c,{placeholder:M("search"),className:"w-25",handleChange:e=>{de({search:e})},defaultValue:null===(l=L.data)||void 0===l?void 0:l.search,resetSearch:!(null!==(t=L.data)&&void 0!==t&&t.search),style:{minWidth:300}}),(0,D.jsx)(C.c,{size:"",onClick:()=>{null===Y||0===Y.length?m.m4.warning(M("select.the.reservation")):(V(!0),R(!1))},children:M("delete.selected")}),(0,D.jsx)(u.c,{type:"primary",icon:(0,D.jsx)(d.c,{}),onClick:()=>{H((0,g.WC)({id:"reservation/add",url:"seller/booking",name:M("add.reservation")})),I("/seller/booking")},children:M("add.reservation")}),(0,D.jsx)(w.c,{columns:ae,setColumns:se})]})}),(0,D.jsxs)(h.default,{title:M("reservation.list"),children:[(0,D.jsx)(c.default,{className:"mt-3",activeKey:Q,onChange:e=>{de({role:e,page:1}),J(e)},type:"card",children:F.map((e=>(0,D.jsx)(K,{tab:M(e)},e)))}),(0,D.jsx)(v.c,{scroll:{x:!0},rowSelection:ie,columns:null===ae||void 0===ae?void 0:ae.filter((e=>e.is_show)),dataSource:ee,pagination:{pageSize:null===le||void 0===le?void 0:le.per_page,page:null===le||void 0===le?void 0:le.current_page,total:null===le||void 0===le?void 0:le.total},rowKey:e=>e.id,onChange:function(e,l,t){const{pageSize:n,current:a}=e,{field:s,order:i}=t,d=(0,S.c)(i);H((0,g.MH)({activeMenu:L,data:{...U,perPage:n,page:a,column:s,sort:d}}))},loading:te})]}),X&&(0,D.jsx)(O,{orderDetails:X,handleCancel:()=>Z(null),paramsData:ne}),(0,D.jsx)(x.c,{click:()=>{P(!0);const e={...Object.assign({},...Y.map(((e,l)=>({["ids[".concat(l,"]")]:e}))))};b.c.delete(e).then((()=>{m.m4.success(M("successfully.deleted")),H((0,z.o)(ne)),V(!1),R(null),G(null)})).finally((()=>P(!1)))},text:M(T?"delete":"all.delete"),setText:G,loading:N}),!!q&&(0,D.jsx)(B,{id:q,handleClose:()=>W(null)})]})}},3952:(e,l,t)=>{t.d(l,{c:()=>c});var n=t(30800),a=t(99584);const s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"};var i=t(47164),d=function(e,l){return a.createElement(i.c,(0,n.c)((0,n.c)({},e),{},{ref:l,icon:s}))};d.displayName="PlusCircleOutlined";const c=a.forwardRef(d)},55512:(e,l,t)=>{t.d(l,{c:()=>c});var n=t(30800),a=t(99584);const s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 208H676V232h212v136zm0 224H676V432h212v160zM412 432h200v160H412V432zm200-64H412V232h200v136zm-476 64h212v160H136V432zm0-200h212v136H136V232zm0 424h212v136H136V656zm276 0h200v136H412V656zm476 136H676V656h212v136z"}}]},name:"table",theme:"outlined"};var i=t(47164),d=function(e,l){return a.createElement(i.c,(0,n.c)((0,n.c)({},e),{},{ref:l,icon:s}))};d.displayName="TableOutlined";const c=a.forwardRef(d)}}]);