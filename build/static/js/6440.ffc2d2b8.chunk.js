"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[6440],{6428:(e,a,s)=>{s.d(a,{u:()=>m});var l=s(99584),r=s(95976),i=s.n(r),n=s(2664),c=s(37728),t=s(97884);const m=e=>{let{fetchOptions:a,debounceTimeout:s=400,refetch:r=!1,...m}=e;const[d,u]=(0,l.useState)(!1),[o,h]=(0,l.useState)([]),p=(0,l.useMemo)((()=>i()((e=>{h([]),u(!0),a(e).then((e=>{h(e),u(!1)}))}),s)),[a,s]);return(0,t.jsx)(n.default,{showSearch:!0,allowClear:!0,labelInValue:!0,onClear:()=>p(""),filterOption:!1,onSearch:p,notFoundContent:d?(0,t.jsx)(c.c,{size:"small"}):"no results",...m,options:o,onFocus:()=>{p("")}})}},16440:(e,a,s)=>{s.r(a),s.d(a,{default:()=>y});var l=s(99584),r=s(65732),i=s(68496),n=s(68768),c=s(10260),t=s(46712),m=s(10240),d=s(26012),u=s(87228),o=s(61072),h=s(23424),p=s(97276),x=s(32712),j=s(18896),g=s(65236),v=s(49580),f=s(77180),_=s(40936),b=s(13676),w=s(94912),q=s(6428),I=s(97884);function y(){var e,a;const{t:s}=(0,g.G)(),y=(0,h.i6)(),{id:N}=(0,h.W4)(),k=(0,x.OY)(),[A]=r.c.useForm(),{activeMenu:F}=(0,x.w1)((e=>e.menu),x.G),[S,C]=(0,l.useState)(!1),[P,E]=(0,l.useState)(!1),[M,O]=(0,l.useState)((null===F||void 0===F||null===(e=F.data)||void 0===e?void 0:e.image)||[]),[V,B]=(0,l.useState)(null===F||void 0===F||null===(a=F.data)||void 0===a?void 0:a.special);(0,l.useEffect)((()=>()=>{const e=A.getFieldsValue(!0);k((0,j.MH)({activeMenu:F,data:{...F.data,...e}}))}),[]);return(0,l.useEffect)((()=>{F.refetch&&N&&(e=>{C(!0),p.c.getById(e).then((e=>{let a=e.data;O([(0,v.c)(a.img)]),B(a.special),A.setFieldsValue({...a,image:[(0,v.c)(a.img)],options:null===a||void 0===a?void 0:a.options.map((e=>{var a;return{label:null===(a=e.translation)||void 0===a?void 0:a.title,value:e.id}}))})})).finally((()=>{C(!1),k((0,j.CO)(F))}))})(N)}),[F.refetch]),(0,I.jsx)(i.default,{title:s(N?"edit.parcel.type":"add.parcel.type"),children:S?(0,I.jsx)(f.c,{}):(0,I.jsxs)(r.c,{form:A,name:"parcel-type",layout:"vertical",initialValues:{...F.data},onFinish:e=>{var a;E(!0);const l={...e,special:Boolean(e.special),special_price:e.special_price||0,special_price_per_km:e.special_price_per_km||0,images:null===M||void 0===M?void 0:M.map((e=>e.name)),image:void 0,options:null===(a=e.options)||void 0===a?void 0:a.map((e=>e.value))},r="parcel-types";N?p.c.update(N,l).then((()=>{k((0,b.x)()),o.m4.success(s("successfully.updated")),k((0,j.MF)({...F,nextUrl:r})),y("/".concat(r))})).finally((()=>E(!1))):p.c.create(l).then((()=>{k((0,b.x)()),o.m4.success(s("successfully.created")),k((0,j.MF)({...F,nextUrl:r})),y("/".concat(r))})).finally((()=>E(!1)))},children:[(0,I.jsxs)(n.c,{gutter:12,children:[(0,I.jsx)(c.c,{span:12,children:(0,I.jsx)(r.c.Item,{label:s("title"),name:"type",rules:[{validator:(e,a)=>a?a&&""===(null===a||void 0===a?void 0:a.trim())?Promise.reject(new Error(s("no.empty.space"))):a&&(null===a||void 0===a?void 0:a.trim().length)<2?Promise.reject(new Error(s("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(s("required")))}],children:(0,I.jsx)(t.default,{})})}),(0,I.jsx)(c.c,{span:12,children:(0,I.jsx)(r.c.Item,{label:s("image"),name:"images",rules:[{validator:()=>0===(null===M||void 0===M?void 0:M.length)?Promise.reject(new Error(s("required"))):Promise.resolve()}],children:(0,I.jsx)(_.c,{type:"languages",imageList:M,setImageList:O,form:A,multiple:!1})})}),(0,I.jsx)(c.c,{span:12,children:(0,I.jsx)(r.c.Item,{label:s("start.price"),name:"price",rules:[{required:!0,message:s("required")}],children:(0,I.jsx)(m.c,{min:0,className:"w-100"})})}),(0,I.jsx)(c.c,{span:12,children:(0,I.jsx)(r.c.Item,{label:s("price.per.km"),name:"price_per_km",rules:[{required:!0,message:s("required")}],children:(0,I.jsx)(m.c,{min:0,className:"w-100"})})}),(0,I.jsx)(c.c,{span:12,children:(0,I.jsx)(r.c.Item,{label:s("min_width"),name:"min_width",rules:[{required:!0,message:s("required")}],children:(0,I.jsx)(m.c,{min:0,max:32678,className:"w-100",addonAfter:"sm"})})}),(0,I.jsx)(c.c,{span:12,children:(0,I.jsx)(r.c.Item,{label:s("max_width"),name:"max_width",rules:[{required:!0,message:s("required")}],children:(0,I.jsx)(m.c,{min:0,max:32678,className:"w-100",addonAfter:"sm"})})}),(0,I.jsx)(c.c,{span:12,children:(0,I.jsx)(r.c.Item,{label:s("min_height"),name:"min_height",rules:[{required:!0,message:s("required")}],children:(0,I.jsx)(m.c,{min:0,max:32678,className:"w-100",addonAfter:"sm"})})}),(0,I.jsx)(c.c,{span:12,children:(0,I.jsx)(r.c.Item,{label:s("max_height"),name:"max_height",rules:[{required:!0,message:s("required")}],children:(0,I.jsx)(m.c,{min:0,max:32678,className:"w-100",addonAfter:"sm"})})}),(0,I.jsx)(c.c,{span:12,children:(0,I.jsx)(r.c.Item,{label:s("min_length"),name:"min_length",rules:[{required:!0,message:s("required")}],children:(0,I.jsx)(m.c,{min:0,max:32678,className:"w-100",addonAfter:"sm"})})}),(0,I.jsx)(c.c,{span:12,children:(0,I.jsx)(r.c.Item,{label:s("max_length"),name:"max_length",rules:[{required:!0,message:s("required")}],children:(0,I.jsx)(m.c,{min:0,max:32678,className:"w-100",addonAfter:"sm"})})}),(0,I.jsx)(c.c,{span:12,children:(0,I.jsx)(r.c.Item,{label:s("min_weight"),name:"min_g",rules:[{required:!0,message:s("required")}],children:(0,I.jsx)(m.c,{min:0,max:32678,className:"w-100",addonAfter:"gramm"})})}),(0,I.jsx)(c.c,{span:12,children:(0,I.jsx)(r.c.Item,{label:s("max_weight"),name:"max_g",rules:[{required:!0,message:s("required")}],children:(0,I.jsx)(m.c,{min:0,max:2147e6,className:"w-100",addonAfter:"gramm"})})}),(0,I.jsx)(c.c,{span:12,children:(0,I.jsx)(r.c.Item,{label:s("options"),name:"options",children:(0,I.jsx)(q.u,{fetchOptions:async e=>w.c.getAll({search:e}).then((e=>{let{data:a}=e;return a.map((e=>{var a;return{label:null===(a=e.translation)||void 0===a?void 0:a.title,value:e.id}}))})),mode:"multiple"})})}),(0,I.jsx)(c.c,{span:12,children:(0,I.jsx)(r.c.Item,{label:s("max.range"),name:"max_range",children:(0,I.jsx)(m.c,{min:0,className:"w-100",addonAfter:"km"})})}),(0,I.jsx)(c.c,{span:24,children:(0,I.jsx)(r.c.Item,{label:s("special"),name:"special",valuePropName:"checked",children:(0,I.jsx)(d.c,{onChange:e=>B(e)})})}),!!V&&(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(c.c,{span:12,children:(0,I.jsx)(r.c.Item,{label:s("start.price"),name:"special_price",rules:[{required:!0,message:s("required")}],children:(0,I.jsx)(m.c,{min:0,className:"w-100"})})}),(0,I.jsx)(c.c,{span:12,children:(0,I.jsx)(r.c.Item,{label:s("price.per.km"),name:"special_price_per_km",rules:[{required:!0,message:s("required")}],children:(0,I.jsx)(m.c,{min:0,className:"w-100"})})})]})]}),(0,I.jsx)(u.c,{type:"primary",htmlType:"submit",loading:P,children:s("save")})]})})}}}]);