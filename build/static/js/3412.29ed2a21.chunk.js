"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[3412],{40748:(e,t,a)=>{a.d(t,{c:()=>c});var l=a(99584),r=a(46712),n=a(78816),s=a(6724),i=a(97884);function c(e){let{handleChange:t,defaultValue:a,resetSearch:c,...o}=e;const[d,u]=(0,l.useState)(a),h=(0,l.useMemo)((()=>(0,n.debounce)((e=>{t(e)}),800)),[t]);return(0,l.useEffect)((()=>{u(a)}),[c,a]),(0,i.jsx)(r.default,{value:d,onChange:e=>{u(e.target.value),h(e.target.value)},prefix:(0,i.jsx)(s.c,{}),...o})}},43412:(e,t,a)=>{a.r(t),a.d(t,{default:()=>I});var l=a(99584),r=a(65732),n=a(46712),s=a(68496),i=a(66296),c=a(2664),o=a(87228),d=a(15752),u=a(33012);const h={getAll:e=>u.c.get("dashboard/admin/translations/paginate",{params:e}),delete:e=>u.c.delete("dashboard/admin/translations/".concat(e)),getById:(e,t)=>u.c.get("dashboard/admin/translations/".concat(e),{params:t}),create:e=>u.c.post("dashboard/admin/translations",{},{params:e}),update:(e,t)=>u.c.put("dashboard/admin/translations/".concat(e),{},{params:t})};var m=a(61072),p=a(36668),f=a(3952),v=a(95884),x=a(68768),g=a(10260),j=a(65236),b=a(97884);function y(e){let{visible:t,setVisible:a,languages:s,refetch:i}=e;const{t:d}=(0,j.G)(),[u,p]=(0,l.useState)(!1),[f]=r.c.useForm(),y=()=>{a(!1)};return(0,b.jsx)(v.default,{visible:t,title:d("add.translation"),onCancel:y,footer:[(0,b.jsx)(o.c,{type:"primary",form:"translation-form",htmlType:"submit",loading:u,children:d("create")},"create-translation"),(0,b.jsx)(o.c,{type:"default",onClick:y,children:d("cancel")},"create-translation-cancel")],children:(0,b.jsx)(r.c,{id:"translation-form",name:"translation",layout:"vertical",onFinish:e=>{p(!0),h.create(e).then((()=>{m.m4.success(d("successfully.created")),a(!1),i()})).finally((()=>p(!1)))},form:f,initialValues:{group:"web"},children:(0,b.jsxs)(x.c,{gutter:12,children:[(0,b.jsx)(g.c,{span:24,children:(0,b.jsx)(r.c.Item,{label:d("name"),name:"key",rules:[{validator:(e,t)=>t?t&&""===(null===t||void 0===t?void 0:t.trim())?Promise.reject(new Error(d("no.empty.space"))):t&&(null===t||void 0===t?void 0:t.trim().length)<2?Promise.reject(new Error(d("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(d("required")))}],children:(0,b.jsx)(n.default,{})})}),(0,b.jsx)(g.c,{span:24,children:(0,b.jsx)(r.c.Item,{label:d("group"),name:"group",rules:[{required:!0,message:""}],children:(0,b.jsxs)(c.default,{children:[(0,b.jsx)(c.default.Option,{value:"web",children:d("web")}),(0,b.jsx)(c.default.Option,{value:"mobile",children:d("mobile")}),(0,b.jsx)(c.default.Option,{value:"errors",children:d("errors")})]})})}),s.map(((e,t)=>(0,b.jsx)(g.c,{span:24,children:(0,b.jsx)(r.c.Item,{label:"".concat(d("translation")," (").concat(e.locale,")"),name:"value[".concat(e.locale,"]"),rules:[{validator:(e,t)=>t?t&&""===(null===t||void 0===t?void 0:t.trim())?Promise.reject(new Error(d("no.empty.space"))):t&&(null===t||void 0===t?void 0:t.trim().length)<2?Promise.reject(new Error(d("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(d("required")))}],children:(0,b.jsx)(n.default,{})})},t)))]})})})}var w=a(32712),S=a(40748);const k=l.createContext(null),C=e=>{let{index:t,...a}=e;const[l]=r.c.useForm();return(0,b.jsx)(r.c,{form:l,component:!1,children:(0,b.jsx)(k.Provider,{value:l,children:(0,b.jsx)("tr",{...a})})})},P=e=>{let{title:t,editable:a,children:s,dataIndex:i,record:c,handleSave:o,...d}=e;const{t:u}=(0,j.G)(),[h,m]=(0,l.useState)(!1),f=(0,l.useRef)(null),v=(0,l.useContext)(k);(0,l.useEffect)((()=>{h&&f.current.focus()}),[h]);const x=()=>{m(!h),v.setFieldsValue({[i]:c[i]})},g=async()=>{try{const e=await v.validateFields();x(),o({...c,...e,dataIndex:i})}catch(e){console.log("Save failed:",e)}};let y=s;return a&&(y=h?(0,b.jsx)(r.c.Item,{style:{margin:0},name:i,rules:[{validator:(e,t)=>t?t&&""===(null===t||void 0===t?void 0:t.trim())?Promise.reject(new Error(u("no.empty.space"))):t&&(null===t||void 0===t?void 0:t.trim().length)<2?Promise.reject(new Error(u("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(u("required")))}],children:(0,b.jsx)(n.default,{ref:f,onPressEnter:g,onBlur:g})}):(0,b.jsxs)("div",{className:"editable-cell-value-wrap cursor-pointer d-flex justify-content-between align-items-center",style:{paddingRight:24},onClick:x,children:[(0,b.jsx)("div",{className:"w-100",children:s}),(0,b.jsx)(p.c,{})]})),(0,b.jsx)("td",{...d,children:y})};function I(){const{t:e}=(0,j.G)(),[t,a]=(0,l.useState)([]),[r,n]=(0,l.useState)(10),[u,p]=(0,l.useState)(1),[v,x]=(0,l.useState)(0),[g,k]=(0,l.useState)(!1),[I,E]=(0,l.useState)(null),[O,V]=(0,l.useState)(null),[z,F]=(0,l.useState)(null),[q,G]=(0,l.useState)(!1),[M,B]=(0,l.useState)(0),{languages:N}=(0,w.w1)((e=>e.formLang),w.G),[R,A]=(0,l.useState)(""),[H,W]=(0,l.useState)(""),_=(0,l.useMemo)((()=>[{title:e("name"),dataIndex:"key",sorter:(e,t,a)=>K(a,"key"),width:250,fixed:"left"},{title:e("group"),dataIndex:"group",sorter:(e,t,a)=>K(a,"group"),width:150,fixed:"left"},...N.filter((e=>!R||e.locale===R)).map((e=>({title:e.title,dataIndex:"value[".concat(e.locale,"]"),editable:!0,width:300})))]),[N,R]);function K(e,t){let a;switch(e){case"ascend":a="asc";break;case"descend":a="desc"}V(a),F(t)}function L(){k(!0);const e={perPage:r,skip:M,group:I,sort:O,column:z,search:H};h.getAll(e).then((e=>{let{data:t}=e;const l=Object.entries(t.translations).map((e=>({key:e[0],group:e[1][0].group,...Object.assign({},...N.map((t=>{var a;return{["value[".concat(t.locale,"]")]:null===(a=e[1].find((e=>e.locale===t.locale)))||void 0===a?void 0:a.value}})))})));a(l),x(t.total)})).finally((()=>k(!1)))}(0,l.useEffect)((()=>{L()}),[r,I,O,z,M,H]);const T=e=>{const{dataIndex:l,key:r}=e,n=[...t],s=n.findIndex((t=>e.key===t.key)),i=n[s];if(i[l]===e[l])return;n.splice(s,1,{...i,...e}),a(n);!function(e,t){h.update(e,t).then((e=>m.m4.success(e.message)))}(r,{...e,value:void 0,dataIndex:void 0,key:void 0})};const D={body:{row:C,cell:P}},J=_.map((e=>e.editable?{...e,onCell:t=>({record:t,editable:e.editable,dataIndex:e.dataIndex,title:e.title,fixed:e.fixed,handleSave:T})}:e));return(0,b.jsxs)(s.default,{title:e("translations"),extra:(0,b.jsxs)(i.c,{wrap:!0,children:[(0,b.jsx)(S.c,{placeholder:e("search"),handleChange:e=>W(e)}),(0,b.jsxs)(c.default,{style:{minWidth:150},value:R,onChange:e=>A(e),placeholder:e("select.language"),children:[(0,b.jsx)(c.default.Option,{value:"",children:e("all")}),N.map((e=>(0,b.jsx)(c.default.Option,{value:e.locale,children:e.title},e.locale)))]}),(0,b.jsxs)(c.default,{style:{minWidth:150},value:I,onChange:e=>E(e),placeholder:e("select.group"),children:[(0,b.jsx)(c.default.Option,{value:"",children:e("all")}),(0,b.jsx)(c.default.Option,{value:"web",children:e("web")}),(0,b.jsx)(c.default.Option,{value:"mobile",children:e("mobile")}),(0,b.jsx)(c.default.Option,{value:"errors",children:e("errors")})]}),(0,b.jsx)(o.c,{icon:(0,b.jsx)(f.c,{}),type:"primary",onClick:()=>G(!0),children:e("add.translation")})]}),children:[(0,b.jsx)(d.c,{components:D,columns:J,dataSource:t,pagination:{pageSize:r,page:u,total:v},rowKey:e=>e.id,onChange:e=>{const{pageSize:t,current:a}=e,l=(a-1)*t;n(t),p(a),B(l)},loading:g,scroll:{x:1500}}),q&&(0,b.jsx)(y,{visible:q,setVisible:G,languages:N,refetch:L})]})}},3952:(e,t,a)=>{a.d(t,{c:()=>c});var l=a(30800),r=a(99584);const n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"};var s=a(47164),i=function(e,t){return r.createElement(s.c,(0,l.c)((0,l.c)({},e),{},{ref:t,icon:n}))};i.displayName="PlusCircleOutlined";const c=r.forwardRef(i)}}]);