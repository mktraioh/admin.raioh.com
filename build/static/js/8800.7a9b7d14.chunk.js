(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[8800],{84190:(e,t,a)=>{"use strict";a.d(t,{u:()=>d});var l=a(99584),s=a(10876),n=a(37728),i=a(95976),r=a.n(i),o=a(97884);const d=e=>{let{fetchOptions:t,refetch:a=!1,debounceTimeout:i=400,...d}=e;const[c,u]=(0,l.useState)(!1),[m,h]=(0,l.useState)([]),g=(0,l.useMemo)((()=>r()((e=>{h([]),u(!0),t(e).then((e=>{h(e),u(!1)}))}),i)),[]);return(0,o.jsx)(s.default,{showSearch:!0,labelInValue:!0,filterTreeNode:(e,t)=>{var a;return null===(a=t.label)||void 0===a?void 0:a.localeCompare(e)},treeLine:!0,onSearch:e=>g(e),treeData:c?[]:m,treeDefaultExpandAll:!0,onFocus:()=>{m.length&&!a||(u(!0),t().then((e=>{h(e),u(!1)})))},notFoundContent:c?(0,o.jsx)(n.c,{size:"small"}):"no results",...d})}},80560:(e,t,a)=>{"use strict";a.d(t,{c:()=>o});var l=a(8808),s=a(99584),n=a(52640),i=a(29416),r=a(97884);const o=(0,l.GoogleApiWrapper)({apiKey:n.KU,libraries:["places"]})((e=>{var t,a;const[n,o]=(0,s.useState)({lat:38.58799374569842,lng:-98.47949767583457}),[d,c]=(0,s.useState)(e.triangleCoords?e.triangleCoords:[]),[u,m]=(0,s.useState)(!!e.triangleCoords),[h,g]=(0,s.useState)(null);e.setMerge(u);(0,s.useEffect)((()=>{g(!0)}),[]);const p=e.triangleCoords.map((e=>({lat:Number(e.lat||"0"),lng:Number(e.lng||"0")})));for(var v=new e.google.maps.LatLngBounds,x=0;x<p.length;x++)v.extend(p[x]);return(0,r.jsxs)("div",{className:"map-container",style:{height:500,width:"100%"},children:[(0,r.jsx)("button",{className:"map-button",type:"button",onClick:()=>{navigator.geolocation.getCurrentPosition((function(e){o({lat:e.coords.latitude,lng:e.coords.longitude})}))},children:(0,r.jsx)(i.mEX,{})}),(0,r.jsxs)(l.Map,{options:{minZoom:15,maxZoom:15},cursor:"pointer",onClick:(t,a,l)=>{g(!1);const{latLng:s}=l,n=s.lat(),i=s.lng();u?(c([]),e.settriangleCoords([{lat:n,lng:i}]),o({lat:n,lng:i}),m(!1)):e.settriangleCoords((e=>[...e,{lat:n,lng:i}]))},maxZoom:16,minZoom:2,google:e.google,initialCenter:n,center:n,onReady:function(e,t){t.setOptions({draggableCursor:"crosshair",draggingCursor:"grab"})},bounds:h&&v,className:"clickable",children:[null===(t=e.triangleCoords)||void 0===t?void 0:t.map(((t,a)=>(0,r.jsx)(l.Marker,{onClick:t=>(t=>{var a,l;m(!!e.triangleCoords),(null===(a=e.triangleCoords[0])||void 0===a?void 0:a.lat)===(null===(l=t.position)||void 0===l?void 0:l.lat)&&e.triangleCoords.length>1&&(c(e.triangleCoords),e.setLocation(e.triangleCoords),m(!0),g(!0))})(t),position:t,icon:{url:"https://upload.wikimedia.org/wikipedia/commons/9/94/Circle-image.svg",scaledSize:new e.google.maps.Size(10,10)},className:"marker"},a))),null!==d&&void 0!==d&&d.length?(0,r.jsx)(l.Polygon,{path:e.triangleCoords,strokeColor:"black",strokeOpacity:.8,strokeWeight:3,fillColor:"black",fillOpacity:.35},null===d||void 0===d?void 0:d.length):(0,r.jsx)(l.Polyline,{path:e.triangleCoords,strokeColor:"black",strokeOpacity:.8,strokeWeight:3,fillColor:"black",fillOpacity:.35},null===(a=e.triangleCoords)||void 0===a?void 0:a.length)]})]})}))},424:(e,t,a)=>{"use strict";a.d(t,{c:()=>d});var l=a(99584),s=a(79416),n=a(32712),i=a(51840),r=a(48376),o=a(97884);const d=()=>{const e=(0,n.OY)(),{languages:t,defaultLang:a}=(0,n.w1)((e=>e.formLang),n.G);(0,l.useEffect)((()=>{r.c.getAllActive().then((t=>{let{data:a}=t;e((0,i.Up)(a)),e((0,i.uY)(a.find((e=>1===e.default)).locale))}))}),[]);return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(s.cp.Group,{value:a,onChange:t=>{let{target:{value:a}}=t;e((0,i.uY)(a))},className:"float-right",buttonStyle:"solid",children:null===t||void 0===t?void 0:t.map((e=>(0,o.jsx)(s.cp.Button,{value:e.locale,children:e.title},e.id)))})})}},89896:(e,t,a)=>{"use strict";a.d(t,{c:()=>g});var l=a(99584),s=a(8808),n=a(52640);const i=a.p+"static/media/pin.0e41858db80c699cd8a2.png";var r=a(71760),o=a.n(r);async function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.KU,a={latlng:"".concat(null===e||void 0===e?void 0:e.lat,",").concat(null===e||void 0===e?void 0:e.lng),key:t};return o().get("https://maps.googleapis.com/maps/api/geocode/json",{params:a}).then((e=>{var t;let{data:a}=e;return null===(t=a.results[0])||void 0===t?void 0:t.formatted_address})).catch((e=>"not found"))}var c=a(29416),u=a(61072),m=a(65236),h=a(97884);const g=(0,s.GoogleApiWrapper)({apiKey:n.KU})((function(e){const[t,a]=(0,l.useState)(),{t:r}=(0,m.G)(),o=async()=>{await navigator.geolocation.getCurrentPosition((function(e){const t={lat:e.coords.latitude,lng:e.coords.longitude};a(t)}),(function(e){u.m4.warning(r("turn.on.gps"))}))};(0,l.useEffect)((()=>{o()}),[]);const g=[{lat:Number(e.location.lat)||0,lng:Number(e.location.lng)||0}];for(var p=new e.google.maps.LatLngBounds,v=0;v<g.length;v++)p.extend(g[v]);return(0,h.jsxs)("div",{className:"map-container",style:{height:400,width:"100%"},children:[(0,h.jsx)("button",{className:"map-button",type:"button",onClick:()=>{o(),t&&(async t=>{const a={lat:null===t||void 0===t?void 0:t.lat,lng:null===t||void 0===t?void 0:t.lng};e.setLocation(a);const l=await d(a,n.KU);e.setAddress(l)})(t)},children:(0,h.jsx)(c.mEX,{})}),(0,h.jsx)(s.Map,{cursor:"pointer",onClick:async(t,a,l)=>{const{latLng:s}=l,i={lat:s.lat(),lng:s.lng()};e.setLocation(i);const r=await d(i,n.KU);e.setAddress(r)},google:e.google,defaultZoom:12,zoom:10,className:"clickable",initialCenter:e.location,center:e.location,children:(0,h.jsx)(s.Marker,{position:e.location,icon:{url:i,scaledSize:new e.google.maps.Size(32,32)},className:"marker"})})]})}))},71376:(e,t,a)=>{"use strict";a.d(t,{g:()=>d});var l=a(99584),s=a(95976),n=a.n(s),i=a(2664),r=a(37728),o=a(97884);const d=e=>{let{fetchOptions:t,debounceTimeout:a=400,onClear:s,...d}=e;const[c,u]=(0,l.useState)(!1),[m,h]=(0,l.useState)([]),g=(0,l.useMemo)((()=>n()((e=>{h([]),u(!0),t(e).then((e=>{h(e),u(!1)}))}),a)),[t,a]);return(0,o.jsx)(i.default,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:g,onClear:()=>{g(""),s&&s()},notFoundContent:c?(0,o.jsx)(r.c,{size:"small"}):"no results",...d,options:m,onFocus:()=>{g("")}})}},54112:(e,t,a)=>{"use strict";a.d(t,{Q:()=>n});var l=a(83072),s=a.n(l);const n=[{title:"monday",disabled:!1,from:s()("01:00:00","HH:mm:ss"),to:s()("23:00:00","HH:mm:ss")},{title:"tuesday",disabled:!1,from:s()("01:00:00","HH:mm:ss"),to:s()("23:00:00","HH:mm:ss")},{title:"wednesday",disabled:!1,from:s()("01:00:00","HH:mm:ss"),to:s()("23:00:00","HH:mm:ss")},{title:"thursday",disabled:!1,from:s()("01:00:00","HH:mm:ss"),to:s()("23:00:00","HH:mm:ss")},{title:"friday",disabled:!1,from:s()("01:00:00","HH:mm:ss"),to:s()("23:00:00","HH:mm:ss")},{title:"saturday",disabled:!1,from:s()("01:00:00","HH:mm:ss"),to:s()("23:00:00","HH:mm:ss")},{title:"sunday",disabled:!1,from:s()("01:00:00","HH:mm:ss"),to:s()("23:00:00","HH:mm:ss")}]},33424:(e,t,a)=>{"use strict";a.d(t,{c:()=>i});var l=a(71760),s=a.n(l),n=a(52640);async function i(e){let t={address:e,key:arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.KU};return s().get("https://maps.googleapis.com/maps/api/geocode/json",{params:t}).then((e=>{let{data:t}=e;return t.results[0]})).catch((e=>"not found"))}},33131:(e,t,a)=>{"use strict";a.d(t,{c:()=>l});a(52640);function l(e){if(null===e||void 0===e||!e.location)return{lat:47.4143302506288,lng:8.532059477976883};const t=e.location.split(", ");return{lat:Number(null===t||void 0===t?void 0:t[0]),lng:Number(null===t||void 0===t?void 0:t[1])}}},20556:(e,t,a)=>{"use strict";a.d(t,{W:()=>i});var l=a(23424),s=a(84620),n=a.n(s);const i=()=>{const e=(0,l.i6)(),t=(0,l.IT)(),a=n().parse(t.search,{ignoreQueryPrefix:!0});return{values:a,set:(t,l)=>e({search:n().stringify({...a,[t]:l})}),reset:t=>{const l={...a};l[t]&&delete l[t],e({search:n().stringify({...l})})},clear:()=>e({search:n().stringify({})}),merge:t=>e({search:n().stringify({...a,...t})})}}},70708:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>ie,steps:()=>ne});var l=a(99584),s=a(67692),n=a(68496),i=a(32712),r=a(18896),o=a(424),d=a(87744),c=a(65236),u=a(20556),m=a(65732),h=a(66296),g=a(87228),p=a(10876),v=a(98044),x=a(68768),j=a(10260),f=a(46712),y=a(10240),b=a(2664),k=a(71376),w=a(64212),_=a(89896),S=a(17204),C=a(40936),I=a(21984),H=a(84190),q=a(52640),N=a(55309),M=a(33424),F=a(97884);const{SHOW_ALL:L}=p.default,O=e=>{let{logoImage:t,setLogoImage:a,backImage:s,setBackImage:r,form:o,location:d,setLocation:u}=e;const{t:h}=(0,c.G)(),g=m.c.useWatch("categories",o),{defaultLang:p,languages:O}=(0,i.w1)((e=>e.formLang),i.G),[G,Y]=(0,l.useState)(""),{placePredictions:D,getPlacePredictions:z,isPlacePredictionsLoading:T}=(0,N.c)({apiKey:q.KU,libraries:["places","geocode"]});const A=e=>{if(e.children)if(g.some((t=>t.value===e.value))){const t=g.filter((t=>t.value!==e.value)),a=t.filter((t=>!e.children.some((e=>e.value===t.value))));o.setFieldsValue({categories:a})}else o.setFieldsValue({categories:g.concat([{label:e.label,value:e.value},...e.children.map((e=>({label:e.label,value:e.value})))])});else null!==g&&void 0!==g&&g.some((t=>t.value===e.value))?o.setFieldsValue({categories:g.filter((t=>t.value!==e.value))}):o.setFieldsValue({categories:g.concat([e.parent,{label:e.label,value:e.value}])})};return(0,F.jsxs)(x.c,{gutter:12,children:[(0,F.jsx)(j.c,{span:24,children:(0,F.jsx)(n.default,{children:(0,F.jsxs)(x.c,{gutter:12,children:[(0,F.jsx)(j.c,{span:4,children:(0,F.jsx)(m.c.Item,{label:h("logo.image"),children:(0,F.jsx)(C.c,{type:"shops/logo",imageList:t,setImageList:a,form:o,multiple:!1,name:"logo_img"})})}),(0,F.jsx)(j.c,{span:4,children:(0,F.jsx)(m.c.Item,{label:h("background.image"),children:(0,F.jsx)(C.c,{type:"shops/background",imageList:s,setImageList:r,form:o,multiple:!1,name:"background_img"})})}),(0,F.jsx)(j.c,{span:10,children:(0,F.jsx)(m.c.Item,{label:h("status.note"),name:"status_note",children:(0,F.jsx)(w.c,{rows:4})})}),(0,F.jsx)(j.c,{span:4,children:(0,F.jsx)(m.c.Item,{name:"status",label:h("status"),children:(0,F.jsx)(f.default,{disabled:!0})})})]})})}),(0,F.jsx)(j.c,{span:24,children:(0,F.jsx)(n.default,{title:h("general"),children:(0,F.jsxs)(x.c,{gutter:12,children:[(0,F.jsx)(j.c,{span:12,children:(0,F.jsxs)(x.c,{gutter:12,children:[(0,F.jsx)(j.c,{span:24,children:O.map(((e,t)=>(0,F.jsx)(m.c.Item,{label:h("title"),name:"title[".concat(e.locale,"]"),rules:[{required:e.locale===p,message:h("required")},{min:2,message:h("title.required")}],hidden:e.locale!==p,children:(0,F.jsx)(f.default,{})},"title"+t)))}),(0,F.jsx)(j.c,{span:24,children:(0,F.jsx)(m.c.Item,{label:h("phone"),name:"phone",rules:[{required:!0,message:h("required")}],children:(0,F.jsx)(y.c,{min:0,className:"w-100"})})})]})}),(0,F.jsx)(j.c,{span:12,children:O.map(((e,t)=>(0,F.jsx)(m.c.Item,{label:h("description"),name:"description[".concat(e.locale,"]"),rules:[{required:e.locale===p,message:h("required")},{min:3,message:h("required")}],hidden:e.locale!==p,children:(0,F.jsx)(w.c,{rows:4})},"desc"+t)))}),(0,F.jsx)(j.c,{span:12,children:(0,F.jsx)(m.c.Item,{label:h("shop.tags"),name:"tags",rules:[{required:!1,message:h("required")}],children:(0,F.jsx)(k.g,{mode:"multiple",fetchOptions:async function(e){const t={search:e};return I.c.getAllSeller(t).then((e=>{let{data:t}=e;return t.map((e=>{var t;return{label:(null===(t=e.translation)||void 0===t?void 0:t.title)||"no name",value:e.id}}))}))},style:{minWidth:150}})})}),(0,F.jsx)(j.c,{span:8,hidden:!0,children:(0,F.jsx)(m.c.Item,{label:h("seller"),name:"user",rules:[{required:!0,message:h("required")}],children:(0,F.jsx)(f.default,{})})}),(0,F.jsx)(j.c,{span:12,children:(0,F.jsx)(m.c.Item,{label:h("categories"),name:"categories",rules:[{required:!0,message:h("required")}],children:(0,F.jsx)(H.u,{treeCheckable:!0,tagRender:e=>{const{label:t,onClose:a}=e;return(0,F.jsx)(v.c,{onMouseDown:e=>{e.preventDefault(),e.stopPropagation()},onClose:a,style:{marginRight:3},children:t})},showCheckedStrategy:L,treeCheckStrictly:!0,refetch:!0,onSelect:(e,t)=>A(t),onDeselect:(e,t)=>A(t),fetchOptions:async function(e){const t={search:e,type:"shop",active:1,lang:p};return S.c.selectPaginate(t).then((e=>{let{data:t}=e;return t.map((e=>{var t,a,l;return{label:(null===(t=e.translation)||void 0===t?void 0:t.title)||"no name",value:e.id,disabled:0===(null===(a=e.children)||void 0===a?void 0:a.length),children:null===(l=e.children)||void 0===l?void 0:l.map((t=>{var a,l;return{label:null===(a=t.translation)||void 0===a?void 0:a.title,value:t.id,parent:{label:(null===(l=e.translation)||void 0===l?void 0:l.title)||"no name",value:e.id}}}))}}))}))}})})})]})})}),(0,F.jsx)(j.c,{span:8,children:(0,F.jsx)(n.default,{title:h("delivery"),children:(0,F.jsxs)(x.c,{gutter:8,children:[(0,F.jsx)(j.c,{span:12,children:(0,F.jsx)(m.c.Item,{name:"price",label:h("min.price"),rules:[{required:!0,message:h("required")}],children:(0,F.jsx)(y.c,{className:"w-100"})})}),(0,F.jsx)(j.c,{span:12,children:(0,F.jsx)(m.c.Item,{name:"price_per_km",label:h("price.per.km"),rules:[{required:!0,message:h("required")}],children:(0,F.jsx)(y.c,{className:"w-100"})})})]})})}),(0,F.jsx)(j.c,{span:8,children:(0,F.jsx)(n.default,{title:h("delivery.time"),children:(0,F.jsxs)(x.c,{gutter:12,children:[(0,F.jsx)(j.c,{span:12,children:(0,F.jsx)(m.c.Item,{name:"delivery_time_type",label:h("delivery_time_type"),rules:[{required:!0,message:h("required")}],children:(0,F.jsxs)(b.default,{className:"w-100",children:[(0,F.jsx)(b.default.Option,{value:"minute",label:h("minutes")}),(0,F.jsx)(b.default.Option,{value:"hour",label:h("hour")})]})})}),(0,F.jsx)(j.c,{span:12,children:(0,F.jsx)(m.c.Item,{name:"delivery_time_from",label:h("delivery_time_from"),rules:[{required:!0,message:h("required")}],children:(0,F.jsx)(y.c,{className:"w-100"})})}),(0,F.jsx)(j.c,{span:12,children:(0,F.jsx)(m.c.Item,{name:"delivery_time_to",label:h("delivery_time_to"),rules:[{required:!0,message:h("required")}],children:(0,F.jsx)(y.c,{className:"w-100"})})})]})})}),(0,F.jsx)(j.c,{span:8,children:(0,F.jsx)(n.default,{title:h("order.info"),children:(0,F.jsxs)(x.c,{gutter:12,children:[(0,F.jsx)(j.c,{span:12,children:(0,F.jsx)(m.c.Item,{label:h("min.amount"),name:"min_amount",rules:[{required:!0,message:h("required")}],children:(0,F.jsx)(y.c,{min:0,className:"w-100"})})}),(0,F.jsx)(j.c,{span:12,children:(0,F.jsx)(m.c.Item,{label:h("tax"),name:"tax",rules:[{required:!0,message:h("required")}],children:(0,F.jsx)(y.c,{min:0,addonAfter:"%",className:"w-100"})})}),(0,F.jsx)(j.c,{span:12,children:(0,F.jsx)(m.c.Item,{label:h("admin.comission"),name:"percentage",rules:[{required:!0,message:h("required")}],children:(0,F.jsx)(y.c,{min:0,className:"w-100",addonAfter:"%"})})})]})})}),(0,F.jsx)(j.c,{span:24,children:(0,F.jsx)(n.default,{title:h("address"),children:(0,F.jsxs)(x.c,{gutter:12,children:[(0,F.jsx)(j.c,{span:12,children:O.map(((e,t)=>(0,F.jsx)(m.c.Item,{label:h("address"),name:"address[".concat(e.locale,"]"),rules:[{required:e.locale===p,message:h("required")}],hidden:e.locale!==p,children:(0,F.jsx)(b.default,{allowClear:!0,searchValue:G,showSearch:!0,autoClearSearchValue:!0,loading:T,options:null===D||void 0===D?void 0:D.map((e=>({label:e.description,value:e.description}))),onSearch:e=>{Y(e),e.length>0&&z({input:e})},onSelect:async e=>{const t=await(0,M.c)(e);u({lat:null===t||void 0===t?void 0:t.geometry.location.lat,lng:null===t||void 0===t?void 0:t.geometry.location.lng})}})},"address"+t)))}),(0,F.jsx)(j.c,{span:24,children:(0,F.jsx)(_.c,{location:d,setLocation:u,setAddress:e=>o.setFieldsValue({["address[".concat(p,"]")]:e})})})]})})})]})};var G=a(33131);const Y=e=>{var t,a,s,n,o,u,p,v,x;let{next:j}=e;const{t:f}=(0,c.G)(),[y]=m.c.useForm(),b=(0,i.OY)(),{activeMenu:k}=(0,i.w1)((e=>e.menu),i.G),{settings:w}=(0,i.w1)((e=>e.globalSettings),i.G),[_,S]=(0,l.useState)(null!==k&&void 0!==k&&null!==(t=k.data)&&void 0!==t&&t.location?{lat:parseFloat(null===k||void 0===k||null===(a=k.data)||void 0===a||null===(s=a.location)||void 0===s?void 0:s.latitude),lng:parseFloat(null===k||void 0===k||null===(n=k.data)||void 0===n||null===(o=n.location)||void 0===o?void 0:o.longitude)}:(0,G.c)(w)),[C,I]=(0,l.useState)(!1),{myShop:H}=(0,i.w1)((e=>e.myShop),i.G),[q,N]=(0,l.useState)(null!==(u=k.data)&&void 0!==u&&u.logo_img?[null===(p=k.data)||void 0===p?void 0:p.logo_img]:[]),[M,L]=(0,l.useState)(null!==(v=k.data)&&void 0!==v&&v.background_img?[null===(x=k.data)||void 0===x?void 0:x.background_img]:[]);(0,l.useEffect)((()=>()=>{const e=y.getFieldsValue(!0);e.open_time=JSON.stringify(null===e||void 0===e?void 0:e.open_time),e.close_time=JSON.stringify(null===e||void 0===e?void 0:e.close_time),b((0,r.MH)({activeMenu:k,data:{...k.data,...e}}))}),[]);return(0,F.jsx)(F.Fragment,{children:(0,F.jsxs)(m.c,{form:y,name:"basic",layout:"vertical",onFinish:e=>{var t,a;I(!0);const l={...e,"images[0]":null===(t=q[0])||void 0===t?void 0:t.name,"images[1]":null===(a=M[0])||void 0===a?void 0:a.name,delivery_time_type:e.delivery_time_type,delivery_time_to:e.delivery_time_to,delivery_time_from:e.delivery_time_from,categories:e.categories.map((e=>e.value)),user_id:e.user.value,visibility:Number(e.visibility),"location[latitude]":_.lat,"location[longitude]":_.lng,user:void 0,delivery_time:0,type:"shop"===H.type?"shop":"restaurant",tags:e.tags.map((e=>e.value))};!function(e,t){d.c.update(t).then((()=>{b((0,r.MH)({activeMenu:k,data:e})),j()})).finally((()=>I(!1)))}(e,l)},initialValues:{visibility:!0,status:"new",...k.data},children:[(0,F.jsx)(O,{logoImage:q,setLogoImage:N,backImage:M,setBackImage:L,form:y,location:_,setLocation:S}),(0,F.jsx)(h.c,{children:(0,F.jsx)(g.c,{type:"primary",htmlType:"submit",loading:C,children:f("next")})})]})})};var D=a(73568),z=a(26012),T=a(77180),A=a(83072),B=a.n(A),P=a(33012);const V={getById:e=>P.c.get("dashboard/seller/shop-working-days/".concat(e)),create:e=>P.c.post("dashboard/seller/shop-working-day",e,{}),update:(e,t)=>P.c.put("dashboard/seller/shop-working-days/".concat(e),t,{}),delete:e=>P.c.delete("dashboard/seller/shop-working-days",{params:e})},E={getById:e=>P.c.get("dashboard/seller/shop-closed-dates/".concat(e)),create:e=>P.c.post("dashboard/seller/shop-closed-dates",e,{}),update:(e,t)=>P.c.put("dashboard/seller/shop-closed-dates/".concat(e),t,{}),delete:e=>P.c.delete("dashboard/seller/shop-closed-dates",{params:e})};var K=a(23424),U=a(54112),W=a(85752),Z=a(4496),Q=a(69116),R=a(16672),J=a(5008);const X=e=>{let{next:t,prev:a}=e;const[s]=m.c.useForm(),{t:o}=(0,c.G)(),[d,u]=(0,l.useState)([]),[p,f]=(0,l.useState)(new Array(7).fill(!1)),[y,b]=(0,l.useState)(!1),[k,w]=(0,l.useState)(!1),{myShop:_}=(0,i.w1)((e=>e.myShop),i.G),S=(0,K.i6)(),C=(0,i.OY)(),I=[{from:new Date(1900,4,18),to:new Date}],{activeMenu:H}=(0,i.w1)((e=>e.menu),i.G),[q,N]=(0,l.useState)(!0);(0,l.useEffect)((()=>{s.setFieldsValue({working_days:U.Q}),_.uuid&&(w(!0),E.getById(_.uuid).then((e=>{u(e.data.closed_dates.filter((e=>e.day>B()(new Date).format("YYYY-MM-DD"))).map((e=>new Date(e.day))))})),V.getById(_.uuid).then((e=>{f(0!==e.data.dates.length?e.data.dates.map((e=>e.disabled)):[]),0!==e.data.dates.length&&s.setFieldsValue({working_days:e.data.dates.map((e=>({title:e.day,from:B()(e.from,"HH:mm:ss"),to:B()(e.to,"HH:mm:ss"),disabled:Boolean(e.disabled)})))})})).finally((()=>w(!1))))}),[]);const M=d&&d.length>0?(0,F.jsxs)(x.c,{children:[(0,F.jsx)(v.c,{style:{fontSize:14,padding:"4px 10px",width:"100%",marginTop:"10px"},children:o("Your.existing.vacations")}),(0,F.jsxs)(j.c,{span:24,className:"mt-2",children:[d.slice(0,q?1:d.length).map(((e,t)=>(0,F.jsxs)(h.c,{className:"d-flex justify-content-between",style:{borderBottom:"1px solid #4D5B75"},children:[(0,F.jsx)(j.c,{span:24,style:{fontSize:14,marginTop:"8px"},children:B()(e).format("YYYY-MM-DD")}),(0,F.jsx)(j.c,{span:24,children:(0,F.jsx)(v.c,{color:"red",className:"cursor-pointer mt-3 mb-2",style:{fontSize:14},onClick:()=>{return t=e,u(d.filter((e=>e!==t)));var t},children:o("remove")})})]},t))),(0,F.jsx)(g.c,{className:"mt-3 w-100",onClick:()=>{N(!q)},children:q?(0,F.jsx)(J._F4,{}):(0,F.jsx)(J.__$,{})})]})]}):(0,F.jsx)(v.c,{style:{fontSize:14,padding:"4px 10px",width:"100%"},children:"Please pick one or more days."}),L=(e,t)=>{const a=[];for(let l=e;l<t;l++)a.push(l);return a},O=()=>({disabledHours:()=>L(0,1),disabledMinutes:()=>L(0,0),disabledSeconds:()=>L(0,60)});return(0,F.jsx)(F.Fragment,{children:k?(0,F.jsx)(T.c,{}):(0,F.jsx)(m.c,{form:s,layout:"vertical",onFinish:e=>{b(!0);const t={dates:d?d.map((e=>B()(e).format("YYYY-MM-DD"))):void 0},a={dates:e.working_days.map((e=>({day:e.title,from:B()(e.from?e.from:"00").format("HH-mm"),to:B()(e.to?e.to:"00").format("HH-mm"),disabled:e.disabled})))},l="my-shop";E.update(_.uuid,t).then((()=>{C((0,r.MF)({...H,nextUrl:l})),S("/".concat(l)),C((0,R.M)())})).finally((()=>b(!1))),0!==e.working_days.length&&V.update(_.uuid,a).then((()=>{C((0,r.MF)({...H,nextUrl:l})),S("/".concat(l)),C((0,R.M)())})).finally((()=>b(!1)))},children:(0,F.jsxs)(x.c,{children:[(0,F.jsx)(j.c,{span:13,children:(0,F.jsx)(n.default,{title:o("restaurant.working.days"),children:(0,F.jsx)(x.c,{gutter:8,children:(0,F.jsx)(j.c,{span:24,children:(0,F.jsx)(m.c.List,{name:"working_days",children:e=>(0,F.jsx)("div",{children:e.map(((e,t)=>(0,F.jsxs)(x.c,{gutter:12,align:"center",children:[(0,F.jsx)(j.c,{span:7,children:(0,F.jsx)(m.c.Item,{name:[t,"day"],children:(0,F.jsx)("span",{children:o(U.Q[t].title)})})}),p[e.key]?(0,F.jsx)(j.c,{span:13,className:"mt-2",children:(0,F.jsx)("span",{children:o("shop.closed")})}):(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(j.c,{span:7,children:(0,F.jsx)(m.c.Item,{rules:[{required:!1===p[e.key]}],name:[t,"from"],children:(0,F.jsx)(D.default,{disabledTime:O,picker:"time",placeholder:o("start.time")})})}),(0,F.jsx)(j.c,{span:6,children:(0,F.jsx)(m.c.Item,{rules:[{required:!1===p[e.key]}],name:[t,"to"],children:(0,F.jsx)(D.default,{disabledTime:O,picker:"time",placeholder:o("end.time")})})})]}),(0,F.jsx)(j.c,{span:4,children:(0,F.jsx)(m.c.Item,{name:[t,"disabled"],valuePropName:"checked",children:(0,F.jsx)(z.c,{checkedChildren:(0,F.jsx)(Z.c,{}),unCheckedChildren:(0,F.jsx)(Q.c,{}),checked:p[e.key],onChange:()=>(e=>{const t=[...p];t[e]=!p[e],f(t)})(e.key)})})})]},e.key)))})})})})})}),(0,F.jsx)(j.c,{span:11,children:(0,F.jsxs)(n.default,{title:o("restaurant.closed.days"),children:[(0,F.jsx)("p",{children:"If you can't answer the buyer's questions in time and want to share this information with your buyers, you can add the dates here."}),(0,F.jsx)(m.c.Item,{rules:[{required:!1,message:o("required")}],children:(0,F.jsx)(W.Yi,{className:"datepicker",mode:"multiple",disabled:I,min:1,selected:d,onSelect:u,footer:M,showOutsideDays:!0})})]})}),(0,F.jsx)(j.c,{span:24,children:(0,F.jsxs)(h.c,{children:[(0,F.jsx)(g.c,{type:"primary",htmlType:"submit",loading:y,children:o("next")}),(0,F.jsx)(g.c,{htmlType:"submit",onClick:()=>a(),children:o("prev")})]})})]})})})};var $=a(80560),ee=a(94392);const te={getById:e=>P.c.get("rest/shop/delivery-zone/".concat(e)),create:e=>P.c.post("dashboard/seller/delivery-zones",e,{})};var ae=a(61072);const le=e=>{let{next:t,prev:a}=e;const{t:s}=(0,c.G)(),[r]=m.c.useForm(),[o,d]=(0,l.useState)([]),[u,p]=(0,l.useState)(!1),[v,f]=(0,l.useState)(!1),{activeMenu:y}=(0,i.w1)((e=>e.menu),i.G),{myShop:b}=(0,i.w1)((e=>e.myShop),i.G),[k,w]=(0,l.useState)(null);return(0,l.useEffect)((()=>{y.data&&(f(!0),te.getById(null===b||void 0===b?void 0:b.id).then((e=>{var t;return d(null===(t=e.data.address)||void 0===t?void 0:t.map((e=>({lat:e[0],lng:e[1]}))))})).finally((()=>f(!1))))}),[]),(0,F.jsx)(m.c,{form:r,name:"map",layout:"vertical",onFinish:e=>{if(o.length<3)return void ae.m4.warning(s("place.selected.map"));if(!k)return void ae.m4.warning(s("place.selected.map"));p(!0);const a={shop_id:y.data.id,address:o.map((e=>({0:e.lat,1:e.lng})))};te.create(a).then((()=>t())).finally((()=>p(!1)))},initialValues:{},children:v?(0,F.jsx)(T.c,{}):(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(x.c,{children:(0,F.jsx)(j.c,{span:24,children:(0,F.jsx)(n.default,{title:s("delivery.zone"),children:(0,F.jsxs)(x.c,{gutter:12,children:[(0,F.jsx)(j.c,{span:24,className:"mb-3",children:(0,F.jsxs)(h.c,{children:[(0,F.jsx)(J.WAg,{size:25}),(0,F.jsx)("p",{children:"Click this icon to start pin points in the map and connect them to draw a zone . Minimum 3 points required"})]})}),(0,F.jsx)(j.c,{span:12,children:(0,F.jsx)("img",{src:ee,alt:"map gif",style:{object:"contain"}})}),(0,F.jsx)(j.c,{span:24,children:(0,F.jsx)($.c,{triangleCoords:o,settriangleCoords:d,setMerge:w})})]})})})}),(0,F.jsxs)(h.c,{children:[(0,F.jsx)(g.c,{type:"primary",htmlType:"submit",loading:u,children:s("next")}),(0,F.jsx)(g.c,{htmlType:"submit",onClick:()=>a(),children:s("prev")})]})]})})},{Step:se}=s.default,ne=[{title:"shop",content:"First-content"},{title:"map",content:"Second-content"},{title:"delivery",content:"Third-content"}];function ie(){var e;const{t:t}=(0,c.G)(),a=(0,i.OY)(),m=(0,u.W)(),h=Number((null===(e=m.values)||void 0===e?void 0:e.step)||0),{activeMenu:g}=(0,i.w1)((e=>e.menu),i.G),{languages:p}=(0,i.w1)((e=>e.formLang),i.G),{myShop:v}=(0,i.w1)((e=>e.myShop),i.G),[x,j]=(0,l.useState)(!1),f=e=>({items:e,uid:e,url:e,name:e});function y(e){if(null===e||void 0===e||!e.translations)return{};const{translations:t}=e,a=p.map((e=>{var a,l,s;return{["title[".concat(e.locale,"]")]:null===(a=t.find((t=>t.locale===e.locale)))||void 0===a?void 0:a.title,["description[".concat(e.locale,"]")]:null===(l=t.find((t=>t.locale===e.locale)))||void 0===l?void 0:l.description,["address[".concat(e.locale,"]")]:null===(s=t.find((t=>t.locale===e.locale)))||void 0===s?void 0:s.address}}));return Object.assign({},...a)}(0,l.useEffect)((()=>{g.refetch&&(j(!0),d.c.get().then((e=>{var t,l,s,n,i,o,d;const c={...e.data,...y(e.data),logo_img:f(e.data.logo_img),background_img:f(e.data.background_img),user:{label:e.data.seller.firstname+" "+(e.data.seller.lastname||""),value:e.data.seller.id},delivery_time_from:null===(t=e.data)||void 0===t?void 0:t.delivery_time.from,delivery_time_to:null===(l=e.data)||void 0===l?void 0:l.delivery_time.to,delivery_time_type:null===(s=e.data)||void 0===s?void 0:s.delivery_time.type,categories:null===(n=e.data)||void 0===n||null===(i=n.categories)||void 0===i?void 0:i.map((e=>{var t;return{label:null===e||void 0===e||null===(t=e.translation)||void 0===t?void 0:t.title,value:e.id,key:e.id}})),tags:null===(o=e.data)||void 0===o||null===(d=o.tags)||void 0===d?void 0:d.map((e=>{var t;return{label:null===e||void 0===e||null===(t=e.translation)||void 0===t?void 0:t.title,value:e.id,key:e.id}}))};a((0,r.MH)({activeMenu:g,data:c}))})).finally((()=>{j(!1),a((0,r.CO)(g))})))}),[g.refetch]);const b=()=>{const e=h+1;m.set("step",e)},k=()=>{const e=h-1;m.set("step",e)};return(0,F.jsxs)(n.default,{title:t("shop.edit"),extra:(0,F.jsx)(o.c,{}),children:[(0,F.jsx)(s.default,{current:h,onChange:e=>{a((0,r.MH)({activeMenu:g,data:{...g.data,step:e}})),m.set("step",e)},children:ne.map((e=>(0,F.jsx)(se,{title:t(e.title)},e.title)))}),x?(0,F.jsx)(T.c,{}):(0,F.jsxs)("div",{className:"steps-content",children:["First-content"===ne[h].content&&(0,F.jsx)(Y,{next:b,loading:x}),"Second-content"===ne[h].content&&(0,F.jsx)(le,{prev:k,next:b}),"Third-content"===ne[h].content&&(0,F.jsx)(X,{prev:k})]})]})}},94392:(e,t,a)=>{"use strict";e.exports=a.p+"static/media/map.f2e0b3013d676ba09c88.gif"},16204:()=>{}}]);