"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[7628],{97628:(e,t,l)=>{l.r(t),l.d(t,{default:()=>g});var a=l(99584),i=l(23424),n=l(61072),c=l(65732),s=l(68496),o=l(37728),u=l(32712),d=l(18896),r=l(65344),v=l(88816),h=l(65236),p=l(424),f=l(56384),m=l(18736),b=l(97884);const g=()=>{const{t:e}=(0,h.G)(),{activeMenu:t}=(0,u.w1)((e=>e.menu),u.G),l=(0,u.OY)(),[g]=c.c.useForm(),x=(0,i.i6)(),{id:j}=(0,i.W4)(),[k,_]=(0,a.useState)(!1),{languages:w}=(0,u.w1)((e=>e.formLang),u.G);function y(e){if(!e)return{};const{translations:t}=e,l=w.map((e=>{var l,a,i;return{["title[".concat(e.locale,"]")]:null===(l=t.find((t=>t.locale===e.locale)))||void 0===l?void 0:l.title,["description[".concat(e.locale,"]")]:null===(a=t.find((t=>t.locale===e.locale)))||void 0===a?void 0:a.description,["button_text[".concat(e.locale,"]")]:null===(i=t.find((t=>t.locale===e.locale)))||void 0===i?void 0:i.button_text}}));return Object.assign({},...l)}return(0,a.useEffect)((()=>{var e;null!==t&&void 0!==t&&t.refetch&&(e=j,_(!0),v.c.getById(e).then((e=>{var a;let i=e.data;const n={...i,img:(c=i.galleries,c.map((e=>({uid:e.id,name:e.path,url:e.path})))),shops:null===i||void 0===i||null===(a=i.shops)||void 0===a?void 0:a.map((e=>{var t;return{label:null===(t=e.translation)||void 0===t?void 0:t.title,value:e.id}})),...y(i)};var c;g.setFieldsValue(n),l((0,d.MH)({activeMenu:t,data:n}))})).finally((()=>{l((0,d.CO)(t)),_(!1)})))}),[null===t||void 0===t?void 0:t.refetch]),(0,b.jsx)(s.default,{title:e("edit.banner"),className:"h-100",extra:(0,b.jsx)(p.c,{}),children:k?(0,b.jsx)("div",{className:"d-flex justify-content-center align-items-center",children:(0,b.jsx)(o.c,{size:"large",className:"py-5"})}):(0,b.jsx)(m.c,{form:g,handleSubmit:(a,i)=>{var c;const s="banners",o={status:"published"},h={url:a.url,shops:null===a||void 0===a||null===(c=a.shops)||void 0===c?void 0:c.map((e=>e.value)),images:null===i||void 0===i?void 0:i.map((e=>e.name)),clickable:a.clickable,title:(0,f.c)(w,a,"title"),description:(0,f.c)(w,a,"description"),button_text:(0,f.c)(w,a,"button_text")};return v.c.update(j,h).then((()=>{n.m4.success(e("successfully.updated")),(0,u.wN)((()=>{l((0,d.MF)({...t,nextUrl:s})),l((0,r.S)(o))})),x("/".concat(s))}))}})})}}}]);