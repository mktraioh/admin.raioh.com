"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[9648],{424:(e,t,l)=>{l.d(t,{c:()=>d});var n=l(99584),a=l(79416),o=l(32712),i=l(51840),s=l(48376),c=l(97884);const d=()=>{const e=(0,o.OY)(),{languages:t,defaultLang:l}=(0,o.w1)((e=>e.formLang),o.G);(0,n.useEffect)((()=>{s.c.getAllActive().then((t=>{let{data:l}=t;e((0,i.Up)(l)),e((0,i.uY)(l.find((e=>1===e.default)).locale))}))}),[]);return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(a.cp.Group,{value:l,onChange:t=>{let{target:{value:l}}=t;e((0,i.uY)(l))},className:"float-right",buttonStyle:"solid",children:null===t||void 0===t?void 0:t.map((e=>(0,c.jsx)(a.cp.Button,{value:e.locale,children:e.title},e.id)))})})}},89896:(e,t,l)=>{l.d(t,{c:()=>v});var n=l(99584),a=l(8808),o=l(52640);const i=l.p+"static/media/pin.0e41858db80c699cd8a2.png";var s=l(71760),c=l.n(s);async function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.KU,l={latlng:"".concat(null===e||void 0===e?void 0:e.lat,",").concat(null===e||void 0===e?void 0:e.lng),key:t};return c().get("https://maps.googleapis.com/maps/api/geocode/json",{params:l}).then((e=>{var t;let{data:l}=e;return null===(t=l.results[0])||void 0===t?void 0:t.formatted_address})).catch((e=>"not found"))}var r=l(29416),u=l(61072),g=l(65236),m=l(97884);const v=(0,a.GoogleApiWrapper)({apiKey:o.KU})((function(e){const[t,l]=(0,n.useState)(),{t:s}=(0,g.G)(),c=async()=>{await navigator.geolocation.getCurrentPosition((function(e){const t={lat:e.coords.latitude,lng:e.coords.longitude};l(t)}),(function(e){u.m4.warning(s("turn.on.gps"))}))};(0,n.useEffect)((()=>{c()}),[]);const v=[{lat:Number(e.location.lat)||0,lng:Number(e.location.lng)||0}];for(var f=new e.google.maps.LatLngBounds,h=0;h<v.length;h++)f.extend(v[h]);return(0,m.jsxs)("div",{className:"map-container",style:{height:400,width:"100%"},children:[(0,m.jsx)("button",{className:"map-button",type:"button",onClick:()=>{c(),t&&(async t=>{const l={lat:null===t||void 0===t?void 0:t.lat,lng:null===t||void 0===t?void 0:t.lng};e.setLocation(l);const n=await d(l,o.KU);e.setAddress(n)})(t)},children:(0,m.jsx)(r.mEX,{})}),(0,m.jsx)(a.Map,{cursor:"pointer",onClick:async(t,l,n)=>{const{latLng:a}=n,i={lat:a.lat(),lng:a.lng()};e.setLocation(i);const s=await d(i,o.KU);e.setAddress(s)},google:e.google,defaultZoom:12,zoom:10,className:"clickable",initialCenter:e.location,center:e.location,children:(0,m.jsx)(a.Marker,{position:e.location,icon:{url:i,scaledSize:new e.google.maps.Size(32,32)},className:"marker"})})]})}))},33131:(e,t,l)=>{l.d(t,{c:()=>n});l(52640);function n(e){if(null===e||void 0===e||!e.location)return{lat:47.4143302506288,lng:8.532059477976883};const t=e.location.split(", ");return{lat:Number(null===t||void 0===t?void 0:t[0]),lng:Number(null===t||void 0===t?void 0:t[1])}}},56384:(e,t,l)=>{function n(e,t){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"title";const n=e.map((e=>({[e.locale]:""===t["".concat(l,"[").concat(e.locale,"]")]?void 0:t["".concat(l,"[").concat(e.locale,"]")]})));return Object.assign({},...n)}l.d(t,{c:()=>n})},98376:(e,t,l)=>{l.r(t),l.d(t,{default:()=>p});var n=l(99584),a=l(23424),o=l(61072),i=l(65732),s=l(68496),c=l(32712),d=l(18896),r=l(65236),u=l(424),g=l(56384),m=l(10272),v=l(5676),f=l(52020),h=l(97884);const p=()=>{const{t:e}=(0,r.G)(),{activeMenu:t}=(0,c.w1)((e=>e.menu),c.G),l=(0,c.OY)(),[p]=i.c.useForm(),b=(0,a.i6)(),{id:x}=(0,a.W4)(),[j,y]=(0,n.useState)(!1),{languages:N}=(0,c.w1)((e=>e.formLang),c.G);function w(e){if(!e)return{};const{translations:t}=e,l=N.map((e=>{var l;return{["title[".concat(e.locale,"]")]:null===(l=t.find((t=>t.locale===e.locale)))||void 0===l?void 0:l.title}}));return Object.assign({},...l)}(0,n.useEffect)((()=>()=>{const e=p.getFieldsValue(!0);e.open_time=JSON.stringify(null===e||void 0===e?void 0:e.open_time),e.close_time=JSON.stringify(null===e||void 0===e?void 0:e.close_time),l((0,d.MH)({activeMenu:t,data:e}))}),[]);return(0,n.useEffect)((()=>{t.refetch&&(e=>{y(!0),m.c.getById(e).then((e=>{var n;let a=e.data;const o={...a,mapCoordinates:{lat:Number(null===a||void 0===a?void 0:a.location.latitude),lng:Number(null===a||void 0===a?void 0:a.location.longitude)},...w(a),address:null===(n=a.address)||void 0===n?void 0:n.address};l((0,d.MH)({activeMenu:t,data:o})),p.setFieldsValue({...o})})).finally((()=>{l((0,d.CO)(t)),y(!1)}))})(x)}),[t.refetch]),(0,h.jsx)(s.default,{loading:j,title:e("edit.branch"),className:"h-100",extra:(0,h.jsx)(u.c,{}),children:(0,h.jsx)(f.c,{form:p,handleSubmit:n=>{const a={title:(0,g.c)(N,n,"title"),address:{address:n.address,office:null,house:null,floor:null},location:{longitude:n.location.lng,latitude:n.location.lat}},i="seller/branch";return m.c.update(x,a).then((()=>{o.m4.success(e("successfully.updated")),(0,c.wN)((()=>{l((0,d.MF)({...t,nextUrl:i})),l((0,v.y)({}))})),b("/".concat(i))}))}})})}},52020:(e,t,l)=>{l.d(t,{c:()=>h});var n=l(99584),a=l(65732),o=l(68768),i=l(10260),s=l(46712),c=l(87228),d=l(89896),r=l(65236),u=l(32712),g=l(33131),m=l(34560),v=l(52640),f=l(97884);function h(e){var t,l;let{form:h,handleSubmit:p}=e;const{t:b}=(0,r.G)(),{activeMenu:x}=(0,u.w1)((e=>e.menu),u.G),{languages:j,defaultLang:y}=(0,u.w1)((e=>e.formLang),u.G),{settings:N}=(0,u.w1)((e=>e.globalSettings),u.G),{google_map_key:w}=(0,u.w1)((e=>e.globalSettings.settings),u.G),{ref:S}=(0,m.usePlacesWidget)({apiKey:w||v.KU,onPlaceSelected:e=>{const t={lat:null===e||void 0===e?void 0:e.geometry.location.lat(),lng:null===e||void 0===e?void 0:e.geometry.location.lng()};C(t),h.setFieldsValue({["address[".concat(y,"]")]:null===e||void 0===e?void 0:e.formatted_address})}}),[G,k]=(0,n.useState)(!1),[L,C]=(0,n.useState)(null!==(t=null===x||void 0===x||null===(l=x.data)||void 0===l?void 0:l.mapCoordinates)&&void 0!==t?t:(0,g.c)(N));return(0,f.jsxs)(a.c,{name:"branch-form",layout:"vertical",onFinish:e=>{k(!0);const t={...e,location:L};p(t).finally((()=>k(!1)))},form:h,initialValues:{...x.data},className:"d-flex flex-column h-100",children:[(0,f.jsxs)(o.c,{gutter:12,children:[(0,f.jsx)(i.c,{span:12,children:j.map(((e,t)=>(0,f.jsx)(a.c.Item,{label:b("title"),name:"title[".concat(e.locale,"]"),rules:[{required:e.locale===y,message:b("required")}],hidden:e.locale!==y,children:(0,f.jsx)(s.default,{})},"title"+t)))}),(0,f.jsx)(i.c,{span:12,children:(0,f.jsx)(a.c.Item,{label:b("address"),name:"address",rules:[{required:!0,message:b("required")}],children:(0,f.jsx)("input",{className:"address-input",ref:S,placeholder:""})})}),(0,f.jsx)(i.c,{span:24,children:(0,f.jsx)(d.c,{location:L,setLocation:C,setAddress:e=>h.setFieldsValue({address:e})})})]}),(0,f.jsx)("div",{className:"flex-grow-1 d-flex flex-column justify-content-end",children:(0,f.jsx)("div",{className:"pb-5",children:(0,f.jsx)(c.c,{type:"primary",htmlType:"submit",loading:G,children:b("submit")})})})]})}}}]);