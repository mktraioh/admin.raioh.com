"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[4716],{71376:(e,t,s)=>{s.d(t,{g:()=>o});var l=s(99584),a=s(95976),i=s.n(a),n=s(2664),u=s(37728),c=s(97884);const o=e=>{let{fetchOptions:t,debounceTimeout:s=400,onClear:a,...o}=e;const[r,d]=(0,l.useState)(!1),[m,h]=(0,l.useState)([]),p=(0,l.useMemo)((()=>i()((e=>{h([]),d(!0),t(e).then((e=>{h(e),d(!1)}))}),s)),[t,s]);return(0,c.jsx)(n.default,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:p,onClear:()=>{p(""),a&&a()},notFoundContent:r?(0,c.jsx)(u.c,{size:"small"}):"no results",...o,options:m,onFocus:()=>{p("")}})}},24716:(e,t,s)=>{s.r(t),s.d(t,{default:()=>v});var l=s(99584),a=s(23424),i=s(61072),n=s(65732),u=s(68496),c=s(32712),o=s(18896),r=s(65236),d=s(99280),m=s(36008),h=s(77180),p=s(55144),f=s(97884);const v=()=>{const{t:e}=(0,r.G)(),{activeMenu:t}=(0,c.w1)((e=>e.menu),c.G),s=(0,c.OY)(),[v]=n.c.useForm(),x=(0,a.i6)(),{id:g}=(0,a.W4)(),{myShop:b}=(0,c.w1)((e=>e.myShop),c.G),[j,y]=(0,l.useState)(!1);(0,l.useEffect)((()=>()=>{const e=v.getFieldsValue(!0);s((0,o.MH)({activeMenu:t,data:e}))}),[]);return(0,l.useEffect)((()=>{var e;t.refetch&&(e=g,y(!0),d.c.getById(e).then((e=>{var l,a,i;let{data:n}=e;const u={...n,image:(c=null===n||void 0===n?void 0:n.file_urls,c.map((e=>({name:e,url:e})))),products:{label:null===n||void 0===n||null===(l=n.product)||void 0===l||null===(a=l.translation)||void 0===a?void 0:a.title,value:null===n||void 0===n||null===(i=n.product)||void 0===i?void 0:i.id}};var c;s((0,o.MH)({activeMenu:t,data:u})),v.setFieldsValue({...u})})).finally((()=>{y(!1),s((0,o.CO)(t))})))}),[t.refetch]),(0,f.jsx)(u.default,{title:e("edit.story"),className:"h-100",children:j?(0,f.jsx)(h.c,{}):(0,f.jsx)(p.c,{form:v,handleSubmit:(l,a)=>{const n={...Object.assign({},...a.map(((e,t)=>({["file_urls[".concat(t,"]")]:e.name})))),product_id:l.products.value},u="seller/stories";return d.c.update(g,n).then((()=>{const l={shop_id:b.id};i.m4.success(e("successfully.updated")),(0,c.wN)((()=>{s((0,o.MF)({...t,nextUrl:u})),s((0,m.M7)(l))})),x("/".concat(u))}))}})})}},55144:(e,t,s)=>{s.d(t,{c:()=>p});var l=s(99584),a=s(65732),i=s(68768),n=s(10260),u=s(87228),c=s(71376),o=s(65236),r=s(32712),d=s(31e3),m=s(40936),h=s(97884);function p(e){var t,s;let{form:p,handleSubmit:f}=e;const{t:v}=(0,o.G)(),{activeMenu:x}=(0,r.w1)((e=>e.menu),r.G),{myShop:g}=(0,r.w1)((e=>e.myShop),r.G),[b,j]=(0,l.useState)(null!==(t=null===(s=x.data)||void 0===s?void 0:s.image)&&void 0!==t?t:[]),[y,S]=(0,l.useState)(!1);return(0,h.jsxs)(a.c,{name:"story-form",layout:"vertical",onFinish:e=>{S(!0),f(e,b).finally((()=>S(!1)))},form:p,initialValues:{active:!0,...x.data},className:"d-flex flex-column h-100",children:[(0,h.jsxs)(i.c,{gutter:12,children:[(0,h.jsx)(n.c,{span:24,children:(0,h.jsx)(a.c.Item,{label:v("image"),name:"images",rules:[{required:0===b.length,message:v("required")}],children:(0,h.jsx)(m.c,{type:"categories",imageList:b,setImageList:j,form:p,multiple:!1})})}),(0,h.jsx)(n.c,{span:24,children:(0,h.jsx)(a.c.Item,{label:v("products"),name:"products",rules:[{required:!0,message:v("required")}],children:(0,h.jsx)(c.g,{fetchOptions:function(e){const t={search:e,shop_id:g.id,status:"published",active:1,rest:1};return d.c.getAll(t).then((e=>e.data.map((e=>({label:e.translation.title,value:e.id,key:e.id})))))},debounceTimeout:200})})})]}),(0,h.jsx)("div",{className:"flex-grow-1 d-flex flex-column justify-content-end",children:(0,h.jsx)("div",{className:"pb-5",children:(0,h.jsx)(u.c,{type:"primary",htmlType:"submit",loading:y,children:v("submit")})})})]})}}}]);