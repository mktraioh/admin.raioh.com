"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[4764],{424:(e,t,a)=>{a.d(t,{c:()=>d});var l=a(99584),n=a(79416),i=a(32712),r=a(51840),s=a(48376),o=a(97884);const d=()=>{const e=(0,i.OY)(),{languages:t,defaultLang:a}=(0,i.w1)((e=>e.formLang),i.G);(0,l.useEffect)((()=>{s.c.getAllActive().then((t=>{let{data:a}=t;e((0,r.Up)(a)),e((0,r.uY)(a.find((e=>1===e.default)).locale))}))}),[]);return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(n.cp.Group,{value:a,onChange:t=>{let{target:{value:a}}=t;e((0,r.uY)(a))},className:"float-right",buttonStyle:"solid",children:null===t||void 0===t?void 0:t.map((e=>(0,o.jsx)(n.cp.Button,{value:e.locale,children:e.title},e.id)))})})}},6428:(e,t,a)=>{a.d(t,{u:()=>d});var l=a(99584),n=a(95976),i=a.n(n),r=a(2664),s=a(37728),o=a(97884);const d=e=>{let{fetchOptions:t,debounceTimeout:a=400,refetch:n=!1,...d}=e;const[c,u]=(0,l.useState)(!1),[m,v]=(0,l.useState)([]),p=(0,l.useMemo)((()=>i()((e=>{v([]),u(!0),t(e).then((e=>{v(e),u(!1)}))}),a)),[t,a]);return(0,o.jsx)(r.default,{showSearch:!0,allowClear:!0,labelInValue:!0,onClear:()=>p(""),filterOption:!1,onSearch:p,notFoundContent:c?(0,o.jsx)(s.c,{size:"small"}):"no results",...d,options:m,onFocus:()=>{p("")}})}},24764:(e,t,a)=>{a.r(t),a.d(t,{default:()=>x});var l=a(99584),n=a(65732),i=a(68496),r=a(37728),s=a(61072),o=a(23424),d=a(424),c=a(32712),u=a(18896),m=a(75808),v=a(52640),p=a(65236),h=a(25124),g=a(84808),j=a(74132),f=a(97884);const x=()=>{const{t:e}=(0,p.G)(),t=(0,o.i6)(),a=(0,c.OY)(),[x,y]=(0,l.useState)(null),{activeMenu:b}=(0,c.w1)((e=>e.menu),c.G),{state:w}=(0,o.IT)(),[I,k]=(0,l.useState)(!1),[P]=n.c.useForm(),[S,_]=(0,l.useState)(null),{uuid:E}=(0,o.W4)(),{params:F}=(0,c.w1)((e=>e.category),c.G),{languages:G}=(0,c.w1)((e=>e.formLang),c.G),M={...F,type:null!==w&&void 0!==w&&w.parentId?"sub_main":"main",parent_id:null===w||void 0===w?void 0:w.parentId};(0,l.useEffect)((()=>()=>{const e=P.getFieldsValue(!0);(0,c.wN)((()=>{a((0,u.MH)({activeMenu:b,data:e})),a((0,h.kd)(M))}))}),[]);function q(e){if(!e)return{};const{translations:t}=e,a=G.map((e=>{var a,l;return{["title[".concat(e.locale,"]")]:null===(a=t.find((t=>t.locale===e.locale)))||void 0===a?void 0:a.title,["description[".concat(e.locale,"]")]:null===(l=t.find((t=>t.locale===e.locale)))||void 0===l?void 0:l.description}}));return Object.assign({},...a)}return(0,l.useEffect)((()=>{var e;e=E,k(!0),m.c.getById(e).then((e=>{var t,l,n;let i=e.data;const r={...i,...q(i),image:[(s=i.img,{name:s,url:v.cd+s})],keywords:null===i||void 0===i||null===(t=i.keywords)||void 0===t?void 0:t.split(","),parent_id:{label:null===(l=i.parent)||void 0===l||null===(n=l.translation)||void 0===n?void 0:n.title,value:i.parent_id,key:i.parent_id}};var s;y(i.id),P.setFieldsValue(r),a((0,u.MH)({activeMenu:b,data:r}))})).finally((()=>{k(!1),a((0,u.CO)(b))}))}),[b.refetch,E,null===w||void 0===w?void 0:w.parentId]),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(i.default,{title:null!==w&&void 0!==w&&w.parentId?e("edit.sub.category"):e("edit.category"),extra:(0,f.jsx)(d.c,{}),children:I?(0,f.jsx)("div",{className:"d-flex justify-content-center align-items-center py-5",children:(0,f.jsx)(r.c,{size:"large",className:"mt-5 pt-5"})}):(0,f.jsx)(j.c,{form:P,handleSubmit:(l,n)=>{var i,r;const o={...l,type:null!==w&&void 0!==w&&w.parentId?"sub_main":"main",active:l.active?1:0,keywords:l.keywords.join(","),parent_id:(null===w||void 0===w?void 0:w.parentId)||(null===(i=l.parent_id)||void 0===i?void 0:i.value),"images[0]":null===(r=n[0])||void 0===r?void 0:r.name},d=null!==w&&void 0!==w&&w.parentId?"category/".concat(null===w||void 0===w?void 0:w.parentUuid):"catalog/categories";return m.c.update(E,o).then((()=>{s.m4.success(e("successfully.updated")),(0,c.wN)((()=>{a((0,u.MF)({...b,nextUrl:d})),a((0,h.kd)(M))})),t("/".concat(d))})).catch((e=>_(e.response.data.params)))},error:S})}),!!x&&!(null!==w&&void 0!==w&&w.parentId)&&(0,f.jsx)(g.c,{type:"sub_main",parentId:x})]})}},74132:(e,t,a)=>{a.d(t,{c:()=>x});var l=a(99584),n=a(65732),i=a(68768),r=a(10260),s=a(46712),o=a(2664),d=a(26012),c=a(87228),u=a(64212),m=a(6428),v=a(40936),p=a(65236),h=a(32712),g=a(23424),j=a(75808),f=a(97884);function x(e){var t,a;let{form:x,handleSubmit:y,error:b}=e;const{t:w}=(0,p.G)(),{activeMenu:I}=(0,h.w1)((e=>e.menu),h.G),{defaultLang:k,languages:P}=(0,h.w1)((e=>e.formLang),h.G),{state:S}=(0,g.IT)(),[_,E]=(0,l.useState)(!1),[F,G]=(0,l.useState)(null!==(t=I.data)&&void 0!==t&&t.image?null===(a=I.data)||void 0===a?void 0:a.image:[]);return(0,f.jsxs)(n.c,{name:"basic",layout:"vertical",onFinish:e=>{E(!0),y(e,F).finally((()=>E(!1)))},initialValues:{active:!0,...I.data},form:x,children:[(0,f.jsxs)(i.c,{gutter:12,children:[(0,f.jsx)(r.c,{span:12,children:P.map(((e,t)=>(0,f.jsx)(n.c.Item,{label:w("name"),name:"title[".concat(e.locale,"]"),help:b&&b["title.".concat(k)]?b["title.".concat(k)][0]:null,validateStatus:b?"error":"success",rules:[{validator:(t,a)=>a||(null===e||void 0===e?void 0:e.locale)!==k?a&&""===(null===a||void 0===a?void 0:a.trim())?Promise.reject(new Error(w("no.empty.space"))):a&&(null===a||void 0===a?void 0:a.trim().length)<2?Promise.reject(new Error(w("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(w("required")))}],hidden:e.locale!==k,children:(0,f.jsx)(s.default,{placeholder:w("name")})},e.title+t)))}),(0,f.jsx)(r.c,{span:12,children:P.map(((e,t)=>(0,f.jsx)(n.c.Item,{label:w("description"),name:"description[".concat(e.locale,"]"),rules:[{validator:(t,a)=>a||(null===e||void 0===e?void 0:e.locale)!==k?a&&""===(null===a||void 0===a?void 0:a.trim())?Promise.reject(new Error(w("no.empty.space"))):a&&(null===a||void 0===a?void 0:a.trim().length)<5?Promise.reject(new Error(w("must.be.at.least.5"))):Promise.resolve():Promise.reject(new Error(w("required")))}],hidden:e.locale!==k,children:(0,f.jsx)(u.c,{rows:4})},e.locale+t)))}),(0,f.jsx)(r.c,{span:12,children:(0,f.jsx)(n.c.Item,{label:w("keywords"),name:"keywords",rules:[{required:!0,message:w("required")}],children:(0,f.jsx)(o.default,{mode:"tags",style:{width:"100%"}})})}),!(null!==S&&void 0!==S&&S.parentId)&&(0,f.jsx)(r.c,{span:12,children:(0,f.jsx)(n.c.Item,{label:w("parent.category"),name:"parent_id",rules:[{required:!0,message:w("required")}],children:(0,f.jsx)(m.u,{refetch:!0,fetchOptions:async function(e){const t={perPage:100,type:null!==S&&void 0!==S&&S.parentId?"main":"sub_shop",active:1,search:e};return j.c.selectPaginate(t).then((e=>e.data.map((e=>{var t;return{label:null===(t=e.translation)||void 0===t?void 0:t.title,value:e.id,key:e.id}}))))}})})}),(0,f.jsx)(r.c,{span:4,children:(0,f.jsx)(n.c.Item,{label:w("image"),name:"images",rules:[{validator:()=>0===(null===F||void 0===F?void 0:F.length)?Promise.reject(new Error(w("required"))):Promise.resolve()}],children:(0,f.jsx)(v.c,{type:"categories",imageList:F,setImageList:G,form:x,multiple:!1})})}),(0,f.jsx)(r.c,{span:2,children:(0,f.jsx)(n.c.Item,{label:w("active"),name:"active",valuePropName:"checked",children:(0,f.jsx)(d.c,{})})})]}),(0,f.jsx)(c.c,{type:"primary",htmlType:"submit",loading:_,children:w("submit")})]})}}}]);