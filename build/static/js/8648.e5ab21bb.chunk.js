"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[8648],{98892:(e,t,s)=>{s.d(t,{c:()=>a});s(99584);const a=s.p+"static/media/paystack.6d6a77c8d6bfc75061ec651e5c2e74eb.svg"},72620:(e,t,s)=>{s.r(t),s.d(t,{default:()=>z});var a=s(99584),l=s(68496),n=s(68768),c=s(10260),i=s(94604),r=s(87228),d=s(37728),o=s(33012);const h={getAll:e=>o.c.get("dashboard/seller/subscriptions",{params:e}),attach:(e,t)=>o.c.post("dashboard/seller/subscriptions/".concat(e,"/attach"),t),transactionCreate:(e,t)=>o.c.post("payments/subscription/".concat(e,"/transactions"),t)};var u=s(32712),m=s(65236),p=s(95884),v=s(99924),x=s(77180),j=s(61072),y=s(16672),b=s(98892),f=s(74788),g=s(32160),w=s(23216),N=s(47148),S=s(97884);const k=["wallet"];function C(e){var t,s;let{modal:i,handleCancel:d}=e;const{t:o}=(0,m.G)(),C=(0,u.OY)(),{payments:G,loading:_}=(0,u.w1)((e=>e.payment),u.G),{myShop:z}=(0,u.w1)((e=>e.myShop),u.G),{seller:A}=(0,u.w1)((e=>e.myShop.myShop),u.G),[E,I]=(0,a.useState)(!1),[O,B]=(0,a.useState)({}),[M,Y]=(0,a.useState)(null),[q,F]=(0,a.useState)(null),{payment_type:P}=(0,u.w1)((e=>e.globalSettings.settings),u.G);(0,a.useEffect)((()=>{G.length||C((0,v.Sq)()),async function(){await N.c.getById(z.id).then((e=>{let{data:t}=e;return Y(t.map((e=>({label:e.payment.tag||"no name",value:e.payment.id,key:e.payment.id}))))}))}(),async function(){N.c.getAll().then((e=>{let{data:t}=e;return F(t.map((e=>({label:e.tag||"no name",value:e.id,key:e.id}))))}))}()}),[]);const R=e=>{switch(e){case"wallet":return(0,S.jsx)(w.mgp,{size:80});case"paypal":return(0,S.jsx)(f.kvb,{size:80});case"stripe":return(0,S.jsx)(g.w12,{size:80});case"razorpay":return(0,S.jsx)(g.GeI,{size:80});case"paystack":return(0,S.jsx)("img",{src:b.c,alt:"img",width:"80",height:"80"})}};return(0,S.jsx)(p.default,{visible:!!i,title:o("purchase.subscription"),onCancel:d,footer:[(0,S.jsx)(r.c,{type:"primary",onClick:()=>{var e;O.value?"wallet"===O.label&&(null===A||void 0===A||null===(e=A.wallet)||void 0===e?void 0:e.price)<i.price?j.m4.warning(o("insufficient.balance")):(I(!0),h.attach(i.id).then((e=>{let{data:t}=e;return function(e){const t={payment_sys_id:O.value};h.transactionCreate(e,t).then((()=>{d(),j.m4.success(o("successfully.purchased")),C((0,y.M)())})).finally((()=>I(!1)))}(t.id)})).error((()=>I(!1)))):j.m4.warning(o("please.select.payment.type"))},loading:E,children:o("save")},"save-btn"),(0,S.jsx)(r.c,{type:"default",onClick:d,children:o("cancel")},"cancel-btn")],children:_?(0,S.jsx)(x.c,{}):(0,S.jsx)(n.c,{gutter:12,children:null===(t="admin"===P?q:M)||void 0===t||null===(s=t.filter((e=>"cash"!==(null===e||void 0===e?void 0:e.label))))||void 0===s?void 0:s.map(((e,t)=>(0,S.jsx)(c.c,{span:8,children:(0,S.jsxs)(l.default,{className:"payment-card ".concat((null===O||void 0===O?void 0:O.label)===e.label?"active":""),onClick:()=>{return t=e,void(k.includes(t.label)?B(t):j.m4.warning(o("cannot.work.demo")));var t},children:[(0,S.jsx)("div",{className:"payment-icon",children:R(null===e||void 0===e?void 0:e.label)}),(0,S.jsx)("div",{className:"font-weight-bold mt-2",children:o(null===e||void 0===e?void 0:e.label)})]})},t)))})})}var G=s(18896);const _=[];function z(){const{t:e}=(0,m.G)(),{defaultCurrency:t}=(0,u.w1)((e=>e.currency),u.G),{myShop:s}=(0,u.w1)((e=>e.myShop),u.G),[o,p]=(0,a.useState)(null),[v,x]=(0,a.useState)(!1),[j,y]=(0,a.useState)([]),b=j.length,{activeMenu:f}=(0,u.w1)((e=>e.menu),u.G),g=(0,u.OY)(),w=()=>{x(!0),h.getAll().then((e=>{y(e.data)})).finally((()=>{x(!1),g((0,G.CO)(f))}))};return(0,a.useEffect)((()=>{f.refetch&&w()}),[f.refetch]),(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(l.default,{className:"h-100",children:v?(0,S.jsx)(c.c,{className:"ant-col-spin d-flex justify-content-center",children:(0,S.jsx)(d.c,{size:"large"})}):(0,S.jsxs)("div",{children:[(0,S.jsxs)("div",{className:"text-center mb-4",children:[(0,S.jsx)("h2",{className:"font-weight-semibold",children:"Pick a base plan"}),(0,S.jsx)(n.c,{type:"flex",justify:"center",children:(0,S.jsx)(c.c,{sm:24,md:12,lg:8,children:(0,S.jsx)("p",{children:"Space, the final frontier. These are the voyages of the Starship Enterprise. Its five-year mission."})})})]}),(0,S.jsx)(n.c,{children:j.map(((a,l)=>{var n,d;return(0,S.jsx)(c.c,{span:6,className:b===l+1?"":"border-right",children:(0,S.jsx)(i.c.Ribbon,{text:e("active"),color:"red",className:(null===s||void 0===s||null===(n=s.subscription)||void 0===n||null===(d=n.subscription)||void 0===d?void 0:d.id)===a.id?"":"d-none",children:(0,S.jsxs)("div",{className:"p-3",children:[(0,S.jsxs)("div",{className:"text-center",children:[(0,S.jsxs)("h1",{className:"display-4 mt-4",children:[(0,S.jsx)("span",{className:"font-size-md d-inline-block mr-1",style:{transform:"translate(0px, -17px)"},children:null===t||void 0===t?void 0:t.symbol}),(0,S.jsx)("span",{children:a.price})]}),(0,S.jsxs)("p",{className:"mb-0 text-lowercase",children:[a.month," ",e("month")]}),(0,S.jsxs)("p",{className:"mb-0 text-lowercase",children:[e("order.limit")," ",null===a||void 0===a?void 0:a.order_limit]}),(0,S.jsxs)("p",{className:"mb-0 text-lowercase",children:[e("product.limit")," ",null===a||void 0===a?void 0:a.product_limit]}),(0,S.jsx)("p",{className:"mb-0 text-lowercase",children:Boolean(null===a||void 0===a?void 0:a.with_report)?e("with.report"):e("without.report")})]}),(0,S.jsx)("div",{className:"mt-4",children:(0,S.jsx)("h2",{className:"text-center font-weight-semibold",children:a.type})}),(0,S.jsx)("div",{className:"d-flex justify-content-center mt-3",children:(0,S.jsx)("div",{children:null===_||void 0===_?void 0:_.map(((e,t)=>(0,S.jsxs)("p",{children:[(0,S.jsx)(i.c,{color:"blue"}),(0,S.jsx)("span",{children:e})]},"pricing-feature-".concat(t))))})}),(0,S.jsx)("div",{className:"mt-3 text-center",children:(0,S.jsx)(r.c,{type:"default",onClick:()=>p(a),children:e("purchase")})})]})})},"price-column-".concat(l))}))})]})}),o&&(0,S.jsx)(C,{modal:o,handleCancel:()=>p(null),refetch:w})]})}}}]);