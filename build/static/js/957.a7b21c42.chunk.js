"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[957],{1428:(e,l,a)=>{a.d(l,{c:()=>o});a(99584);var t=a(87228),n=a(59424),s=a(61072),c=a(65236),d=a(75088),i=a(97884);function o(e){let{size:l="",onClick:a,type:o="default",...r}=e;const{t:u}=(0,c.G)(),{isDemo:h}=(0,d.c)();return(0,i.jsx)(t.c,{size:l,icon:(0,i.jsx)(n.c,{}),onClick:e=>{h?s.m4.warning(u("cannot.work.demo")):a(e)},type:o,...r})}},53992:(e,l,a)=>{a.d(l,{c:()=>x});var t=a(99584),n=a(49308),s=a(92200),c=a(66296),d=a(26012),i=a(72192),o=a(35928),r=a(87228),u=a(55512),h=a(65236),v=a(97884);const{Text:m}=n.default,x=e=>{let{columns:l=[],setColumns:a,style:n,size:x="",iconOnly:p}=e;const{t:f}=(0,h.G)(),[j,g]=(0,t.useState)(!1),b=(0,v.jsx)(s.c,{children:null===l||void 0===l?void 0:l.map(((e,t)=>(0,v.jsx)(s.c.Item,{children:(0,v.jsxs)(c.c,{className:"d-flex justify-content-between",children:[(0,v.jsx)(m,{children:e.title}),(0,v.jsx)(d.c,{defaultChecked:!0,onClick:()=>function(e){const t=null===l||void 0===l?void 0:l.map((l=>(l.dataIndex===e.dataIndex&&(l.is_show=!(null!==l&&void 0!==l&&l.is_show)),l)));a(t)}(e),disabled:1===t})]})},e+t)))});return(0,v.jsx)(i.c,{overlay:b,trigger:["click"],onVisibleChange:e=>{g(e)},visible:j,children:(0,v.jsx)(o.c,{title:f("change.columns"),children:(0,v.jsx)(r.c,{style:{...n},size:x,icon:(0,v.jsx)(u.c,{}),children:p?null:f("Columns")})})})}},64408:(e,l,a)=>{function t(e){var l,a;let t=null===e||void 0===e?void 0:e.slice(0,1),n=null===e||void 0===e?void 0:e.lastIndexOf("@"),s=null===e||void 0===e?void 0:e.slice(1,n-1);s=null===(l=s)||void 0===l?void 0:l.replace(/./g,"*");let c=null===e||void 0===e?void 0:e.slice(n-1,e.length);return null===t||void 0===t||null===(a=t.concat(s))||void 0===a?void 0:a.concat(c)}a.d(l,{c:()=>t})},88200:(e,l,a)=>{a.d(l,{c:()=>i});a(99584);var t=a(95884),n=a(31508),s=a(87228),c=a(65236),d=a(97884);const i=e=>{let{open:l,handleCancel:a,text:i,click:o,loading:r,subTitle:u}=e;const{t:h}=(0,c.G)();return(0,d.jsxs)(t.default,{closable:!1,visible:l,footer:null,centered:!0,children:[(0,d.jsx)(n.cp,{status:"warning",title:i,subTitle:u}),(0,d.jsxs)("div",{className:"d-flex justify-content-end",children:[(0,d.jsx)(s.c,{type:"primary",className:"mr-2",onClick:o,loading:r,children:h("yes")}),(0,d.jsx)(s.c,{onClick:()=>a(),children:h("no")})]})]})}},40748:(e,l,a)=>{a.d(l,{c:()=>i});var t=a(99584),n=a(46712),s=a(78816),c=a(6724),d=a(97884);function i(e){let{handleChange:l,defaultValue:a,resetSearch:i,...o}=e;const[r,u]=(0,t.useState)(a),h=(0,t.useMemo)((()=>(0,s.debounce)((e=>{l(e)}),800)),[l]);return(0,t.useEffect)((()=>{u(a)}),[i,a]),(0,d.jsx)(n.default,{value:r,onChange:e=>{u(e.target.value),h(e.target.value)},prefix:(0,d.jsx)(c.c,{}),...o})}},71376:(e,l,a)=>{a.d(l,{g:()=>o});var t=a(99584),n=a(95976),s=a.n(n),c=a(2664),d=a(37728),i=a(97884);const o=e=>{let{fetchOptions:l,debounceTimeout:a=400,onClear:n,...o}=e;const[r,u]=(0,t.useState)(!1),[h,v]=(0,t.useState)([]),m=(0,t.useMemo)((()=>s()((e=>{v([]),u(!0),l(e).then((e=>{v(e),u(!1)}))}),a)),[l,a]);return(0,i.jsx)(c.default,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:m,onClear:()=>{m(""),n&&n()},notFoundContent:r?(0,i.jsx)(d.c,{size:"small"}):"no results",...o,options:h,onFocus:()=>{m("")}})}},19576:(e,l,a)=>{function t(e){switch(e){case"ascend":return"asc";case"descend":return"desc"}}a.d(l,{c:()=>t})},24968:(e,l,a)=>{function t(e){if(!e)return"0";return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$")+" "+Number(e).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")}a.d(l,{c:()=>t})},30957:(e,l,a)=>{a.r(l),a.d(l,{default:()=>P});var t=a(99584),n=a(73580),s=a(98948),c=a(36668),d=a(20108),i=a(59424),o=a(3952),r=a(84616),u=a(66296),h=a(87228),v=a(68496),m=a(15752),x=a(23424),p=a(32712),f=a(2272),j=a(19576),g=a(18896),b=a(68256),y=a(41752),C=a(65236),w=a(58036),k=a(40748),I=a(53992),_=a(1428),S=a(98016),z=a(61072),V=a(63080),H=a(46003),M=a(88200),N=a(74788),O=a(42080),G=a(75088),T=a(97884);const{TabPane:E}=r.default,F=["admin","seller","moderator","manager","cook","deliveryman","waiter","deleted_at"];function P(){var e,l,a,P,q,R,B;const{t:D}=(0,C.G)(),K=(0,p.OY)(),W=(0,x.i6)(),[A,Y]=(0,t.useState)(null),[$,U]=(0,t.useState)(null),{setIsModalVisible:J}=(0,t.useContext)(S.e),[L,Q]=(0,t.useState)(!1),{activeMenu:X}=(0,p.w1)((e=>e.menu),p.G),{users:Z,loading:ee,meta:le,params:ae}=(0,p.w1)((e=>e.user),p.G),[te,ne]=(0,t.useState)(null),[se,ce]=(0,t.useState)(null),[de,ie]=(0,t.useState)("admin"),[oe,re]=(0,t.useState)(null),ue=(null===(e=X.data)||void 0===e?void 0:e.role)||de,{user:he}=(0,p.w1)((e=>e.auth),p.G),{isDemo:ve,demoDeliveryman:me,demoSeller:xe,demoAdmin:pe,demoModerator:fe,demoMeneger:je}=(0,G.c)(),ge=X.data,be="deleted_at"===ue?{deleted_at:1,role:null}:{role:ue},ye={sort:null===ge||void 0===ge?void 0:ge.sort,column:null===ge||void 0===ge?void 0:ge.column,...be,perPage:null===ge||void 0===ge?void 0:ge.perPage,page:null===ge||void 0===ge?void 0:ge.page,search:null===ge||void 0===ge?void 0:ge.search},[Ce,we]=(0,t.useState)([{title:D("id"),dataIndex:"id",sorter:!0,is_show:!0},{title:D("firstname"),dataIndex:"firstname",is_show:!0},{title:D("lastname"),dataIndex:"lastname",is_show:!0},{title:D("email"),dataIndex:"email",is_show:!0,render:e=>(0,T.jsx)("div",{children:ve?"":e})},{title:D("role"),dataIndex:"role",is_show:!0},{title:D("options"),dataIndex:"options",is_show:!0,render:(e,l)=>(0,T.jsxs)(u.c,{children:[(0,T.jsx)(h.c,{icon:(0,T.jsx)(n.c,{}),onClick:()=>ne(l.uuid),disabled:null===l||void 0===l?void 0:l.deleted_at}),"manager"===he.role&&"admin"===l.role?void 0:(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(h.c,{icon:(0,T.jsx)(s.c,{}),onClick:()=>(e=>{K((0,g.WC)({url:"/users/user/".concat(e.uuid),id:"user_info",name:D("user.info")})),W("/users/user/".concat(e.uuid),{state:{user_id:e.id}})})(l),disabled:null===l||void 0===l?void 0:l.deleted_at}),(0,T.jsx)(h.c,{type:"primary",icon:(0,T.jsx)(c.c,{}),onClick:()=>(e=>{K((0,g.WC)({url:"user/".concat(e.uuid),id:"user_edit",name:"User edit"})),W("/user/".concat(e.uuid))})(l),disabled:ve&&(null===l||void 0===l?void 0:l.id)==me||ve&&(null===l||void 0===l?void 0:l.id)==fe||ve&&(null===l||void 0===l?void 0:l.id)==je||ve&&(null===l||void 0===l?void 0:l.id)==xe||ve&&(null===l||void 0===l?void 0:l.id)==pe||(null===l||void 0===l?void 0:l.deleted_at)})]}),"admin"!==(null===l||void 0===l?void 0:l.role)&&(0,T.jsxs)(u.c,{children:[(0,T.jsx)(h.c,{icon:(0,T.jsx)(d.c,{}),onClick:()=>(e=>{K((0,g.WC)({url:"user-clone/".concat(e.uuid),id:"user-clone",name:"user.clone"})),W("/user-clone/".concat(e.uuid))})(l),disabled:null===l||void 0===l?void 0:l.deleted_at}),(0,T.jsx)(_.c,{icon:(0,T.jsx)(i.c,{}),onClick:()=>{Y([l.id]),J(!0),U(!0)},disabled:null===l||void 0===l?void 0:l.deleted_at})]})]})}]);(0,t.useEffect)((()=>{X.refetch&&(K((0,f.y6)(ye)),K((0,g.CO)(X)))}),[X.refetch]),(0,b.c)((()=>{K((0,f.y6)(ye))}),[X.data]);const ke=e=>{const l=X.data;K((0,g.MH)({activeMenu:X,data:{...l,...e}}))},Ie={selectedRowKeys:A,onChange:e=>{Y(e)}};return(0,T.jsxs)(v.default,{title:D("users"),extra:(0,T.jsxs)(u.c,{wrap:!0,children:["deleted_at"!==(null===(l=X.data)||void 0===l?void 0:l.role)?(0,T.jsxs)(u.c,{children:[(0,T.jsx)(_.c,{size:"",onClick:()=>{null===A||0===A.length?z.m4.warning(D("select.the.product")):(J(!0),U(!1))},children:D("delete.selected")}),(0,T.jsx)(_.c,{onClick:()=>re({delete:!0}),children:D("delete.all")})]}):(0,T.jsx)(_.c,{icon:(0,T.jsx)(N.icK,{className:"mr-2"}),onClick:()=>re({restore:!0}),children:D("restore.all")}),(0,T.jsx)(I.c,{columns:Ce,setColumns:we})]}),children:[(0,T.jsx)("div",{className:"d-flex justify-content-between mb-3",children:(0,T.jsx)(k.c,{placeholder:D("search"),className:"w-25",handleChange:e=>{ke({search:e})},defaultValue:null===(a=X.data)||void 0===a?void 0:a.search,resetSearch:!(null!==(P=X.data)&&void 0!==P&&P.search)})}),(0,T.jsx)(r.default,{scroll:{x:!0},activeKey:ue,onChange:e=>{ke({role:e,page:1}),ie(e)},type:"card",children:F.map((e=>(0,T.jsx)(E,{tab:D(e)},e)))}),"admin"!=ue&&"seller"!=ue&&"deleted_at"!=ue?(0,T.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:(0,T.jsx)(h.c,{type:"primary",icon:(0,T.jsx)(o.c,{}),onClick:()=>{return e=ue,K((0,g.WC)({id:"user-add-role",url:"user/add/".concat(e),name:D("add.".concat(e))})),void W("/user/add/".concat(e));var e},className:"mr-2",children:D("add.".concat(ue))})}):null,(0,T.jsx)(m.c,{scroll:{x:!0},rowSelection:Ie,columns:null===Ce||void 0===Ce?void 0:Ce.filter((e=>e.is_show)),dataSource:Z,loading:ee,pagination:{pageSize:ae.perPage,page:(null===(q=X.data)||void 0===q?void 0:q.page)||1,total:le.total,defaultCurrent:null===(R=X.data)||void 0===R?void 0:R.page,current:null===(B=X.data)||void 0===B?void 0:B.page},rowKey:e=>e.id,onChange:function(e,l,a){const{pageSize:t,current:n}=e,{field:s,order:c}=a,d=(0,j.c)(c);K((0,g.MH)({activeMenu:X,data:{...X.data,perPage:t,page:n,column:s,sort:d}}))}}),(0,T.jsx)(H.c,{click:()=>{Q(!0);const e={...Object.assign({},...A.map(((e,l)=>({["ids[".concat(l,"]")]:e}))))};V.c.delete(e).then((()=>{z.m4.success(D("successfully.deleted")),K((0,f.y6)(ye)),J(!1),U([])})).finally((()=>{Y(null),Q(!1)}))},text:D($?"delete":"all.delete"),loading:L,setText:Y}),te&&(0,T.jsx)(y.c,{uuid:te,handleCancel:()=>ne(null)}),se&&(0,T.jsx)(w.c,{data:se,handleCancel:()=>ce(null)}),oe&&(0,T.jsx)(M.c,{open:oe,handleCancel:()=>re(null),click:oe.restore?()=>{Q(!0),O.c.restoreAll().then((()=>{z.m4.success(D("successfully.restored")),K((0,f.y6)(ye)),re(null)})).finally((()=>Q(!1)))}:()=>{Q(!0),O.c.dropAll().then((()=>{z.m4.success(D("successfully.deleted")),K((0,f.y6)()),re(null)})).finally((()=>Q(!1)))},text:oe.restore?D("restore.modal.text"):D("read.carefully"),subTitle:oe.restore?"":D("confirm.deletion"),loading:L,setText:U})]})}},58036:(e,l,a)=>{a.d(l,{c:()=>f});var t=a(99584),n=a(65732),s=a(95884),c=a(87228),d=a(2664),i=a(42080),o=a(32712),r=a(2272),u=a(61072),h=a(65236),v=a(57325),m=a(71376),x=a(48820),p=a(97884);function f(e){let{data:l,handleCancel:a}=e;const{t:f}=(0,h.G)(),[j]=n.c.useForm(),g=(0,o.OY)(),[b,y]=(0,t.useState)(!1),[C,w]=(0,t.useState)(l.role),{user:k}=(0,o.w1)((e=>e.auth),o.G),I=[{label:f("user"),value:"user",key:1},{label:f("manager"),value:"manager",key:2},{label:f("moderator"),value:"moderator",key:3}],_=[{label:f("user"),value:"user",key:4},{label:f("moderator"),value:"moderator",key:5}];return(0,p.jsx)(s.default,{visible:!!l,title:f("change.user.role"),onCancel:a,footer:[(0,p.jsx)(c.c,{type:"primary",onClick:()=>j.submit(),loading:b,children:f("save")}),(0,p.jsx)(c.c,{type:"default",onClick:a,children:f("cancel")})],children:(0,p.jsxs)(n.c,{layout:"vertical",name:"user-role",form:j,onFinish:e=>{!function(e,t){y(!0),i.c.updateRole(e,{role:t}).then((()=>{u.m4.success(f("successfully.updated")),"user"===l.role?g((0,v.qS)()):g((0,r.y6)({role:l.role})),a()})).finally((()=>y(!1)))}(l.uuid,e.role)},initialValues:l,children:[(0,p.jsx)(n.c.Item,{name:"role",label:f("role"),rules:[{required:!0,message:f("required")}],children:(0,p.jsx)(d.default,{className:"w-100",options:"manager"===k.role?_:I,onChange:e=>w(e)})}),"manager"!==C&&"user"!==C?(0,p.jsx)(n.c.Item,{label:f("shop"),name:"shop_id",rules:[{required:!0,message:f("required")}],children:(0,p.jsx)(m.g,{className:"w-100",placeholder:f("select.shop"),fetchOptions:async function(e){const l={search:e,status:"approved"};return x.c.search(l).then((e=>e.data.map((e=>({label:null!==e.translation?e.translation.title:"no name",value:e.id})))))},allowClear:!1})}):void 0]})})}},41752:(e,l,a)=>{a.d(l,{c:()=>g});var t=a(99584),n=a(95884),s=a(87228),c=a(68768),d=a(10260),i=a(37564),o=a(87968),r=a(42080),u=a(71836),h=a(65236),v=a(77180),m=a(32712),x=a(24968),p=a(75088),f=a(64408),j=a(97884);function g(e){var l,a,g;let{uuid:b,handleCancel:y}=e;const[C,w]=(0,t.useState)({}),[k,I]=(0,t.useState)(!1),{t:_}=(0,h.G)(),{defaultCurrency:S}=(0,m.w1)((e=>e.currency),m.G),{isDemo:z}=(0,p.c)();return(0,t.useEffect)((()=>{!function(e){I(!0),r.c.getById(e).then((e=>w(e.data))).finally((()=>I(!1)))}(b)}),[b]),(0,j.jsx)(n.default,{visible:!!b,title:_("user"),onCancel:y,footer:[(0,j.jsx)(s.c,{type:"default",onClick:y,children:_("cancel")},"cancel")],className:C.shop?"large-modal":"",children:k?(0,j.jsx)(v.c,{}):(0,j.jsxs)(c.c,{gutter:24,children:[(0,j.jsx)(d.c,{span:C.shop?12:24,children:(0,j.jsxs)(i.c,{bordered:!0,children:[(0,j.jsx)(i.c.Item,{span:3,label:_("avatar"),children:(0,j.jsx)(o.c,{src:(0,u.c)(C.img),alt:C.firstname,width:80,className:"rounded"})}),(0,j.jsx)(i.c.Item,{span:3,label:_("user.id"),children:C.id}),(0,j.jsxs)(i.c.Item,{span:3,label:_("name"),children:[C.firstname," ",C.lastname||""]}),(0,j.jsx)(i.c.Item,{span:3,label:_("gender"),children:C.gender}),(0,j.jsx)(i.c.Item,{span:3,label:_("birthday"),children:C.birthday}),(0,j.jsx)(i.c.Item,{span:3,label:_("email"),children:z?(0,f.c)(null===C||void 0===C?void 0:C.email):null===C||void 0===C?void 0:C.email}),(0,j.jsx)(i.c.Item,{span:3,label:_("phone"),children:z?"":C.phone}),(0,j.jsx)(i.c.Item,{span:3,label:_("role"),children:C.role}),(0,j.jsx)(i.c.Item,{span:3,label:_("wallet"),children:(0,x.c)(null===(l=C.wallet)||void 0===l?void 0:l.price,null===S||void 0===S?void 0:S.symbol)})]})}),C.shop?(0,j.jsx)(d.c,{span:12,children:(0,j.jsxs)(i.c,{bordered:!0,children:[(0,j.jsx)(i.c.Item,{span:3,label:_("shop.id"),children:C.shop.id}),(0,j.jsx)(i.c.Item,{span:3,label:_("shop.name"),children:null===(a=C.shop.translation)||void 0===a?void 0:a.title}),(0,j.jsx)(i.c.Item,{span:3,label:_("shop.logo"),children:(0,j.jsx)("img",{src:(0,u.c)(C.shop.logo_img),alt:null===(g=C.shop.translation)||void 0===g?void 0:g.title,width:100,className:"rounded"})}),(0,j.jsx)(i.c.Item,{span:3,label:_("shop.phone"),children:C.shop.phone}),(0,j.jsxs)(i.c.Item,{span:3,label:_("shop.open_close.time"),children:[C.shop.open_time," - ",C.shop.close_time]}),(0,j.jsx)(i.c.Item,{span:3,label:_("delivery.range"),children:C.shop.delivery_range})]})}):""]})})}},73580:(e,l,a)=>{a.d(l,{c:()=>i});var t=a(30800),n=a(99584);const s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M342 88H120c-17.7 0-32 14.3-32 32v224c0 8.8 7.2 16 16 16h48c8.8 0 16-7.2 16-16V168h174c8.8 0 16-7.2 16-16v-48c0-8.8-7.2-16-16-16zm578 576h-48c-8.8 0-16 7.2-16 16v176H682c-8.8 0-16 7.2-16 16v48c0 8.8 7.2 16 16 16h222c17.7 0 32-14.3 32-32V680c0-8.8-7.2-16-16-16zM342 856H168V680c0-8.8-7.2-16-16-16h-48c-8.8 0-16 7.2-16 16v224c0 17.7 14.3 32 32 32h222c8.8 0 16-7.2 16-16v-48c0-8.8-7.2-16-16-16zM904 88H682c-8.8 0-16 7.2-16 16v48c0 8.8 7.2 16 16 16h174v176c0 8.8 7.2 16 16 16h48c8.8 0 16-7.2 16-16V120c0-17.7-14.3-32-32-32z"}}]},name:"expand",theme:"outlined"};var c=a(47164),d=function(e,l){return n.createElement(c.c,(0,t.c)((0,t.c)({},e),{},{ref:l,icon:s}))};d.displayName="ExpandOutlined";const i=n.forwardRef(d)},3952:(e,l,a)=>{a.d(l,{c:()=>i});var t=a(30800),n=a(99584);const s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"};var c=a(47164),d=function(e,l){return n.createElement(c.c,(0,t.c)((0,t.c)({},e),{},{ref:l,icon:s}))};d.displayName="PlusCircleOutlined";const i=n.forwardRef(d)},55512:(e,l,a)=>{a.d(l,{c:()=>i});var t=a(30800),n=a(99584);const s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 208H676V232h212v136zm0 224H676V432h212v160zM412 432h200v160H412V432zm200-64H412V232h200v136zm-476 64h212v160H136V432zm0-200h212v136H136V232zm0 424h212v136H136V656zm276 0h200v136H412V656zm476 136H676V656h212v136z"}}]},name:"table",theme:"outlined"};var c=a(47164),d=function(e,l){return n.createElement(c.c,(0,t.c)((0,t.c)({},e),{},{ref:l,icon:s}))};d.displayName="TableOutlined";const i=n.forwardRef(d)}}]);