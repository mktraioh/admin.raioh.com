"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[2780],{98892:(e,t,l)=>{l.d(t,{c:()=>a});l(99584);const a=l.p+"static/media/paystack.6d6a77c8d6bfc75061ec651e5c2e74eb.svg"},24968:(e,t,l)=>{function a(e){if(!e)return"0";return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$")+" "+Number(e).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")}l.d(t,{c:()=>a})},2780:(e,t,l)=>{l.r(t),l.d(t,{default:()=>_});var a=l(98044),n=l(68496),i=l(87228),c=l(49308),s=l(15752),d=l(24968),r=l(83072),o=l.n(r),u=l(99584),p=l(65236),h=l(32712),m=l(18896),v=l(42080),y=l(65732),x=l(95884),b=l(68768),f=l(10260),j=l(10240),g=l(99924),w=l(77180),S=l(61072),k=l(98892),C=l(74788),I=l(32160),G=l(23216),Y=l(47148),z=l(77404),F=l(97884);function N(e){var t,l,a;let{open:c,handleCancel:s,refetch:d}=e;const{t:r}=(0,p.G)(),o=(0,h.OY)(),{payments:m,loading:v}=(0,h.w1)((e=>e.payment),h.G),{myShop:N}=(0,h.w1)((e=>e.myShop),h.G),[_,q]=(0,u.useState)(!1),[M,O]=(0,u.useState)({}),[D,E]=(0,u.useState)(null),[T,$]=(0,u.useState)(null),{payment_type:A}=(0,h.w1)((e=>e.globalSettings.settings),h.G),[B]=y.c.useForm();(0,u.useEffect)((()=>{m.length||o((0,g.Sq)()),async function(){await Y.c.getById(N.id).then((e=>{let{data:t}=e;return E(t.map((e=>({label:e.payment.tag||"no name",value:e.payment.id,key:e.payment.id}))))}))}(),async function(){Y.c.getAll().then((e=>{let{data:t}=e;return $(t.map((e=>({label:e.tag||"no name",value:e.id,key:e.id}))))}))}()}),[]);const U=e=>{switch(e){case"wallet":return(0,F.jsx)(G.mgp,{size:80});case"paypal":return(0,F.jsx)(C.kvb,{size:80});case"stripe":return(0,F.jsx)(I.w12,{size:80});case"razorpay":return(0,F.jsx)(I.GeI,{size:80});case"paystack":return(0,F.jsx)("img",{src:k.c,alt:"img",width:"80",height:"80"})}};return(0,F.jsx)(x.default,{visible:c,title:r("wallet.topup"),onCancel:s,footer:[(0,F.jsx)(i.c,{type:"primary",disabled:v,htmlType:"submit",form:"payment",loading:_,children:r("save")},"save-btn"),(0,F.jsx)(i.c,{type:"default",onClick:s,children:r("cancel")},"cancel-btn")],children:v?(0,F.jsx)(w.c,{}):(0,F.jsx)(y.c,{layout:"vertical",id:"payment",onFinish:e=>{M.value?(q(!0),z.c.topUp({payment_type:M.label,price:e.price}).then((e=>{let{data:t}=e;B.resetFields(),O({}),s(),d(),window.open(t.data.url)})).finally((()=>q(!1)))):S.m4.warning(r("please.select.payment.type"))},children:(0,F.jsxs)(b.c,{gutter:12,children:[(0,F.jsx)(f.c,{span:24,children:(0,F.jsx)(y.c.Item,{name:"price",label:r("price"),rules:[{required:!0,message:r("required")},{type:"number",min:0,message:r("should.be.greater.than.0")}],children:(0,F.jsx)(j.c,{className:"w-100"})})}),null===(t="admin"===A?T:D)||void 0===t||null===(l=t.filter((e=>"cash"!==(null===e||void 0===e?void 0:e.label))))||void 0===l||null===(a=l.filter((e=>"wallet"!==(null===e||void 0===e?void 0:e.label))))||void 0===a?void 0:a.map(((e,t)=>(0,F.jsx)(f.c,{span:8,children:(0,F.jsxs)(n.default,{className:"payment-card ".concat((null===M||void 0===M?void 0:M.label)===e.label?"active":""),onClick:()=>{O(e)},children:[(0,F.jsx)("div",{className:"payment-icon",children:U(null===e||void 0===e?void 0:e.label)}),(0,F.jsx)("div",{className:"font-weight-bold mt-2",children:r(null===e||void 0===e?void 0:e.label)})]})},t)))]})})})}const _=()=>{var e;const[t,l]=(0,u.useState)(null),{t:r}=(0,p.G)(),y=(0,h.OY)(),[x,b]=(0,u.useState)(!1),[f,j]=(0,u.useState)(!1),{activeMenu:g}=(0,h.w1)((e=>e.menu)),w=(0,u.useCallback)((()=>{b(!0),v.c.profileShow().then((e=>{l(e.data)})).finally((()=>{b(!1)}))}),[]);(0,u.useEffect)((()=>{null!==g&&void 0!==g&&g.refetch&&w(),y((0,m.CO)(g))}),[null===g||void 0===g?void 0:g.refetch]);const S=[{title:r("created.at"),dataIndex:"created_at",render:e=>o()(e).format("YYYY-MM-DD hh:mm")},{title:r("status"),dataIndex:"status",render:e=>(0,F.jsx)("div",{children:"paid"===e?(0,F.jsx)(a.c,{color:"cyan",children:e}):(0,F.jsx)(a.c,{color:"blue",children:e})})},{title:r("type"),dataIndex:"type",render:e=>"topup"===e?(0,F.jsx)(a.c,{color:"cyan",children:e}):(0,F.jsx)(a.c,{color:"error",children:e})},{title:r("note"),dataIndex:"note"}];return(0,F.jsxs)(n.default,{title:r("user.wallet"),extra:x?null:(0,F.jsx)(i.c,{onClick:()=>j(!0),children:r("top.up")}),children:[null!==t&&void 0!==t&&t.wallet?(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(c.default.Title,{children:(0,d.c)(null===t||void 0===t?void 0:t.wallet.price)}),(0,F.jsx)(s.c,{loading:x,dataSource:null===t||void 0===t||null===(e=t.wallet)||void 0===e?void 0:e.histories,columns:S})]}):(0,F.jsx)(s.c,{dataSource:[],columns:S,loading:x}),(0,F.jsx)(N,{refetch:w,open:f,handleCancel:()=>j(!1)})]})}}}]);