"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[9788],{89896:(e,r,l)=>{l.d(r,{c:()=>h});var s=l(99584),a=l(8808),i=l(52640);const n=l.p+"static/media/pin.0e41858db80c699cd8a2.png";var o=l(71760),t=l.n(o);async function d(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.KU,l={latlng:"".concat(null===e||void 0===e?void 0:e.lat,",").concat(null===e||void 0===e?void 0:e.lng),key:r};return t().get("https://maps.googleapis.com/maps/api/geocode/json",{params:l}).then((e=>{var r;let{data:l}=e;return null===(r=l.results[0])||void 0===r?void 0:r.formatted_address})).catch((e=>"not found"))}var c=l(29416),m=l(61072),u=l(65236),v=l(97884);const h=(0,a.GoogleApiWrapper)({apiKey:i.KU})((function(e){const[r,l]=(0,s.useState)(),{t:o}=(0,u.G)(),t=async()=>{await navigator.geolocation.getCurrentPosition((function(e){const r={lat:e.coords.latitude,lng:e.coords.longitude};l(r)}),(function(e){m.m4.warning(o("turn.on.gps"))}))};(0,s.useEffect)((()=>{t()}),[]);const h=[{lat:Number(e.location.lat)||0,lng:Number(e.location.lng)||0}];for(var p=new e.google.maps.LatLngBounds,g=0;g<h.length;g++)p.extend(h[g]);return(0,v.jsxs)("div",{className:"map-container",style:{height:400,width:"100%"},children:[(0,v.jsx)("button",{className:"map-button",type:"button",onClick:()=>{t(),r&&(async r=>{const l={lat:null===r||void 0===r?void 0:r.lat,lng:null===r||void 0===r?void 0:r.lng};e.setLocation(l);const s=await d(l,i.KU);e.setAddress(s)})(r)},children:(0,v.jsx)(c.mEX,{})}),(0,v.jsx)(a.Map,{cursor:"pointer",onClick:async(r,l,s)=>{const{latLng:a}=s,n={lat:a.lat(),lng:a.lng()};e.setLocation(n);const o=await d(n,i.KU);e.setAddress(o)},google:e.google,defaultZoom:12,zoom:10,className:"clickable",initialCenter:e.location,center:e.location,children:(0,v.jsx)(a.Marker,{position:e.location,icon:{url:n,scaledSize:new e.google.maps.Size(32,32)},className:"marker"})})]})}))},71376:(e,r,l)=>{l.d(r,{g:()=>d});var s=l(99584),a=l(95976),i=l.n(a),n=l(2664),o=l(37728),t=l(97884);const d=e=>{let{fetchOptions:r,debounceTimeout:l=400,onClear:a,...d}=e;const[c,m]=(0,s.useState)(!1),[u,v]=(0,s.useState)([]),h=(0,s.useMemo)((()=>i()((e=>{v([]),m(!0),r(e).then((e=>{v(e),m(!1)}))}),l)),[r,l]);return(0,t.jsx)(n.default,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:h,onClear:()=>{h(""),a&&a()},notFoundContent:c?(0,t.jsx)(o.c,{size:"small"}):"no results",...d,options:u,onFocus:()=>{h("")}})}},33131:(e,r,l)=>{l.d(r,{c:()=>s});l(52640);function s(e){if(null===e||void 0===e||!e.location)return{lat:47.4143302506288,lng:8.532059477976883};const r=e.location.split(", ");return{lat:Number(null===r||void 0===r?void 0:r[0]),lng:Number(null===r||void 0===r?void 0:r[1])}}},97336:(e,r,l)=>{l.r(r),l.d(r,{default:()=>O});var s=l(99584),a=l(65732),i=l(68496),n=l(68768),o=l(10260),t=l(46712),d=l(10240),c=l(73568),m=l(2664),u=l(50452),v=l(87228),h=l(23424),p=l(61072),g=l(32712),j=l(18896),x=l(42080),w=l(65236),b=l(83072),f=l.n(b),y=l(40936),P=l(71376),q=l(48820),_=l(2272),E=l(63080),k=l(33131),I=l(26012),N=l(89896),S=l(97884);const C=[{label:"Benzine",value:"benzine"},{label:"Diesel",value:"diesel"},{label:"Gas",value:"gas"},{label:"Motorbike",value:"motorbike"},{label:"Bike",value:"bike"},{label:"Foot",value:"foot"},{label:"Electric",value:"electric"}],F=e=>{let{location:r,setLocation:l,form:s,image:i,setImage:c}=e;const{t:u}=(0,w.G)();return(0,S.jsxs)(n.c,{gutter:12,children:[(0,S.jsx)(o.c,{span:12,children:(0,S.jsx)(a.c.Item,{label:u("brand"),name:"brand",rules:[{validator:(e,r)=>r?r&&""===(null===r||void 0===r?void 0:r.trim())?Promise.reject(new Error(u("no.empty.space"))):r&&(null===r||void 0===r?void 0:r.trim().length)<2?Promise.reject(new Error(u("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(u("required")))}],children:(0,S.jsx)(t.default,{})})}),(0,S.jsx)(o.c,{span:12,children:(0,S.jsx)(a.c.Item,{label:u("model"),name:"model",rules:[{validator:(e,r)=>r?r&&""===(null===r||void 0===r?void 0:r.trim())?Promise.reject(new Error(u("no.empty.space"))):r&&(null===r||void 0===r?void 0:r.trim().length)<2?Promise.reject(new Error(u("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(u("required")))}],children:(0,S.jsx)(t.default,{})})}),(0,S.jsx)(o.c,{span:12,children:(0,S.jsx)(a.c.Item,{label:u("type.of.technique"),name:"type_of_technique",rules:[{required:!0,message:u("required")}],children:(0,S.jsx)(m.default,{options:C})})}),(0,S.jsx)(o.c,{span:12,children:(0,S.jsx)(a.c.Item,{label:u("car.number"),name:"number",rules:[{validator:(e,r)=>r?r&&""===(null===r||void 0===r?void 0:r.trim())?Promise.reject(new Error(u("no.empty.space"))):r&&(null===r||void 0===r?void 0:r.trim().length)<2?Promise.reject(new Error(u("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(u("required")))}],children:(0,S.jsx)(t.default,{})})}),(0,S.jsx)(o.c,{span:12,children:(0,S.jsx)(a.c.Item,{label:u("car.color"),name:"color",rules:[{validator:(e,r)=>r?r&&""===(null===r||void 0===r?void 0:r.trim())?Promise.reject(new Error(u("no.empty.space"))):r&&(null===r||void 0===r?void 0:r.trim().length)<2?Promise.reject(new Error(u("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(u("required")))}],children:(0,S.jsx)(t.default,{})})}),(0,S.jsx)(o.c,{span:12,children:(0,S.jsx)(a.c.Item,{label:u("height"),name:"height",rules:[{validator:(e,r)=>r||0===r?!r||r<1?Promise.reject(new Error(u("min.1"))):Promise.resolve():Promise.reject(new Error(u("required")))}],children:(0,S.jsx)(d.c,{className:"w-100",addonAfter:"sm"})})}),(0,S.jsx)(o.c,{span:12,children:(0,S.jsx)(a.c.Item,{label:u("weight"),name:"kg",rules:[{validator:(e,r)=>r||0===r?!r||r<1?Promise.reject(new Error(u("min.1"))):Promise.resolve():Promise.reject(new Error(u("required")))}],children:(0,S.jsx)(d.c,{className:"w-100",addonAfter:"kg"})})}),(0,S.jsx)(o.c,{span:12,children:(0,S.jsx)(a.c.Item,{label:u("length"),name:"length",rules:[{validator:(e,r)=>r||0===r?!r||r<1?Promise.reject(new Error(u("min.1"))):Promise.resolve():Promise.reject(new Error(u("required")))}],children:(0,S.jsx)(d.c,{className:"w-100",addonAfter:"sm"})})}),(0,S.jsx)(o.c,{span:12,children:(0,S.jsx)(a.c.Item,{label:u("width"),name:"width",rules:[{validator:(e,r)=>r||0===r?!r||r<1?Promise.reject(new Error(u("min.1"))):Promise.resolve():Promise.reject(new Error(u("required")))}],children:(0,S.jsx)(d.c,{className:"w-100",addonAfter:"sm"})})}),(0,S.jsx)(o.c,{span:12,children:(0,S.jsx)(a.c.Item,{label:u("image"),name:"images",rules:[{validator:()=>0===(null===i||void 0===i?void 0:i.length)?Promise.reject(new Error(u("required"))):Promise.resolve()}],children:(0,S.jsx)(y.c,{type:"deliveryman/settings",imageList:i,setImageList:c,form:s,length:"1",multiple:!0})})}),(0,S.jsx)(o.c,{span:6,children:(0,S.jsx)(a.c.Item,{label:u("online"),name:"online",rules:[{required:!0,message:u("required")}],valuePropName:"checked",children:(0,S.jsx)(I.c,{})})}),(0,S.jsx)(o.c,{span:24,children:(0,S.jsx)(a.c.Item,{label:u("map"),name:"location",children:(0,S.jsx)(N.c,{location:r,setLocation:l})})})]})};var L=l(24144);function O(){var e,r;const{t:l}=(0,w.G)(),[b]=a.c.useForm(),[I,N]=(0,s.useState)(),[C,O]=(0,s.useState)(null),[M,z]=(0,s.useState)(!1),A=(0,h.i6)(),G=(0,g.w1)((e=>e.user),g.G),{role:K}=(0,h.W4)(),{settings:U}=(0,g.w1)((e=>e.globalSettings),g.G),[V,T]=(0,s.useState)((0,k.c)(U));(0,s.useEffect)((()=>()=>{const e=b.getFieldsValue(!0);e.birthday=JSON.stringify(null===e||void 0===e?void 0:e.birthday),J((0,j.MH)({activeMenu:D,data:{...D.data,...e}}))}),[]);const B=(0,h.IT)(),D=(0,g.w1)((e=>e.menu.activeMenu)),J=(0,g.OY)(),[W,H]=(0,s.useState)(null!==D&&void 0!==D&&null!==(e=D.data)&&void 0!==e&&e.image?[null===D||void 0===D||null===(r=D.data)||void 0===r?void 0:r.image]:[]),[X,Y]=(0,s.useState)([]);async function Z(e){const r={search:e,status:"approved"};return q.c.search(r).then((e=>e.data.map((e=>({label:null!==e.translation?e.translation.title:"no name",value:e.id})))))}return(0,S.jsx)(i.default,{title:l("add.user"),children:(0,S.jsx)(a.c,{form:b,layout:"vertical",initialValues:{online:!0,gender:"male",...(()=>{var e,r;if(null===(e=D.data)||void 0===e||!e.birthday)return{};const l=JSON.parse(null===(r=D.data)||void 0===r?void 0:r.birthday);return{birthday:f()(l)}})()},onFinish:e=>{var r,s;z(!0);const a={firstname:e.firstname,lastname:e.lastname,email:e.user_email,phone:e.phone,birthday:I,gender:e.gender,password_confirmation:e.password_confirmation,password:e.password,images:W[0]?[null===(r=W[0])||void 0===r?void 0:r.name]:void 0,shop_id:null!==e&&void 0!==e&&e.shop_id?void 0!==(null===e||void 0===e?void 0:e.shop_id.length)?null===e||void 0===e||null===(s=e.shop_id)||void 0===s?void 0:s.map((e=>e.value)):[null===e||void 0===e?void 0:e.shop_id.value]:void 0,role:K||void 0,online:Number(e.online),height:e.height,kg:e.kg,length:e.length,price:e.price,price_per_km:e.price_per_km,width:e.width},i=B.pathname.search("/user/delivery/")?"deliveries/list":"users/admin";console.log(i),x.c.create(a).then((r=>{let{data:s}=r;if("deliveryman"===K){const r={color:e.color,number:e.number,type_of_technique:e.type_of_technique,brand:e.brand,model:e.model,user_id:s.id,images:W.map((e=>e.name)),location:{latitude:V.lat,longitude:V.lng},online:Number(e.online),height:e.height,kg:e.kg,length:e.length,price:e.price,price_per_km:e.price_per_km,width:e.width};E.c.create(r).then((()=>{p.m4.success(l("successfully.created")),J((0,j.MF)({...D,nextUrl:i})),A("/".concat(i)),J(B.pathname.search("/user/delivery/")?(0,L.S)():(0,_.y6)({role:K}))}))}else{const e="users/admin",r={...G.params,role:s.role};J((0,j.MF)({...D,menu:e})),A("/".concat(e)),J((0,_.y6)(r))}b.resetFields()})).catch((e=>{var r,l,s,a,i,n,o,t,d;null!==e&&void 0!==e&&null!==(r=e.response)&&void 0!==r&&null!==(l=r.data)&&void 0!==l&&l.params&&(p.m4.dismiss(),null===(o=Object.values(null===e||void 0===e||null===(t=e.response)||void 0===t||null===(d=t.data)||void 0===d?void 0:d.params))||void 0===o||o.map((e=>p.m4.error(e[0]))));console.log(null===e||void 0===e||null===(s=e.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.params),O(null===e||void 0===e||null===(i=e.response)||void 0===i||null===(n=i.data)||void 0===n?void 0:n.params)})).finally((()=>z(!1)))},children:(0,S.jsxs)(n.c,{gutter:12,children:[(0,S.jsx)(o.c,{span:24,children:(0,S.jsx)(a.c.Item,{rules:[{validator:()=>0===(null===W||void 0===W?void 0:W.length)?Promise.reject(new Error(l("required"))):Promise.resolve()}],name:"images",label:l("avatar"),children:(0,S.jsx)(y.c,{type:"users",imageList:W,setImageList:H,form:b,multiple:!1})})}),(0,S.jsx)(o.c,{span:12,children:(0,S.jsx)(a.c.Item,{label:l("firstname"),name:"firstname",help:null!==C&&void 0!==C&&C.firstname?C.firstname[0]:null,validateStatus:null!==C&&void 0!==C&&C.firstname?"error":"success",rules:[{validator:(e,r)=>r?r&&""===(null===r||void 0===r?void 0:r.trim())?Promise.reject(new Error(l("no.empty.space"))):r&&(null===r||void 0===r?void 0:r.trim().length)<2?Promise.reject(new Error(l("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(l("required")))}],children:(0,S.jsx)(t.default,{})})}),(0,S.jsx)(o.c,{span:12,children:(0,S.jsx)(a.c.Item,{label:"lastname",name:"lastname",help:null!==C&&void 0!==C&&C.lastname?C.lastname[0]:null,validateStatus:null!==C&&void 0!==C&&C.lastname?"error":"success",rules:[{validator:(e,r)=>r?r&&""===(null===r||void 0===r?void 0:r.trim())?Promise.reject(new Error(l("no.empty.space"))):r&&(null===r||void 0===r?void 0:r.trim().length)<2?Promise.reject(new Error(l("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(l("required")))}],children:(0,S.jsx)(t.default,{})})}),(0,S.jsx)(o.c,{span:12,children:(0,S.jsx)(a.c.Item,{label:l("phone"),name:"phone",help:null!==C&&void 0!==C&&C.phone?C.phone[0]:null,validateStatus:null!==C&&void 0!==C&&C.phone?"error":"success",rules:[{required:!0,message:l("required")}],children:(0,S.jsx)(d.c,{min:0,className:"w-100"})})}),(0,S.jsx)(o.c,{span:12,children:(0,S.jsx)(a.c.Item,{label:l("birthday"),name:"birthday",rules:[{required:!0,message:l("required")}],children:(0,S.jsx)(c.default,{onChange:(e,r)=>N(r),className:"w-100",disabledDate:e=>f()().add(-18,"years")<=e,defaultPickerValue:f()().add(-18,"years")})})}),(0,S.jsx)(o.c,{span:12,children:(0,S.jsx)(a.c.Item,{label:l("gender"),name:"gender",rules:[{required:!0,message:l("required")}],children:(0,S.jsxs)(m.default,{picker:"dayTime",className:"w-100",children:[(0,S.jsx)(m.default.Option,{value:"male",children:l("male")}),(0,S.jsx)(m.default.Option,{value:"female",children:l("female")})]})})}),(0,S.jsx)(o.c,{span:12,children:(0,S.jsx)(a.c.Item,{label:l("email"),name:"user_email",help:null!==C&&void 0!==C&&C.email?C.email[0]:null,validateStatus:null!==C&&void 0!==C&&C.email?"error":"success",rules:[{required:!0,message:l("required")},{type:"email",message:l("invalid.email")}],children:(0,S.jsx)(t.default,{type:"email"})})}),(0,S.jsx)(o.c,{span:12,children:(0,S.jsx)(a.c.Item,{label:l("password"),name:"password",help:null!==C&&void 0!==C&&C.password?C.password[0]:null,validateStatus:null!==C&&void 0!==C&&C.password?"error":"success",rules:[{required:!0,message:l("required")},{validator:(e,r)=>r&&(null===r||void 0===r?void 0:r.length)<6?Promise.reject(new Error(l("min.6.letters"))):Promise.resolve()}],normalize:e=>""===(null===e||void 0===e?void 0:e.trim())?null===e||void 0===e?void 0:e.trim():e,children:(0,S.jsx)(t.default.Password,{type:"password",className:"w-100"})})}),"admin"!==K&&"manager"!==K&&"moderator"!==K&&"seller"!==K&&"cook"!==K&&"user"!==K&&(0,S.jsx)(o.c,{span:12,children:(0,S.jsx)(a.c.Item,{label:l("shop"),name:"shop_id",rules:[{required:!0,message:l("required")}],children:(0,S.jsx)(P.g,{mode:"multiple",className:"w-100",placeholder:l("select.shop"),fetchOptions:Z,allowClear:!1})})}),"cook"===K&&(0,S.jsx)(o.c,{span:12,children:(0,S.jsx)(a.c.Item,{label:l("shop"),name:"shop_id",rules:[{required:!0,message:l("required")}],children:(0,S.jsx)(P.g,{fetchOptions:Z,className:"w-100",placeholder:l("select.shop"),allowClear:!1})})}),"moderator"===K&&(0,S.jsx)(o.c,{span:12,children:(0,S.jsx)(a.c.Item,{label:l("branches"),name:"shop_id",rules:[{required:!0,message:l("required")}],children:(0,S.jsx)(P.g,{fetchOptions:Z,className:"w-100",placeholder:l("select.shop"),allowClear:!1})})}),(0,S.jsx)(o.c,{span:12,children:(0,S.jsx)(a.c.Item,{label:l("password.confirmation"),help:null!==C&&void 0!==C&&C.password_confirmation?C.password_confirmation[0]:null,validateStatus:null!==C&&void 0!==C&&C.password_confirmation?"error":"success",name:"password_confirmation",dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:l("required")},e=>{let{getFieldValue:r}=e;return{validator:(e,s)=>s&&r("password")!==s?Promise.reject(l("two.passwords.dont.match")):Promise.resolve()}}],normalize:e=>""===(null===e||void 0===e?void 0:e.trim())?null===e||void 0===e?void 0:e.trim():e,children:(0,S.jsx)(t.default.Password,{type:"password"})})}),"deliveryman"===K&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(u.c,{className:"pt-3 pb-3",dashed:!0,orientation:"left",plain:!0,children:l("deliveryman.settings")}),(0,S.jsx)(F,{setLocation:T,location:V,setImage:Y,image:X,form:b})]}),(0,S.jsx)(o.c,{span:24,children:(0,S.jsx)(v.c,{type:"primary",htmlType:"submit",loading:M,children:l("save")})})]})})})}}}]);