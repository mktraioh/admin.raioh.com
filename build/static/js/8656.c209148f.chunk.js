"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[8656],{51229:(e,l,i)=>{i.d(l,{c:()=>t});i(99584);var s=i(52800),n=i(32712),a=i(52640),d=i(97884);function t(e){let{center:l,handleLoadMap:i,children:t}=e;const{google_map_key:o}=(0,n.w1)((e=>e.globalSettings.settings),n.G);return(0,d.jsx)(s.cp,{bootstrapURLKeys:{key:o||a.KU},defaultZoom:12,center:l,options:{fullscreenControl:!1},yesIWantToUseGoogleMapApiInternals:!0,onGoogleApiLoaded:e=>{let{map:l,maps:s}=e;return i(l,s)},children:t})}},33131:(e,l,i)=>{i.d(l,{c:()=>s});i(52640);function s(e){if(null===e||void 0===e||!e.location)return{lat:47.4143302506288,lng:8.532059477976883};const l=e.location.split(", ");return{lat:Number(null===l||void 0===l?void 0:l[0]),lng:Number(null===l||void 0===l?void 0:l[1])}}},93868:(e,l,i)=>{function s(e,l){var i=[{value:1,symbol:""},{value:1e3,symbol:"k"},{value:1e6,symbol:"M"},{value:1e9,symbol:"G"},{value:1e12,symbol:"T"},{value:1e15,symbol:"P"},{value:1e18,symbol:"E"}].slice().reverse().find((function(l){return e>=l.value}));return i?"$"+(e/i.value).toFixed(l).replace(/\.0+$|(\.[0-9]*[1-9])0+$/,"$1")+i.symbol:"0"}i.d(l,{O:()=>s})},34768:(e,l,i)=>{i.d(l,{c:()=>d});var s=i(83072),n=i.n(s),a=i(65236);function d(e){const{t:l}=(0,a.G)();let i=n()(),s=n()(e),d=i.diff(s,"hours"),t=i.diff(s,"minutes");return d>23?n()(e).format("Do MMM, H:mm"):d>0?d+" "+l("hours.ago"):t+" "+l("minutes.ago")}},98656:(e,l,i)=>{i.r(l),i.d(l,{default:()=>L});var s=i(99584),n=i(91612),a=i(68496),d=i(2664),t=i(68768),o=i(10260),r=i(65236),c=i(32712),v=i(33131),u=i(52640),m=i(24144),h=i(18896),x=i(77180),g=i(68256),j=i(69116),p=i(46162),_=i(93868),y=i(34768),f=i(97884);const b=e=>{var l;let{data:i,handleClose:s}=e;const{t:a}=(0,r.G)(),d=(0,y.c)(null===i||void 0===i||null===(l=i.delivery_man_setting)||void 0===l?void 0:l.updated_at),c=null===i||void 0===i?void 0:i.assign_reviews_avg_rating,v=null===i||void 0===i?void 0:i.phone,m=null===i||void 0===i?void 0:i.delivery_man_orders_count,h=null===i||void 0===i?void 0:i.delivery_man_orders_sum_total_price;return(0,f.jsxs)(t.c,{gutter:12,align:"middle",children:[(0,f.jsx)(o.c,{span:7,children:(0,f.jsxs)("div",{className:"d-flex align-items-center",children:[(0,f.jsx)(n.c,{src:u.cd+(null===i||void 0===i?void 0:i.img)}),(0,f.jsxs)("div",{className:"ml-2",children:[(0,f.jsx)("div",{className:"title",children:(null===i||void 0===i?void 0:i.firstname)+" "+(null===i||void 0===i?void 0:i.lastname)}),(0,f.jsx)(p.c,{disabled:!0,allowHalf:!0,value:c||0})]})]})}),(0,f.jsxs)(o.c,{span:4,children:[(0,f.jsx)("div",{className:"title",children:v}),(0,f.jsx)("div",{className:"label",children:a("phone")})]}),(0,f.jsxs)(o.c,{span:4,children:[(0,f.jsx)("div",{className:"title",children:d}),(0,f.jsx)("div",{className:"label",children:a("last.activity")})]}),(0,f.jsxs)(o.c,{span:4,children:[(0,f.jsx)("div",{className:"title",children:m}),(0,f.jsx)("div",{className:"label",children:a("total.orders")})]}),(0,f.jsxs)(o.c,{span:4,children:[(0,f.jsx)("div",{className:"title",children:(0,_.O)(h)}),(0,f.jsxs)("div",{className:"label",children:[" ",a("total.earning")]})]}),(0,f.jsx)(o.c,{span:1,children:(0,f.jsx)("button",{type:"button",className:"close-btn",onClick:s,children:(0,f.jsx)(j.c,{})})})]})};var N=i(66296),w=i(23424),k=i(44720);function C(e){var l,i,s,d;let{data:t}=e;const{t:o}=(0,r.G)(),v=(0,w.i6)(),m=(0,c.OY)(),{menuItems:x}=(0,c.w1)((e=>e.menu),c.G),g=(null===t||void 0===t?void 0:t.deliveryman_orders)||[],j=(0,y.c)(null===t||void 0===t||null===(l=t.delivery_man_setting)||void 0===l?void 0:l.updated_at);return(0,f.jsxs)(a.default,{className:"user-card",onClick:()=>(e=>{!!x.find((e=>"delivery_map_orders"===e.id))&&m((0,h.MF)({id:"delivery_map_orders",nextUrl:"deliveries/map"})),m((0,h.WC)({url:"deliveries/map/".concat(e.id),id:"delivery_map_orders",name:o("delivery.orders"),data:{list:g,item:g[0],deliveryman:t}})),v("/deliveries/map/".concat(e.id))})(t),children:[(0,f.jsxs)(N.c,{children:[(0,f.jsx)(n.c,{src:u.cd+(null===t||void 0===t?void 0:t.img),icon:(0,f.jsx)(k.c,{}),style:{color:"#1a3353"}}),(0,f.jsxs)("div",{children:[(0,f.jsxs)("h4",{className:"title",children:[null===t||void 0===t?void 0:t.firstname," ",null===t||void 0===t||null===(i=t.lastname)||void 0===i?void 0:i.charAt(0),"."]}),(0,f.jsx)("div",{className:"last-seen ".concat(null!==t&&void 0!==t&&null!==(s=t.delivery_man_setting)&&void 0!==s&&s.online?"online":"text-muted"),children:null!==t&&void 0!==t&&null!==(d=t.delivery_man_setting)&&void 0!==d&&d.online?o("online"):j})]})]}),(0,f.jsx)("div",{className:"mt-2"}),(0,f.jsxs)(N.c,{children:[(0,f.jsxs)("div",{children:[o("active_orders"),":"]}),(0,f.jsx)("div",{children:g.length})]})]})}var G=i(51229);const M=[{label:"All",value:"all",key:1},{label:"Online",value:"1",key:2},{label:"Offline",value:"0",key:3}],O=e=>(0,f.jsx)(n.c,{src:e.url,icon:(0,f.jsx)(k.c,{}),style:{color:"#1a3353"},onClick:e.onClick});function L(){const{t:e}=(0,r.G)(),{activeMenu:l}=(0,c.w1)((e=>e.menu),c.G),i=(0,c.OY)(),[n,j]=(0,s.useState)(void 0),[p,_]=(0,s.useState)(null),{settings:y}=(0,c.w1)((e=>e.globalSettings),c.G),N=(0,v.c)(y),{delivery:w,loading:k}=(0,c.w1)((e=>e.deliveries),c.G);(0,g.c)((()=>{const e={page:1,perPage:100,online:"all"===n?void 0:n,"statuses[0]":"new","statuses[1]":"accepted","statuses[2]":"ready","statuses[3]":"on_a_way"};i((0,m.S)(e))}),[n]);return(0,s.useEffect)((()=>{null!==l&&void 0!==l&&l.refetch&&(i((0,m.S)({perPage:100,"statuses[0]":"new","statuses[1]":"accepted","statuses[2]":"ready","statuses[3]":"on_a_way"})),i((0,h.CO)(l)))}),[null===l||void 0===l?void 0:l.refetch]),(0,f.jsx)(a.default,{title:e("deliveries"),className:"delivery",extra:(0,f.jsx)(d.default,{options:M,defaultValue:"all",loading:k,onChange:e=>j(e),style:{width:"200px"}}),children:k?(0,f.jsx)(x.c,{}):(0,f.jsxs)(t.c,{gutter:8,children:[(0,f.jsx)(o.c,{span:18,children:(0,f.jsxs)("div",{className:"map-container",style:{height:"73vh",width:"100%"},children:[!!p&&(0,f.jsx)(a.default,{className:"map-user-card",children:(0,f.jsx)(b,{data:p,handleClose:()=>{_(null)}})}),(0,f.jsx)(G.c,{center:N,handleLoadMap:(e,l)=>{const i=w.map((e=>{var l,i;return{lat:Number((null===(l=e.delivery_man_setting)||void 0===l?void 0:l.location.latitude)||"0"),lng:Number((null===(i=e.delivery_man_setting)||void 0===i?void 0:i.location.longitude)||"0")}}));let s=new l.LatLngBounds;for(var n=0;n<i.length;n++)s.extend(i[n]);e.fitBounds(s)},children:w.map((e=>{var l,i,s,n;return(0,f.jsx)(O,{lat:Number((null===e||void 0===e||null===(l=e.delivery_man_setting)||void 0===l||null===(i=l.location)||void 0===i?void 0:i.latitude)||"0"),lng:Number((null===e||void 0===e||null===(s=e.delivery_man_setting)||void 0===s||null===(n=s.location)||void 0===n?void 0:n.longitude)||"0"),url:u.cd+e.img,onClick:()=>{_(e)}},e.id)}))})]})}),(0,f.jsx)(o.c,{span:6,children:(0,f.jsx)("div",{className:"order-list",style:{height:"75vh"},children:w.map(((e,l)=>(0,f.jsx)(C,{data:e},e.id+l)))})})]})})}}}]);