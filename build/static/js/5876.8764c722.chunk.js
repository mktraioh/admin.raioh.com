"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[5876],{15876:(e,r,a)=>{a.r(r),a.d(r,{default:()=>q});var s=a(99584),l=a(65732),i=a(68496),t=a(68768),d=a(10260),n=a(46712),o=a(10240),u=a(73568),m=a(2664),c=a(87228),v=a(23424),h=a(61072),p=a(32712),j=a(18896),f=a(42080),w=a(57325),x=a(65236),g=a(83072),b=a.n(g),y=a(40936),P=a(97884);function q(){var e,r;const{t:a}=(0,x.G)(),[g]=l.c.useForm(),[q,S]=(0,s.useState)(null),[I,_]=(0,s.useState)(!1),E=(0,v.i6)(),k=(0,p.w1)((e=>e.menu.activeMenu)),F=(0,p.OY)(),[M,N]=(0,s.useState)(null!==k&&void 0!==k&&null!==(e=k.data)&&void 0!==e&&e.image?[null===k||void 0===k||null===(r=k.data)||void 0===r?void 0:r.image]:[]);(0,s.useEffect)((()=>()=>{const e=g.getFieldsValue(!0);e.birthday=JSON.stringify(null===e||void 0===e?void 0:e.birthday),F((0,j.MH)({activeMenu:k,data:{...k.data,...e}}))}),[]);return(0,P.jsx)(i.default,{title:a("add.user"),children:(0,P.jsx)(l.c,{form:g,layout:"vertical",initialValues:{gender:"male",...k.data,...(()=>{var e,r;if(null===(e=k.data)||void 0===e||!e.birthday)return{};const a=JSON.parse(null===(r=k.data)||void 0===r?void 0:r.birthday);return{birthday:b()(a)}})()},onFinish:e=>{var r;_(!0);const s={firstname:e.firstname,lastname:e.lastname,email:e.user_email,phone:e.phone,birthday:b()(e.birthday).format("YYYY-MM-DD"),gender:e.gender,password_confirmation:e.password_confirmation,password:e.password,images:M[0]?[null===(r=M[0])||void 0===r?void 0:r.name]:void 0},l="users/user";f.c.create(s).then((()=>{h.m4.success(a("successfully.created")),F((0,j.MF)({...k,nextUrl:l})),E("/".concat(l)),F((0,w.qS)())})).catch((e=>S(e.response.data.params))).finally((()=>_(!1)))},children:(0,P.jsxs)(t.c,{gutter:12,children:[(0,P.jsx)(d.c,{span:24,children:(0,P.jsx)(l.c.Item,{rules:[{validator:()=>0===(null===M||void 0===M?void 0:M.length)?Promise.reject(new Error(a("required"))):Promise.resolve()}],label:a("avatar"),name:"images",children:(0,P.jsx)(y.c,{type:"users",imageList:M,setImageList:N,form:g,multiple:!1})})}),(0,P.jsx)(d.c,{span:12,children:(0,P.jsx)(l.c.Item,{label:a("firstname"),name:"firstname",help:null!==q&&void 0!==q&&q.firstname?q.firstname[0]:null,validateStatus:null!==q&&void 0!==q&&q.firstname?"error":"success",rules:[{validator:(e,r)=>r?r&&""===(null===r||void 0===r?void 0:r.trim())?Promise.reject(new Error(a("no.empty.space"))):r&&(null===r||void 0===r?void 0:r.trim().length)<2?Promise.reject(new Error(a("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(a("required")))}],children:(0,P.jsx)(n.default,{})})}),(0,P.jsx)(d.c,{span:12,children:(0,P.jsx)(l.c.Item,{label:"lastname",name:"lastname",help:null!==q&&void 0!==q&&q.lastname?q.lastname[0]:null,validateStatus:null!==q&&void 0!==q&&q.lastname?"error":"success",rules:[{validator:(e,r)=>r?r&&""===(null===r||void 0===r?void 0:r.trim())?Promise.reject(new Error(a("no.empty.space"))):r&&(null===r||void 0===r?void 0:r.trim().length)<2?Promise.reject(new Error(a("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(a("required")))}],children:(0,P.jsx)(n.default,{})})}),(0,P.jsx)(d.c,{span:12,children:(0,P.jsx)(l.c.Item,{label:a("phone"),name:"phone",help:null!==q&&void 0!==q&&q.phone?q.phone[0]:null,validateStatus:null!==q&&void 0!==q&&q.phone?"error":"success",rules:[{required:!0,message:a("required")}],children:(0,P.jsx)(o.c,{min:0,className:"w-100"})})}),(0,P.jsx)(d.c,{span:12,children:(0,P.jsx)(l.c.Item,{label:a("birthday"),name:"birthday",rules:[{required:!0,message:a("required")}],children:(0,P.jsx)(u.default,{className:"w-100",disabledDate:e=>b()().add(-18,"years")<=e,defaultPickerValue:b()().add(-18,"years")})})}),(0,P.jsx)(d.c,{span:12,children:(0,P.jsx)(l.c.Item,{label:a("gender"),name:"gender",rules:[{required:!0,message:a("required")}],children:(0,P.jsxs)(m.default,{picker:"dayTime",className:"w-100",children:[(0,P.jsx)(m.default.Option,{value:"male",children:a("male")}),(0,P.jsx)(m.default.Option,{value:"female",children:a("female")})]})})}),(0,P.jsx)(d.c,{span:12,children:(0,P.jsx)(l.c.Item,{label:a("email"),name:"user_email",help:null!==q&&void 0!==q&&q.email?q.email[0]:null,validateStatus:null!==q&&void 0!==q&&q.email?"error":"success",rules:[{required:!0,message:a("required")},{type:"email",message:a("invalid.email")}],children:(0,P.jsx)(n.default,{type:"email"})})}),(0,P.jsx)(d.c,{span:12,children:(0,P.jsx)(l.c.Item,{label:a("password"),name:"password",help:null!==q&&void 0!==q&&q.password?q.password[0]:null,validateStatus:null!==q&&void 0!==q&&q.password?"error":"success",rules:[{required:!0,message:a("required")},{validator:(e,r)=>r&&(null===r||void 0===r?void 0:r.toString().length)<6?Promise.reject(new Error(a("min.6.letters"))):Promise.resolve()}],normalize:e=>""===(null===e||void 0===e?void 0:e.trim())?null===e||void 0===e?void 0:e.trim():e,children:(0,P.jsx)(n.default.Password,{type:"password",className:"w-100"})})}),(0,P.jsx)(d.c,{span:12,children:(0,P.jsx)(l.c.Item,{label:a("password.confirmation"),help:null!==q&&void 0!==q&&q.password_confirmation?q.password_confirmation[0]:null,validateStatus:null!==q&&void 0!==q&&q.password_confirmation?"error":"success",name:"password_confirmation",dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:a("required")},e=>{let{getFieldValue:r}=e;return{validator:(e,s)=>s&&r("password")!==s?Promise.reject(a("two.passwords.dont.match")):Promise.resolve()}}],normalize:e=>""===(null===e||void 0===e?void 0:e.trim())?null===e||void 0===e?void 0:e.trim():e,children:(0,P.jsx)(n.default.Password,{type:"password"})})}),(0,P.jsx)(c.c,{type:"primary",htmlType:"submit",loading:I,children:a("save")})]})})})}}}]);