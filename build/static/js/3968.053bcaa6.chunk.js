"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[3968],{24692:(e,l,t)=>{t.d(l,{o:()=>d});var a=t(99584),n=t(2664),i=t(37728),s=t(97884);const d=e=>{let{fetchOptions:l,refetch:t=!1,...d}=e;const[c,o]=(0,a.useState)(!1),[r,u]=(0,a.useState)([]);return(0,s.jsx)(n.default,{labelInValue:!0,filterOption:!1,notFoundContent:c?(0,s.jsx)(i.c,{size:"small"}):"no results",...d,options:c?[]:r,onFocus:()=>{r.length&&!t||(o(!0),l().then((e=>{u(e),o(!1)})))}})}},84190:(e,l,t)=>{t.d(l,{u:()=>o});var a=t(99584),n=t(10876),i=t(37728),s=t(95976),d=t.n(s),c=t(97884);const o=e=>{let{fetchOptions:l,refetch:t=!1,debounceTimeout:s=400,...o}=e;const[r,u]=(0,a.useState)(!1),[v,p]=(0,a.useState)([]),m=(0,a.useMemo)((()=>d()((e=>{p([]),u(!0),l(e).then((e=>{p(e),u(!1)}))}),s)),[]);return(0,c.jsx)(n.default,{showSearch:!0,labelInValue:!0,filterTreeNode:(e,l)=>{var t;return null===(t=l.label)||void 0===t?void 0:t.localeCompare(e)},treeLine:!0,onSearch:e=>m(e),treeData:r?[]:v,treeDefaultExpandAll:!0,onFocus:()=>{v.length&&!t||(u(!0),l().then((e=>{p(e),u(!1)})))},notFoundContent:r?(0,c.jsx)(i.c,{size:"small"}):"no results",...o})}},1428:(e,l,t)=>{t.d(l,{c:()=>o});t(99584);var a=t(87228),n=t(59424),i=t(61072),s=t(65236),d=t(75088),c=t(97884);function o(e){let{size:l="",onClick:t,type:o="default",...r}=e;const{t:u}=(0,s.G)(),{isDemo:v}=(0,d.c)();return(0,c.jsx)(a.c,{size:l,icon:(0,c.jsx)(n.c,{}),onClick:e=>{v?i.m4.warning(u("cannot.work.demo")):t(e)},type:o,...r})}},424:(e,l,t)=>{t.d(l,{c:()=>o});var a=t(99584),n=t(79416),i=t(32712),s=t(51840),d=t(48376),c=t(97884);const o=()=>{const e=(0,i.OY)(),{languages:l,defaultLang:t}=(0,i.w1)((e=>e.formLang),i.G);(0,a.useEffect)((()=>{d.c.getAllActive().then((l=>{let{data:t}=l;e((0,s.Up)(t)),e((0,s.uY)(t.find((e=>1===e.default)).locale))}))}),[]);return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(n.cp.Group,{value:t,onChange:l=>{let{target:{value:t}}=l;e((0,s.uY)(t))},className:"float-right",buttonStyle:"solid",children:null===l||void 0===l?void 0:l.map((e=>(0,c.jsx)(n.cp.Button,{value:e.locale,children:e.title},e.id)))})})}},71376:(e,l,t)=>{t.d(l,{g:()=>o});var a=t(99584),n=t(95976),i=t.n(n),s=t(2664),d=t(37728),c=t(97884);const o=e=>{let{fetchOptions:l,debounceTimeout:t=400,onClear:n,...o}=e;const[r,u]=(0,a.useState)(!1),[v,p]=(0,a.useState)([]),m=(0,a.useMemo)((()=>i()((e=>{p([]),u(!0),l(e).then((e=>{p(e),u(!1)}))}),t)),[l,t]);return(0,c.jsx)(s.default,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:m,onClear:()=>{m(""),n&&n()},notFoundContent:r?(0,c.jsx)(d.c,{size:"small"}):"no results",...o,options:v,onFocus:()=>{m("")}})}},74968:(e,l,t)=>{t.d(l,{c:()=>a});const a=function(e){let l=[],t=e.length-1;return function a(n,i){for(let d=0,c=null===(s=e[i])||void 0===s?void 0:s.length;d<c;d++){var s;let c=n.slice(0);c.push(e[i][d]),i===t?l.push(c):a(c,i+1)}}([],0),l}},56384:(e,l,t)=>{function a(e,l){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"title";const a=e.map((e=>({[e.locale]:""===l["".concat(t,"[").concat(e.locale,"]")]?void 0:l["".concat(t,"[").concat(e.locale,"]")]})));return Object.assign({},...a)}t.d(l,{c:()=>a})},54572:(e,l,t)=>{t.d(l,{c:()=>n});var a=t(99584);function n(e,l){const[t,n]=(0,a.useState)(e);return(0,a.useEffect)((()=>{const t=setTimeout((()=>{n(e)}),l);return()=>{clearTimeout(t)}}),[e,l]),t}},35924:(e,l,t)=>{t.d(l,{c:()=>n});var a=t(33012);const n={getAll:e=>a.c.get("rest/brands/paginate",{params:e}),getById:(e,l)=>a.c.get("rest/brands/".concat(e),{params:l})}},37784:(e,l,t)=>{t.d(l,{c:()=>n});var a=t(33012);const n={getAll:e=>a.c.get("dashboard/seller/categories/paginate",{params:e}),getById:(e,l)=>a.c.get("dashboard/seller/categories/".concat(e),{params:l}),search:e=>a.c.get("dashboard/seller/categories/search",{params:e}),paginateSelect:e=>a.c.get("dashboard/seller/categories/select-paginate",{params:e})}},89736:(e,l,t)=>{t.d(l,{c:()=>n});var a=t(33012);const n={getAll:e=>a.c.get("dashboard/seller/units/paginate",{params:e}),getById:(e,l)=>a.c.get("dashboard/seller/units/".concat(e),{params:l})}},76224:(e,l,t)=>{t.d(l,{c:()=>g});var a=t(99584),n=t(65732),i=t(95884),s=t(87228),d=t(46712),c=t(65236),o=t(424),r=t(32712),u=t(90388),v=t(61072),p=t(32764),m=t(56384),h=t(77180),x=t(97884);function g(e){let{modal:l,handleCancel:t,onSuccess:g}=e;const[j]=n.c.useForm(),{t:f}=(0,c.G)(),y=(0,r.OY)(),[b,k]=(0,a.useState)(!1),[q,I]=(0,a.useState)(!1),{languages:S,defaultLang:_}=(0,r.w1)((e=>e.formLang),r.G);(0,a.useEffect)((()=>{var e;null!==l&&void 0!==l&&l.id&&(e=l.id,I(!0),u.c.getGroupById(e).then((e=>{const l=e.data;j.setFieldsValue({...l,...w(l)})})).finally((()=>I(!1))))}),[l]);function w(e){if(!e)return{};const{translations:l}=e,t=S.map((e=>{var t;return{["title[".concat(e.locale,"]")]:null===(t=l.find((l=>l.locale===e.locale)))||void 0===t?void 0:t.title}}));return Object.assign({},...t)}return(0,x.jsx)(i.default,{title:null!==l&&void 0!==l&&l.id?f("edit.extra.group"):f("add.extra.group"),visible:!!l,onCancel:t,footer:[(0,x.jsx)(s.c,{type:"primary",onClick:()=>j.submit(),loading:b,children:f("save")},"save-button-group"),(0,x.jsx)(s.c,{type:"default",onClick:t,children:f("cancel")},"cancel-button-group")],children:q?(0,x.jsx)(h.c,{}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:"d-flex justify-content-end",children:(0,x.jsx)(o.c,{})}),(0,x.jsx)(n.c,{layout:"vertical",name:"extra-group",form:j,onFinish:e=>{const a={title:(0,m.c)(S,e),type:"text"};null!==l&&void 0!==l&&l.id?function(e,l){k(!0),u.c.updateGroup(e,l).then((()=>{v.m4.success(f("successfully.updated")),y((0,p.e4)()),t()})).finally((()=>k(!1)))}(null===l||void 0===l?void 0:l.id,a):function(e){k(!0),u.c.createGroup(e).then((()=>{v.m4.success(f("successfully.created")),t(),y((0,p.e4)()),g&&g()})).finally((()=>k(!1)))}(a)},children:S.map((e=>(0,x.jsx)(n.c.Item,{rules:[{required:e.locale===_,message:f("required")}],name:"title[".concat(e.locale,"]"),label:f("title"),hidden:e.locale!==_,children:(0,x.jsx)(d.default,{placeholder:f("title")})},"title"+e.locale)))})]})})}},54776:(e,l,t)=>{t.d(l,{c:()=>j});var a=t(65732),n=t(46712),i=t(95884),s=t(87228),d=t(99584),c=t(5332),o=t(65236),r=t(32712),u=t(61072),v=t(36136),p=t(49580),m=t(68392),h=t(90388),x=t(71376),g=t(97884);function j(e){let{modal:l,handleCancel:t,onSuccess:j,groupId:f}=e;const[y]=a.c.useForm(),{t:b}=(0,o.G)(),k=(0,r.OY)(),[q,I]=(0,d.useState)(!1),[S,_]=(0,d.useState)("text"),[w,C]=(0,d.useState)(null),[N,F]=(0,d.useState)(""),{extraGroups:G}=(0,r.w1)((e=>e.extraGroup),r.G);(0,d.useEffect)((()=>{if(null!==l&&void 0!==l&&l.id){var e,t,a;_(l.group.type);const n={...l,extra_group_id:{label:null===l||void 0===l||null===(e=l.group)||void 0===e||null===(t=e.translation)||void 0===t?void 0:t.title,value:null===l||void 0===l||null===(a=l.group)||void 0===a?void 0:a.id},value:l.value};switch(l.group.type){case"color":F(l.value);break;case"image":C((0,p.c)(l.value))}y.setFieldsValue(n)}f&&y.setFieldsValue({extra_group_id:{value:f}})}),[l,f]);function O(e,l){switch(e){case"color":return l.hex;case"text":return l;case"image":return l.name;default:return""}}return(0,g.jsx)(i.default,{title:null!==l&&void 0!==l&&l.id?b("edit.extra"):b("add.extra"),visible:!!l,onCancel:t,footer:[(0,g.jsx)(s.c,{type:"primary",onClick:()=>y.submit(),loading:q,children:b("save")}),(0,g.jsx)(s.c,{type:"default",onClick:t,children:b("cancel")})],children:(0,g.jsxs)(a.c,{name:"extra-form",layout:"vertical",form:y,onFinish:e=>{var a;console.log(e);const n={extra_group_id:null===e||void 0===e||null===(a=e.extra_group_id)||void 0===a?void 0:a.value,value:O(S,e.value)};null!==l&&void 0!==l&&l.id?((e,l)=>{I(!0),h.c.updateValue(e,l).then((()=>{u.m4.success(b("successfully.updated")),t(),k((0,m.g$)())})).finally((()=>I(!1)))})(l.id,n):(e=>{I(!0),h.c.createValue(e).then((()=>{u.m4.success(b("successfully.created")),t(),k((0,m.g$)()),j&&j()})).finally((()=>I(!1)))})(n)},children:[(0,g.jsx)(a.c.Item,{name:"extra_group_id",label:b("extra.group"),hidden:!!f,rules:[{required:!0,message:""}],children:(0,g.jsx)(x.g,{fetchOptions:async function(e){const l={perPage:10,active:1,search:e};return console.log("search => ",l),h.c.getAllGroups(l).then((e=>{var l;return null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.map((e=>{var l;return{value:null===e||void 0===e?void 0:e.id,label:null===e||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title,key:null===e||void 0===e?void 0:e.id}}))}))}})}),(0,g.jsx)(a.c.Item,{name:"value",label:b("value"),rules:[{required:!0,message:""}],children:(e=>{switch(e){case"color":return(0,g.jsx)(c.aS,{onChangeComplete:e=>F(e.hex),color:N,disableAlpha:!0});case"text":return(0,g.jsx)(n.default,{placeholder:b("enter.extra.value")});case"image":return(0,g.jsx)(v.c,{type:"extras",image:w,setImage:C,form:y,name:"value"});default:return""}})(S)})]})})}},48800:(e,l,t)=>{t.d(l,{c:()=>F});var a=t(99584),n=t(68496),i=t(65732),s=t(66296),d=t(87228),c=t(32712),o=t(31e3),r=t(18896),u=t(65236),v=t(23424),p=t(95884),m=t(59528),h=t(97836),x=t(69168),g=t(90388),j=t(54776),f=t(94936),y=t(97884);const b=e=>{let{extra:l,onClose:t,onSelect:n}=e;const{t:i}=(0,u.G)(),[s,c]=(0,a.useState)(!1),[o,r]=(0,a.useState)([]),[v,b]=(0,a.useState)([]),[k,q]=(0,a.useState)(!1);function I(e){c(!0),g.c.getGroupById(e).then((e=>r(e.data.extra_values.map((e=>{var l;return{label:e.value,value:e.id,group:null===(l=e.group.translation)||void 0===l?void 0:l.title}}))))).finally((()=>{c(!1)}))}return(0,a.useEffect)((()=>{var e;null!==l&&void 0!==l&&l.value&&(I(l.value),b((null===l||void 0===l||null===(e=l.values)||void 0===e?void 0:e.map((e=>e.value)))||[]))}),[null===l||void 0===l?void 0:l.value]),console.log(l),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(p.default,{visible:!!l,onCancel:t,footer:[(0,y.jsx)(d.c,{onClick:t,children:i("cancel")}),!s&&o.length>0&&(0,y.jsx)(d.c,{onClick:()=>{const e=[];o.forEach((l=>{v.forEach((t=>{l.value===t&&e.push(l)}))})),n(null===l||void 0===l?void 0:l.value,e),t()},type:"primary",children:i("save")})],children:[(0,y.jsx)(m.c.Group,{value:v,onChange:e=>{b(e)},className:"w-100",children:0!==(null===o||void 0===o?void 0:o.length)||s?(0,y.jsx)(x.cp,{dataSource:o,loading:s,renderItem:e=>(0,y.jsx)(x.cp.Item,{children:(0,y.jsx)(m.c,{value:e.value,children:null===e||void 0===e?void 0:e.label})})}):(0,y.jsx)(h.c,{})}),s?null:(0,y.jsx)(d.c,{type:"link",onClick:()=>q(!0),style:{paddingLeft:0},icon:(0,y.jsx)(f.c,{}),children:i("add.new.extra")})]}),l&&(0,y.jsx)(j.c,{modal:k,handleCancel:()=>q(!1),groupId:null===l||void 0===l?void 0:l.value,onSuccess:()=>I(null===l||void 0===l?void 0:l.value)})]})};var k=t(88992),q=t(46712),I=t(98044),S=t(77748),_=t(76224),w=t(54572);const C=e=>{let{open:l,onClose:t,selectedExtras:n,onSelect:i}=e;const{t:s}=(0,u.G)(),[c,o]=(0,a.useState)([]),[r,v]=(0,a.useState)(!1),[m,h]=(0,a.useState)(!1),[j,b]=(0,a.useState)(""),[k,C]=(0,a.useState)(),N=(0,w.c)(j,500),F=function(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;v(!0);const t={valid:!0,perPage:10,search:e,page:l};g.c.getAllGroups(t).then((e=>{const l=e.data.map((e=>{var l;return{id:e.id,label:null===(l=e.translation)||void 0===l?void 0:l.title,value:e.id,shop_id:e.shop_id}}));o(l),C(e.meta)})).finally((()=>v(!1)))};return(0,a.useEffect)((()=>{l&&F(N)}),[l,N]),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(p.default,{visible:l,onCancel:()=>{t(),b("")},footer:r?null:(0,y.jsx)(d.c,{type:"link",onClick:()=>h(!0),style:{paddingLeft:0},icon:(0,y.jsx)(f.c,{}),children:s("add.new.extra")}),children:[(0,y.jsx)(q.default,{className:"mt-3",value:j,onChange:e=>b(e.target.value)}),(0,y.jsx)(x.cp,{loading:r,dataSource:c.filter((e=>!(null!==n&&void 0!==n&&n.some((l=>l.id===e.id))))),renderItem:e=>(0,y.jsx)(x.cp.Item,{extra:null!==e&&void 0!==e&&e.shop_id?null:(0,y.jsx)(I.c,{children:s("admin")}),style:{cursor:"pointer"},onClick:()=>{i(e)},children:e.label})}),(0,y.jsx)(S.c,{onChange:e=>{F(N,e)},current:null===k||void 0===k?void 0:k.current_page,total:null===k||void 0===k?void 0:k.total})]}),(0,y.jsx)(_.c,{modal:m,handleCancel:()=>h(!1),onSuccess:()=>F()})]})};var N=t(61072);const F=e=>{var l;let{next:t,prev:p,isRequest:m,mode:h}=e;const{t:x}=(0,u.G)(),g=(0,c.OY)(),{uuid:j,id:f}=(0,v.W4)(),q=(0,v.i6)(),I=(0,v.IT)(),{activeMenu:S}=(0,c.w1)((e=>e.menu),c.G),[_,w]=(0,a.useState)(!1),[F,G]=(0,a.useState)(!1),[O,M]=(0,a.useState)((null===(l=S.data)||void 0===l?void 0:l.extras)||[]),[E,L]=(0,a.useState)(null),[T,W]=(0,a.useState)(!1),{settings:V}=(0,c.w1)((e=>e.globalSettings));return(0,y.jsx)(n.default,{children:(0,y.jsxs)(i.c,{layout:"vertical",initialValues:{...S.data},onFinish:()=>{var e;if(O.some((e=>{var l;return 0===(null===(l=e.values)||void 0===l?void 0:l.length)||!e.values})))return void N.m4.error(x("please.select.at.least.1.extra.value.for.each.extra"));const l=O.map((e=>e.value));l.sort(((e,l)=>e-l));let t=I.state;return m?(g((0,r.MH)({activeMenu:S,data:{...S.data,extras:O}})),void q("/seller/product-request/".concat(f,"?step=2"),{state:{generate:T}})):!T&&!I.state||"edit"!==h||null!==(e=I.state)&&void 0!==e&&e.create||"0"!==(null===V||void 0===V?void 0:V.product_auto_approve)?(w(!0),void o.c.extras(j,{extras:l}).then((()=>{var e;g((0,r.MH)({activeMenu:S,data:{...S.data,extras:O}})),q("/seller/product/".concat(j,"?step=2"),{state:{create:null===(e=I.state)||void 0===e?void 0:e.create}})})).finally((()=>w(!1)))):(I.state?t.extras=O:t={...S.data,extras:O},g((0,r.MH)({activeMenu:S,data:{...S.data,extras:O}})),void q("/seller/product/".concat(j,"?step=2"),{state:t}))},children:[(0,y.jsx)(C,{open:F,onClose:()=>G(!1),selectedExtras:O,onSelect:e=>{W(!0),M((l=>[...l,e])),G(!1)}}),(0,y.jsx)(b,{extra:E,onClose:()=>L(null),onSelect:(e,l)=>{W(!0),M((t=>t.map((t=>{if(t.value===e){const e=l.map((e=>{var l,t;const a=null===(l=S.data)||void 0===l||null===(t=l.extras)||void 0===t?void 0:t.flatMap((e=>e.values)).find((l=>l.value===e.value));return{...e,stock_id:null===a||void 0===a?void 0:a.stock_id}}));return{...t,values:e}}return t}))))}}),(0,y.jsx)(s.c,{className:"w-100",size:"middle",direction:"vertical",children:O.map((e=>{var l;return(0,y.jsxs)(s.c,{className:"w-100",direction:"vertical",children:[(0,y.jsxs)(s.c,{className:"w-100",wrap:!0,children:[(0,y.jsx)(d.c,{onClick:()=>L(e),ghost:!0,type:"primary",children:null===e||void 0===e?void 0:e.label}),null===e||void 0===e||null===(l=e.values)||void 0===l?void 0:l.map((l=>(0,y.jsxs)("div",{className:"extra-value",children:[null===l||void 0===l?void 0:l.label," ",(0,y.jsx)("button",{onClick:()=>{return t=e.value,a=l.value,W(!0),void M((e=>e.map((e=>e.value===t?{...e,values:(null===e||void 0===e?void 0:e.values.filter((e=>e.value!==a)))||[]}:e))));var t,a},type:"button",className:"extra-clear",children:(0,y.jsx)(k.OSk,{})})]},l.value)))]}),(0,y.jsx)(s.c,{className:"w-100",style:{justifyContent:"flex-end"},children:(0,y.jsx)(d.c,{danger:!0,onClick:()=>{return l=e,W(!0),void M((e=>e.filter((e=>e.id!==l.id))));var l},type:"text",children:x("delete")})})]},e.id)}))}),(0,y.jsx)(d.c,{onClick:()=>G(!0),className:"w-100 my-3",type:"dashed",children:x("add.extra")}),(0,y.jsxs)(s.c,{className:"mt-3",children:[(0,y.jsx)(d.c,{onClick:p,children:x("prev")}),(0,y.jsx)(d.c,{type:"primary",htmlType:"submit",loading:_,children:x("next")})]})]})})}},96756:(e,l,t)=>{t.d(l,{c:()=>b});var a=t(99584),n=t(68496),i=t(37564),s=t(68768),d=t(10260),c=t(66296),o=t(87228),r=t(37728),u=t(32712),v=t(23424),p=t(18896),m=t(63616),h=t(65236),x=t(31e3),g=t(52640),j=t(32788),f=t(61072),y=t(97884);const b=e=>{var l,t,b,k,q,I,S,_,w,C,N;let{prev:F,isRequest:G,mode:O}=e;const{t:M}=(0,h.G)(),{activeMenu:E}=(0,u.w1)((e=>e.menu),u.G),{defaultLang:L,languages:T}=(0,u.w1)((e=>e.formLang),u.G),W=(0,v.i6)(),{state:V}=(0,v.IT)(),A=(0,u.OY)(),[B,Y]=(0,a.useState)({}),[H,z]=(0,a.useState)(null),{uuid:P}=(0,v.W4)(),{params:R}=(0,u.w1)((e=>e.product),u.G),[U,D]=(0,a.useState)(!1),{settings:K}=(0,u.w1)((e=>e.globalSettings));function $(e){if(null===e||void 0===e||!e.translations)return{};const{translations:l}=e,t=T.map((e=>{var t,a;return{["title[".concat(e.locale,"]")]:null===(t=l.find((l=>l.locale===e.locale)))||void 0===t?void 0:t.title,["description[".concat(e.locale,"]")]:null===(a=l.find((l=>l.locale===e.locale)))||void 0===a?void 0:a.description}}));return Object.assign({},...t)}console.log(E.data,V);const X=(0,a.useCallback)((e=>{z(!0),x.c.getById(e).then((e=>{const l={...e.data,...$(e.data),properties:e.data.properties.map(((e,l)=>({id:l,["key[".concat(e.locale,"]")]:e.key,["value[".concat(e.locale,"]")]:e.value}))),translation:void 0,translations:void 0};Y(l)})).finally((()=>z(!1)))}),[P]);(0,a.useEffect)((()=>{G||X(P)}),[G,P]);const J=G?E.data:V;return H?(0,y.jsx)("div",{className:"d-flex justify-content-center align-items-center",children:(0,y.jsx)(r.c,{size:"large",className:"py-5"})}):(0,y.jsxs)(n.default,{children:[V||G?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(i.c,{title:M("product.info"),bordered:!0,children:[(0,y.jsx)(i.c.Item,{label:"".concat(M("title")," (").concat(L,")"),span:3,children:J["title[".concat(L,"]")]}),(0,y.jsx)(i.c.Item,{label:"".concat(M("description")," (").concat(L,")"),span:3,children:J["description[".concat(L,"]")]}),(0,y.jsx)(i.c.Item,{label:M("shop"),span:1.5,children:null===J||void 0===J||null===(l=J.shop)||void 0===l?void 0:l.translation.title}),(0,y.jsx)(i.c.Item,{label:M("category"),span:1.5,children:null===J||void 0===J||null===(t=J.category)||void 0===t?void 0:t.label}),(0,y.jsx)(i.c.Item,{label:M("brand"),span:1.5,children:null===J||void 0===J||null===(b=J.brand)||void 0===b?void 0:b.label}),(0,y.jsx)(i.c.Item,{label:M("unit"),span:1.5,children:null===J||void 0===J||null===(k=J.unit)||void 0===k?void 0:k.label}),(0,y.jsx)(i.c.Item,{label:M("images"),span:3,children:(0,y.jsx)(s.c,{gutter:12,children:null===J||void 0===J||null===(q=J.images)||void 0===q?void 0:q.map(((e,l)=>(0,y.jsx)(d.c,{children:(0,y.jsx)("img",{width:80,alt:"product",src:e.url})},"image"+l)))})}),(0,y.jsx)(i.c.Item,{label:M("tax"),children:null===J||void 0===J?void 0:J.tax}),(0,y.jsx)(i.c.Item,{label:M("min.quantity"),children:null===J||void 0===J?void 0:J.min_qty}),(0,y.jsx)(i.c.Item,{label:M("max.quantity"),children:null===J||void 0===J?void 0:J.max_qty})]}),null===J||void 0===J?void 0:J.stocks.map(((e,l)=>{var t;return e?(0,y.jsxs)(i.c,{bordered:!0,className:"mt-4",children:[(0,y.jsx)(i.c.Item,{label:M("price"),span:2,children:e.price}),(0,y.jsx)(i.c.Item,{label:M("quantity"),span:2,children:e.quantity}),null===e||void 0===e||null===(t=e.ids)||void 0===t?void 0:t.map(((e,l)=>(0,y.jsx)(i.c.Item,{label:null===J||void 0===J?void 0:J.extras[l].label,children:null===e||void 0===e?void 0:e.label},"extra"+l)))]},"desc"+l):""}))]}):(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(i.c,{title:M("product.info"),bordered:!0,children:[(0,y.jsx)(i.c.Item,{label:"".concat(M("title")," (").concat(L,")"),span:3,children:B["title[".concat(L,"]")]}),(0,y.jsx)(i.c.Item,{label:"".concat(M("description")," (").concat(L,")"),span:3,children:B["description[".concat(L,"]")]}),(0,y.jsx)(i.c.Item,{label:M("shop"),span:1.5,children:null===(I=B.shop)||void 0===I?void 0:I.translation.title}),(0,y.jsx)(i.c.Item,{label:M("category"),span:1.5,children:null===(S=B.category)||void 0===S?void 0:S.translation.title}),(0,y.jsx)(i.c.Item,{label:M("brand"),span:1.5,children:null===(_=B.brand)||void 0===_?void 0:_.title}),(0,y.jsx)(i.c.Item,{label:M("unit"),span:1.5,children:null===(w=B.unit)||void 0===w?void 0:w.translation.title}),(0,y.jsx)(i.c.Item,{label:M("images"),span:3,children:(0,y.jsx)(s.c,{gutter:12,children:null===B||void 0===B||null===(C=B.galleries)||void 0===C?void 0:C.map(((e,l)=>(0,y.jsx)(d.c,{children:(0,y.jsx)("img",{width:80,alt:"product",src:g.cd+e.path})},"image"+l)))})}),(0,y.jsx)(i.c.Item,{label:M("tax"),children:B.tax}),(0,y.jsx)(i.c.Item,{label:M("min.quantity"),children:B.min_qty}),(0,y.jsx)(i.c.Item,{label:M("max.quantity"),children:B.max_qty})]}),null===(N=B.stocks)||void 0===N?void 0:N.map(((e,l)=>e?(0,y.jsxs)(i.c,{bordered:!0,className:"mt-4",children:[(0,y.jsx)(i.c.Item,{label:M("price"),span:2,children:e.price}),(0,y.jsx)(i.c.Item,{label:M("quantity"),span:2,children:e.quantity}),e.extras.map(((e,l)=>{var t,a;return(0,y.jsx)(i.c.Item,{label:null===e||void 0===e||null===(t=e.group)||void 0===t||null===(a=t.translation)||void 0===a?void 0:a.title,children:null===e||void 0===e?void 0:e.value},"extra"+l)}))]},"desc"+l):""))]}),(0,y.jsx)("div",{className:"d-flex mt-4",children:(0,y.jsxs)(c.c,{children:[(0,y.jsx)(o.c,{onClick:F,children:M("prev")}),(0,y.jsx)(o.c,{loading:U,type:"primary",onClick:function(){const e="seller/products",l={...R};if(G&&E.data){D(!0);const t={id:E.data.model_id,type:"product",data:E.data};j.c.requestChangeUpdate(E.data.request_id,t).then((()=>{W("/".concat(e),{state:{tab:"request"}}),f.m4.success(M("successfully.updated")),A((0,p.MF)({...E,nextUrl:e})),A((0,m.cB)(l))})).finally((()=>{D(!1)}))}else if(V&&"edit"===O&&"0"===(null===K||void 0===K?void 0:K.product_auto_approve)){D(!0);const t={type:"product",id:E.data.product_id,data:V};j.c.requestChange(t).then((()=>{f.m4.success(M("successfully.updated")),A((0,p.MF)({...E,nextUrl:e})),A((0,m.cB)(l)),W("/".concat(e),{state:{tab:"request"}})})).finally((()=>{D(!1)}))}else A((0,p.MF)({...E,nextUrl:e})),A((0,m.cB)(l)),W("/".concat(e))},children:M("finish")})]})})]})}},79e3:(e,l,t)=>{t.d(l,{c:()=>I});var a=t(99584),n=t(65732),i=t(66296),s=t(87228),d=t(95884),c=t(68496),o=t(68768),r=t(10260),u=t(46712),v=t(15752),p=t(36668),m=t(59424),h=t(32712),x=t(424),g=t(97884);function j(e){let{editData:l,handleCancel:t,editProperty:i}=e;const[s]=n.c.useForm(),{defaultLang:c,languages:v}=(0,h.w1)((e=>e.formLang),h.G);return(0,a.useEffect)((()=>{s.setFieldsValue(l)}),[l]),(0,g.jsxs)(d.default,{title:"Edit product property",visible:!!l,okText:"Save",onCancel:t,onOk:()=>s.submit(),children:[(0,g.jsx)(o.c,{className:"mb-3",children:(0,g.jsx)(r.c,{span:24,children:(0,g.jsx)(x.c,{})})}),(0,g.jsx)(n.c,{form:s,layout:"vertical",onFinish:e=>{const t={...l,...e};i(t)},children:(0,g.jsxs)(o.c,{className:"mt-4",children:[(0,g.jsx)(r.c,{span:24,children:v.map((e=>(0,g.jsx)(n.c.Item,{label:"Key",name:"key[".concat(e.locale,"]"),rules:[{required:e.locale===c,message:""}],hidden:e.locale!==c,children:(0,g.jsx)(u.default,{})},"key"+e.locale)))}),(0,g.jsx)(r.c,{span:24,children:v.map((e=>(0,g.jsx)(n.c.Item,{label:"Value",name:"value[".concat(e.locale,"]"),rules:[{required:e.locale===c,message:""}],hidden:e.locale!==c,children:(0,g.jsx)(u.default,{})},"value"+e.locale)))})]})})]})}var f=t(18896),y=t(31e3),b=t(65236),k=t(23424),q=t(1428);const I=e=>{var l;let{next:t,prev:x,isRequest:I,mode:S}=e;const{t:_}=(0,b.G)(),w=(0,h.OY)(),C=(0,k.IT)(),{uuid:N}=(0,k.W4)(),F=(0,k.i6)(),{activeMenu:G}=(0,h.w1)((e=>e.menu),h.G),{defaultLang:O,languages:M}=(0,h.w1)((e=>e.formLang),h.G),[E]=n.c.useForm(),[L,T]=(0,a.useState)(null),[W,V]=(0,a.useState)((null===(l=G.data)||void 0===l?void 0:l.properties)||[]),[A,B]=(0,a.useState)(!1),Y=[{key:"2",title:_("key"),render:(e,l)=>l["key[".concat(O,"]")]},{key:"4",title:_("value"),render:(e,l)=>l["value[".concat(O,"]")]},{key:"5",title:_("options"),render:e=>(0,g.jsxs)(i.c,{children:[(0,g.jsx)(s.c,{type:"primary",icon:(0,g.jsx)(p.c,{}),onClick:()=>T(e)}),(0,g.jsx)(q.c,{type:"primary",danger:!0,icon:(0,g.jsx)(m.c,{}),onClick:()=>H(e)})]})}];(0,a.useEffect)((()=>{if(W.length&&N){const e=W;w((0,f.MH)({activeMenu:G,data:{...G.data,properties:e}}))}}),[W]);const H=e=>{d.default.confirm({title:_("delete.product"),okText:_("yes"),okType:"danger",onOk:()=>{V((l=>l.filter((l=>l.id!==e.id))))}})},z=()=>T(null);return(0,g.jsxs)(c.default,{children:[(0,g.jsx)(n.c,{layout:"vertical",form:E,onFinish:e=>{const l={...e,id:parseInt(50*Math.random())};V((e=>[...e,l])),E.resetFields()},children:(0,g.jsxs)(o.c,{gutter:12,className:"mb-3",children:[(0,g.jsx)(r.c,{span:8,children:M.map((e=>(0,g.jsx)(n.c.Item,{name:"key[".concat(e.locale,"]"),rules:[{required:e.locale===O,message:""}],hidden:e.locale!==O,children:(0,g.jsx)(u.default,{placeholder:_("key")})},"key"+e.locale)))}),(0,g.jsx)(r.c,{span:8,children:M.map((e=>(0,g.jsx)(n.c.Item,{name:"value[".concat(e.locale,"]"),rules:[{required:e.locale===O,message:""}],hidden:e.locale!==O,children:(0,g.jsx)(u.default,{placeholder:_("value")})},"value"+e.locale)))}),(0,g.jsx)(r.c,{span:4,children:(0,g.jsx)(s.c,{type:"primary",htmlType:"submit",children:_("save")})})]})}),(0,g.jsx)(v.c,{scroll:{x:!0},columns:Y,dataSource:W,pagination:!1,rowKey:e=>e.id}),(0,g.jsx)(j,{editData:L,handleCancel:z,editProperty:e=>{V((l=>l.map((l=>l.id===e.id?e:l)))),z()}}),(0,g.jsxs)(i.c,{className:"mt-4",children:[(0,g.jsx)(s.c,{onClick:x,children:_("prev")}),(0,g.jsx)(s.c,{type:"primary",onClick:function(){const e=function(){let e=[],l=[];return W.forEach((t=>{let a={},n={};M.forEach((e=>{a[e.locale]=t["key[".concat(e.locale,"]")],n[e.locale]=t["value[".concat(e.locale,"]")]})),e.push(a),l.push(n)})),{key:e,value:l}}();if(I)return w((0,f.MH)({activeMenu:G,data:{...G.data,properties:W,props:e}})),void t();let l=C.state;if(C.state&&"edit"===S)return l.properties=W,l.props=e,void F("/seller/product/".concat(N,"?step=4"),{state:C.state});B(!0),y.c.properties(N,e).then((()=>{t()})).finally((()=>B(!1)))},loading:A,children:_("next")})]})]})}},21203:(e,l,t)=>{t.d(l,{c:()=>I});var a=t(99584),n=t(65732),i=t(68496),s=t(68768),d=t(10260),c=t(46712),o=t(10240),r=t(87228),u=t(66296),v=t(32712),p=t(90388),m=t(31e3),h=t(24692),x=t(65236),g=t(23424),j=t(71376),f=t(77180),y=t(74968),b=t(59424),k=t(18896),q=t(97884);const I=e=>{var l;let{prev:t,next:I,isRequest:S,mode:_}=e;const{t:w}=(0,x.G)(),[C]=n.c.useForm(),N=(0,g.i6)(),F=(0,v.OY)(),{uuid:G}=(0,g.W4)(),{activeMenu:O}=(0,v.w1)((e=>e.menu),v.G),{myShop:M}=(0,v.w1)((e=>e.myShop),v.G),[E,L]=(0,a.useState)(null),T=(0,g.IT)(),{defaultLang:W}=(0,v.w1)((e=>e.formLang),v.G),{settings:V}=(0,v.w1)((e=>e.globalSettings)),{defaultCurrency:A}=(0,v.w1)((e=>e.currency),v.G),[B,Y]=(0,a.useState)(null),[H,z]=(0,a.useState)([]);function P(e){L(!0),m.c.getById(e).then((e=>{var l;!function(e,l){const t=(0,y.c)(e),a=t.map((e=>{var t,a;if(e.every((e=>"undefined"!==typeof e.stock_id))){var n;const t=null===l||void 0===l?void 0:l.find((l=>l.extras.every((l=>e.some((e=>e.value===l.id)))))),a=[];return null===t||void 0===t||null===(n=t.addons)||void 0===n||n.forEach((e=>{var l,t,n;e.product&&a.push({label:(null===e||void 0===e||null===(l=e.product)||void 0===l||null===(t=l.translation)||void 0===t?void 0:t.title)||(null===e||void 0===e?void 0:e.label),value:(null===e||void 0===e||null===(n=e.product)||void 0===n?void 0:n.id)||(null===e||void 0===e?void 0:e.value)})})),{price:(null===t||void 0===t?void 0:t.price)||0,quantity:(null===t||void 0===t?void 0:t.quantity)||0,sku:null===t||void 0===t?void 0:t.sku,stock_id:null===t||void 0===t?void 0:t.id,tax:(null===O||void 0===O?void 0:O.data.tax)||0,addons:a,...Object.assign({},...e.map(((e,l)=>{var t;return{["extras[".concat(l,"]")]:{label:e.label,value:e.value,group:null===(t=e.group.translation)||void 0===t?void 0:t.title}}})))}}return{price:void 0,quantity:0,tax:(null===(t=O.data)||void 0===t?void 0:t.tax)||0,sku:null===O||void 0===O||null===(a=O.data)||void 0===a?void 0:a.sku,addons:[],...Object.assign({},...e.map(((e,l)=>({["extras[".concat(l,"]")]:{label:e.label,value:e.value}}))))}}));let n=[];if(0===t.length&&0!==(null===l||void 0===l?void 0:l.length)){var i,s;const e=null===l||void 0===l?void 0:l.at(0),t=[];null===e||void 0===e||null===(i=e.addons)||void 0===i||i.forEach((e=>{var l,a,n;e.product&&t.push({label:(null===e||void 0===e||null===(l=e.product)||void 0===l||null===(a=l.translation)||void 0===a?void 0:a.title)||(null===e||void 0===e?void 0:e.label),value:(null===e||void 0===e||null===(n=e.product)||void 0===n?void 0:n.id)||(null===e||void 0===e?void 0:e.value)})})),n=[{price:(null===e||void 0===e?void 0:e.price)||0,quantity:(null===e||void 0===e?void 0:e.quantity)||0,sku:null===e||void 0===e?void 0:e.sku,tax:(null===(s=O.data)||void 0===s?void 0:s.tax)||0,addons:e?t:[]}]}var d,c;0===t.length&&0===(null===l||void 0===l?void 0:l.length)&&(n=[{price:void 0,quantity:0,sku:null===O||void 0===O||null===(d=O.data)||void 0===d?void 0:d.sku,tax:(null===(c=O.data)||void 0===c?void 0:c.tax)||0,addons:[]}]);const o=n.concat(a);z(l.map((e=>e.id))),C.setFieldsValue({stocks:o})}(null===O||void 0===O||null===(l=O.data.extras)||void 0===l?void 0:l.map((e=>e.values||[])),e.data.stocks)})).finally((()=>{L(!1)}))}const R=e=>{const l={search:e,addon:1,shop_id:M.id,active:1,"statuses[0]":"published","statuses[1]":"pending"};return m.c.getAll(l).then((e=>e.data.map((e=>{var l;return{label:null===e||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title,value:null===e||void 0===e?void 0:e.id}}))))};return(0,a.useEffect)((()=>{var e;if(S)if(null!==(e=T.state)&&void 0!==e&&e.generate){var l,t,a,n,i;const e=(0,y.c)(null===O||void 0===O||null===(l=O.data.extras)||void 0===l?void 0:l.map((e=>e.values||[]))),u=e.map((e=>{var l,t;if(e.every((e=>"undefined"!==typeof e.stock_id))){var a,n,i;const l=null===(a=O.data)||void 0===a||null===(n=a.actualStocks)||void 0===n?void 0:n.find((l=>l.extras.every((l=>e.some((e=>e.value===l.id)))))),t=[];return null===l||void 0===l||null===(i=l.addons)||void 0===i||i.forEach((e=>{var l,a,n;e.product&&t.push({label:(null===e||void 0===e||null===(l=e.product)||void 0===l||null===(a=l.translation)||void 0===a?void 0:a.title)||(null===e||void 0===e?void 0:e.label),value:(null===e||void 0===e||null===(n=e.product)||void 0===n?void 0:n.id)||(null===e||void 0===e?void 0:e.value)})})),{price:(null===l||void 0===l?void 0:l.price)||0,quantity:(null===l||void 0===l?void 0:l.quantity)||0,stock_id:null===l||void 0===l?void 0:l.id,sku:null===l||void 0===l?void 0:l.sku,tax:(null===O||void 0===O?void 0:O.data.tax)||0,addons:t,...Object.assign({},...e.map(((e,l)=>({["extras[".concat(l,"]")]:{label:e.label,value:e.value,group:O.data.extras[l].label}}))))}}return{price:0,quantity:0,tax:(null===(l=O.data)||void 0===l?void 0:l.tax)||0,sku:null===O||void 0===O||null===(t=O.data)||void 0===t?void 0:t.sku,addons:[],...Object.assign({},...e.map(((e,l)=>({["extras[".concat(l,"]")]:{label:e.label,value:e.value}}))))}}));let v=[];if(0===e.length&&0!==(null===(t=O.data)||void 0===t||null===(a=t.actualStocks)||void 0===a?void 0:a.length)){var s,d,c;const e=null===(s=O.data.actualStocks)||void 0===s?void 0:s.at(0),l=[];null===e||void 0===e||null===(d=e.addons)||void 0===d||d.forEach((e=>{var t,a,n;e.product&&l.push({label:(null===e||void 0===e||null===(t=e.product)||void 0===t||null===(a=t.translation)||void 0===a?void 0:a.title)||(null===e||void 0===e?void 0:e.label),value:(null===e||void 0===e||null===(n=e.product)||void 0===n?void 0:n.id)||(null===e||void 0===e?void 0:e.value)})})),v=[{price:(null===e||void 0===e?void 0:e.price)||0,quantity:(null===e||void 0===e?void 0:e.quantity)||0,sku:null===e||void 0===e?void 0:e.sku,tax:(null===(c=O.data)||void 0===c?void 0:c.tax)||0,addons:e?l:[]}]}var o,r;if(0===(null===e||void 0===e?void 0:e.length)&&0===(null===(n=O.data)||void 0===n||null===(i=n.actualStocks)||void 0===i?void 0:i.length))v=[{price:void 0,quantity:0,sku:null===O||void 0===O||null===(o=O.data)||void 0===o?void 0:o.sku,tax:(null===(r=O.data)||void 0===r?void 0:r.tax)||0,addons:[]}];const p=v.concat(u);z(O.data.actualStocks.map((e=>e.id))),C.setFieldsValue({stocks:p})}else{var u;const e=O.data.stocks.map((e=>{var l;return{price:e.price||0,quantity:e.quantity||0,tax:O.data.tax,sku:e.sku,stock_id:e.stock_id,...Object.assign({},...null===(l=e.ids)||void 0===l?void 0:l.map(((e,l)=>({["extras[".concat(l,"]")]:{label:e.label,value:e.value,group:e.group}}))))}}));z((null===(u=O.data)||void 0===u?void 0:u.delete_ids)||[]),C.setFieldsValue({stocks:e})}else P(G)}),[S,null===(l=T.state)||void 0===l?void 0:l.generate]),(0,q.jsx)(i.default,{title:O.data&&O.data["title[".concat(W,"]")]?"".concat(O.data["title[".concat(W,"]")]):"",children:E?(0,q.jsx)(f.c,{}):(0,q.jsxs)(n.c,{layout:"vertical",form:C,onFinish:e=>{var l,t,a;Y(!0);const{stocks:n}=e;let i,s=n.filter((e=>{var l,t;let{price:a,quantity:n}=e;return!(null!==O&&void 0!==O&&null!==(l=O.data)&&void 0!==l&&null!==(t=l.stocks)&&void 0!==t&&t.some((e=>{let{price:l,quantity:t}=e;return a===l||n===t})))}));var d;null===(l=O.data)||void 0===l||null===(t=l.extras)||void 0===t||!t.length?i=[{price:n[0].price,quantity:n[0].quantity,addons:n[0].addons?!(s.length>0||S||T.state)||null!==(d=T.state)&&void 0!==d&&d.create||"1"===(null===V||void 0===V?void 0:V.product_auto_approve)?n[0].addons.map((e=>e.value)):n[0].addons.map((e=>e)):[],stock_id:n[0].stock_id,sku:n[0].sku}]:i=n.map((e=>{var l,t,a,n,i,d;return{price:e.price,quantity:e.quantity,ids:!(s.length>0||S||T.state)||null!==(l=T.state)&&void 0!==l&&l.create||"0"!==(null===V||void 0===V?void 0:V.product_auto_approve)?null===(a=O.data)||void 0===a?void 0:a.extras.map(((l,t)=>e["extras[".concat(t,"]")].value)):null===(t=O.data)||void 0===t?void 0:t.extras.map(((l,t)=>e["extras[".concat(t,"]")])),addons:e.addons?!(s.length>0||S||T.state)||null!==(n=T.state)&&void 0!==n&&n.create||"1"===(null===V||void 0===V?void 0:V.product_auto_approve)?null===(d=e.addons)||void 0===d?void 0:d.map((e=>e.value)):null===(i=e.addons)||void 0===i?void 0:i.map((e=>e)):[],stock_id:e.stock_id,sku:e.sku}}));const c=H.filter(((e,l)=>{var t;return(null===(t=n[l])||void 0===t?void 0:t.stock_id)&&!n.some((l=>(null===l||void 0===l?void 0:l.stock_id)===e))}));let o=T.state;return S?(F((0,k.MH)({activeMenu:O,data:{...O.data,stocks:i,delete_ids:c}})),void I()):!(s.length>0||T.state)||"edit"!==_||null!==(a=T.state)&&void 0!==a&&a.create||"0"!==(null===V||void 0===V?void 0:V.product_auto_approve)?void m.c.stocks(G,{extras:i,delete_ids:c}).then((()=>I())).finally((()=>Y(!1))):(T.state?(o.stocks=i,o.delete_ids=c):o={...O.data,stocks:i,delete_ids:c},void N("/seller/product/".concat(G,"?step=3"),{state:o}))},children:[(0,q.jsx)(n.c.List,{name:"stocks",children:(e,l)=>{let{add:t,remove:a}=l;return(0,q.jsx)("div",{children:e.map(((e,l)=>{var t,i,u,v;return(0,q.jsxs)(s.c,{gutter:12,align:"middle",style:{flexWrap:"nowrap",overflowX:"auto"},hidden:!(null!==(t=O.data)&&void 0!==t&&null!==(i=t.extras)&&void 0!==i&&i.length)&&e.key,children:[null===(u=O.data)||void 0===u||null===(v=u.extras)||void 0===v?void 0:v.map(((e,t)=>(0,q.jsx)(d.c,{children:(0,q.jsx)(n.c.Item,{label:null===e||void 0===e?void 0:e.label,name:[l,"extras[".concat(t,"]")],rules:[{required:!0,message:w("required")}],children:(0,q.jsx)(h.o,{fetchOptions:()=>{return l=e.value,p.c.getGroupById(l).then((e=>e.data.extra_values.map((e=>({label:e.value,value:e.id})))));var l},className:"w-100",disabled:!0,style:{minWidth:200}})})},"extra"+e.value))),(0,q.jsx)(d.c,{children:(0,q.jsx)(n.c.Item,{label:w("addons"),name:[l,"addons"],rules:[{required:!1,message:w("required")}],children:(0,q.jsx)(j.g,{mode:"multiple",style:{minWidth:"300px"},fetchOptions:R,allowClear:!0})})}),(0,q.jsx)(d.c,{children:(0,q.jsx)(n.c.Item,{label:w("sku"),name:[l,"sku"],children:(0,q.jsx)(c.default,{className:"w-100",style:{minWidth:200}})})}),(0,q.jsx)(d.c,{children:(0,q.jsx)(n.c.Item,{label:w("quantity"),name:[l,"quantity"],rules:[{required:!0,message:w("required")}],children:(0,q.jsx)(o.c,{min:0,className:"w-100",style:{minWidth:200}})})}),(0,q.jsx)(d.c,{children:(0,q.jsx)(n.c.Item,{label:"".concat(w("price")," (").concat(null===A||void 0===A?void 0:A.symbol,")"),name:[l,"price"],rules:[{required:!0,message:w("requried")}],children:(0,q.jsx)(o.c,{min:0,className:"w-100",style:{minWidth:200}})})}),(0,q.jsxs)(d.c,{children:[(0,q.jsx)(n.c.Item,{label:w("tax"),name:[l,"tax"],children:(0,q.jsx)(o.c,{className:"w-100",disabled:!0,style:{minWidth:200},addonAfter:"%"})}),(0,q.jsx)(n.c.Item,{hidden:!0,label:w("id"),name:[l,"stock_id"],children:(0,q.jsx)(o.c,{className:"w-100",disabled:!0,style:{minWidth:200},addonAfter:"%"})})]})," ",(0,q.jsx)(d.c,{children:(0,q.jsx)(n.c.Item,{noStyle:!0,shouldUpdate:(l,t)=>l.stocks[e.name].price!==t.stocks[e.name].price,children:l=>{let{getFieldValue:t}=l;const a=t(["stocks",e.name,"tax"])||0,i=t(["stocks",e.name,"price"]),s=0===a?i:i*a/100+i;return(0,q.jsx)(n.c.Item,{label:"".concat(w("total.price")," (").concat(null===A||void 0===A?void 0:A.symbol,")"),children:(0,q.jsx)(o.c,{min:1,disabled:!0,value:s,className:"w-100",style:{minWidth:200}})})}})}),(0,q.jsx)(d.c,{children:e.key?(0,q.jsx)(r.c,{type:"primary",className:"mt-2",danger:!0,icon:(0,q.jsx)(b.c,{}),onClick:()=>{a(e.name)}}):""})]},e.key)}))})}}),(0,q.jsxs)(u.c,{className:"mt-4",children:[(0,q.jsx)(r.c,{onClick:t,children:w("prev")}),(0,q.jsx)(r.c,{type:"primary",htmlType:"submit",loading:!!B,children:w("next")})]})]})})}},80928:(e,l,t)=>{t.d(l,{c:()=>_});var a=t(99584),n=t(65732),i=t(68768),s=t(10260),d=t(68496),c=t(46712),o=t(10240),r=t(26012),u=t(87228),v=t(71376),p=t(35924),m=t(37784),h=t(32712),x=t(31e3),g=t(18896),j=t(89736),f=t(23424),y=t(65236),b=t(40936),k=t(82168),q=t(94936),I=t(84190),S=t(97884);const _=e=>{var l,t,_;let{next:w,action_type:C="",isRequest:N}=e;const{t:F}=(0,y.G)(),[G]=n.c.useForm(),O=(0,h.OY)(),{uuid:M}=(0,f.W4)(),E=(0,f.i6)(),[L,T]=(0,a.useState)(null),{activeMenu:W}=(0,h.w1)((e=>e.menu),h.G),{defaultLang:V,languages:A}=(0,h.w1)((e=>e.formLang),h.G),[B,Y]=(0,a.useState)(null!==(l=W.data)&&void 0!==l&&l.images?null===(t=W.data)||void 0===t?void 0:t.images:[]),[H,z]=(0,a.useState)(!1),[P,R]=(0,a.useState)(Boolean(null===(_=W.data)||void 0===_?void 0:_.kcal)),{settings:U}=(0,h.w1)((e=>e.globalSettings));const D=()=>{O((0,g.WC)({url:"seller/category/add",id:"seller/category/add",name:F("edit.category")})),E("/seller/category/add")};return(0,S.jsxs)(n.c,{layout:"vertical",form:G,initialValues:{active:!0,vegetarian:!0,...W.data},onFinish:e=>{var l,t,a,n;z(!0);const i={...e,active:Number(e.active),vegetarian:Number(e.vegetarian),brand_id:null===(l=e.brand)||void 0===l?void 0:l.value,category_id:(null===(t=e.category)||void 0===t?void 0:t.value)||e.category,shop_id:null===(a=e.shop)||void 0===a?void 0:a.value,unit_id:null===(n=e.unit)||void 0===n?void 0:n.value,kcal:P?String(e.kcal):void 0,carbs:P?String(e.carbs):void 0,protein:P?String(e.protein):void 0,fats:P?String(e.fats):void 0,images:B,brand:e.brand,category:e.category,shop:e.shop,unit:e.unit,tax:e.tax||0,...Object.assign({},...B.map(((e,l)=>({["images[".concat(l,"]")]:e.name}))))};var s,d,c,o;if(N)return O((0,g.MH)({activeMenu:W,data:{...W.data,...e,active:Number(e.active),vegetarian:Number(e.vegetarian),brand_id:null===(s=e.brand)||void 0===s?void 0:s.value,category_id:(null===(d=e.category)||void 0===d?void 0:d.value)||e.category,shop_id:null===(c=e.shop)||void 0===c?void 0:c.value,unit_id:null===(o=e.unit)||void 0===o?void 0:o.value,kcal:P?String(e.kcal):void 0,carbs:P?String(e.carbs):void 0,protein:P?String(e.protein):void 0,fats:P?String(e.fats):void 0,tax:e.tax||0,title:{...Object.assign({},...A.map((l=>({[l.locale]:e["title[".concat(l.locale,"]")]}))))},description:{...Object.assign({},...A.map((l=>({[l.locale]:e["description[".concat(l.locale,"]")]}))))},...Object.assign({},...B.map(((e,l)=>({["images[".concat(l,"]")]:e.name}))))}})),void w();let r=!1;if(Object.entries(e).forEach((e=>{var l,t;let[a,n]=e;var i,s,d,c;((a.startsWith("title")||a.startsWith("description"))&&W.data&&W.data[a]!==n&&(r=!0),"category"===a)&&((null===(i=W.data)||void 0===i||null===(s=i.category)||void 0===s?void 0:s.value)!==(null===n||void 0===n?void 0:n.value)&&(r=!0));"brand"===a&&((null===(d=W.data)||void 0===d||null===(c=d.brand)||void 0===c?void 0:c.value)!==(null===n||void 0===n?void 0:n.value)&&(r=!0));((null===B||void 0===B?void 0:B.find((e=>"done"===e.status)))||(null===B||void 0===B?void 0:B.length)!==(null===(l=W.data)||void 0===l||null===(t=l.images)||void 0===t?void 0:t.length))&&(r=!0)})),"edit"===C){const l={...i};if(l.title={...Object.assign({},...A.map((l=>({[l.locale]:e["title[".concat(l.locale,"]")]}))))},l.description={...Object.assign({},...A.map((l=>({[l.locale]:e["description[".concat(l.locale,"]")]}))))},(0,g.MH)({activeMenu:W,data:l}),r&&"0"===(null===U||void 0===U?void 0:U.product_auto_approve))return void function(e){E("/seller/product/".concat(M,"?step=1"),{state:e})}(l);!function(e,l){var t;l.product_id=null===(t=W.data)||void 0===t?void 0:t.product_id,x.c.update(M,l).then((e=>{let{data:t}=e;O((0,g.MH)({activeMenu:W,data:{...l,...null===W||void 0===W?void 0:W.data}})),w()})).catch((e=>T(e.response.data.params))).finally((()=>z(!1)))}(0,i)}else!function(e,l){x.c.create(l).then((l=>{let{data:t}=l;O((0,g.Ke)({id:"product-".concat(t.uuid),url:"seller/product/".concat(t.uuid),name:F("add.product"),data:e,refetch:!1})),E("/seller/product/".concat(t.uuid,"?step=1"),{state:{create:!0}})})).catch((e=>T(e.response.data.params))).finally((()=>z(!1)))}(e,i)},children:[(0,S.jsxs)(i.c,{gutter:12,children:[(0,S.jsx)(s.c,{span:16,children:(0,S.jsxs)(i.c,{children:[(0,S.jsx)(s.c,{span:24,children:(0,S.jsx)(d.default,{title:F("basic.info"),children:(0,S.jsxs)(i.c,{children:[(0,S.jsx)(s.c,{span:24,children:A.map((e=>(0,S.jsx)(n.c.Item,{label:F("name"),name:"title[".concat(e.locale,"]"),rules:[{required:e.locale===V,message:F("required")}],hidden:e.locale!==V,children:(0,S.jsx)(c.default,{})},"name"+e.id)))}),(0,S.jsx)(s.c,{span:24,children:A.map((e=>(0,S.jsx)(n.c.Item,{label:F("description"),name:"description[".concat(e.locale,"]"),rules:[{required:e.locale===V,message:F("required")}],hidden:e.locale!==V,children:(0,S.jsx)(k.c,{rows:3})},"description"+e.id)))})]})})}),(0,S.jsx)(s.c,{span:24,children:(0,S.jsx)(d.default,{title:F("pricing"),children:(0,S.jsxs)(i.c,{gutter:12,children:[(0,S.jsx)(s.c,{span:8,children:(0,S.jsx)(n.c.Item,{label:F("min.qty"),name:"min_qty",rules:[{required:!0,message:F("required")}],children:(0,S.jsx)(o.c,{min:0,className:"w-100"})})}),(0,S.jsx)(s.c,{span:8,children:(0,S.jsx)(n.c.Item,{label:F("max.qty"),name:"max_qty",rules:[{required:!0,message:F("required")}],children:(0,S.jsx)(o.c,{min:0,className:"w-100"})})}),(0,S.jsx)(s.c,{span:8,children:(0,S.jsx)(n.c.Item,{label:F("tax"),name:"tax",children:(0,S.jsx)(o.c,{min:0,className:"w-100",addonAfter:"%"})})})]})})}),(0,S.jsx)(s.c,{span:24,children:(0,S.jsx)(d.default,{title:F("additions"),children:(0,S.jsxs)(i.c,{gutter:12,children:[(0,S.jsx)(s.c,{span:6,children:(0,S.jsx)(n.c.Item,{label:F("active"),name:"active",valuePropName:"checked",children:(0,S.jsx)(r.c,{})})}),(0,S.jsx)(s.c,{span:6,children:(0,S.jsx)(n.c.Item,{label:F("vegetarian"),name:"vegetarian",valuePropName:"checked",children:(0,S.jsx)(r.c,{})})}),(0,S.jsx)(s.c,{span:6,children:(0,S.jsx)(n.c.Item,{label:F("nutrition.".concat(P?"on":"off")),valuePropName:"checked",children:(0,S.jsx)(r.c,{checked:P,onChange:e=>R(e)})})})]})})}),P&&(0,S.jsx)(s.c,{span:24,children:(0,S.jsx)(d.default,{title:F("nutritional.value.of.food"),children:(0,S.jsxs)(i.c,{gutter:12,children:[(0,S.jsx)(s.c,{span:6,children:(0,S.jsx)(n.c.Item,{rules:[{required:!0,message:F("required")}],label:F("kcal"),name:"kcal",children:(0,S.jsx)(o.c,{max:10,className:"w-100"})})}),(0,S.jsx)(s.c,{span:6,children:(0,S.jsx)(n.c.Item,{rules:[{required:!0,message:F("required")}],label:F("carbs"),name:"carbs",children:(0,S.jsx)(o.c,{max:10,className:"w-100"})})}),(0,S.jsx)(s.c,{span:6,children:(0,S.jsx)(n.c.Item,{rules:[{required:!0,message:F("required")}],label:F("protein"),name:"protein",children:(0,S.jsx)(o.c,{max:10,className:"w-100"})})}),(0,S.jsx)(s.c,{span:6,children:(0,S.jsx)(n.c.Item,{rules:[{required:!0,message:F("required")}],label:F("fats"),name:"fats",children:(0,S.jsx)(o.c,{max:10,className:"w-100"})})})]})})})]})}),(0,S.jsx)(s.c,{span:8,children:(0,S.jsxs)(i.c,{children:[(0,S.jsx)(s.c,{span:24,children:(0,S.jsx)(d.default,{title:F("organization"),children:(0,S.jsxs)(i.c,{children:[(0,S.jsx)(s.c,{span:24,children:(0,S.jsx)(n.c.Item,{label:F("category"),name:"category",rules:[{required:!0,message:F("required")}],children:(0,S.jsx)(I.u,{fetchOptions:function(e){const l={search:e||null,type:"main",lang:V,"statuses[0]":"pending","statuses[1]":"published",active:1};return m.c.paginateSelect(l).then((e=>e.data.map((e=>{var l,t;return{label:null===(l=e.translation)||void 0===l?void 0:l.title,value:e.id,key:e.id,disabled:e.children.length>0,children:null===(t=e.children)||void 0===t?void 0:t.map((e=>{var l;return{label:null===(l=e.translation)||void 0===l?void 0:l.title,value:e.id,key:e.id}}))}}))))},refetch:!0,dropdownRender:e=>(0,S.jsxs)(S.Fragment,{children:[e,(0,S.jsx)("div",{className:"p-1",children:(0,S.jsx)(u.c,{icon:(0,S.jsx)(q.c,{}),className:"w-100",onClick:D,children:F("add.category")})})]})})})}),(0,S.jsx)(s.c,{span:24,children:(0,S.jsx)(n.c.Item,{label:F("brand"),name:"brand",rules:[{required:!1,message:F("required")}],children:(0,S.jsx)(v.g,{fetchOptions:function(e){const l={search:e};return p.c.getAll(l).then((e=>e.data.map((e=>({label:e.title,value:e.id})))))}})})}),(0,S.jsx)(s.c,{span:24,children:(0,S.jsx)(n.c.Item,{label:F("unit"),name:"unit",rules:[{required:!0,message:F("required")}],children:(0,S.jsx)(v.g,{fetchOptions:function(e){const l={perPage:10,page:1,active:1,search:e};return j.c.getAll(l).then((e=>{let{data:l}=e;return function(e){return e.map((e=>{var l;return{label:null===(l=e.translation)||void 0===l?void 0:l.title,value:e.id}}))}(l)}))}})})}),(0,S.jsx)(s.c,{span:24,children:(0,S.jsx)(n.c.Item,{label:F("interval"),name:"interval",rules:[{required:!0,message:F("required")},{type:"number",min:1,message:F("should.be.more.than.1")}],children:(0,S.jsx)(o.c,{className:"w-100"})})}),(0,S.jsx)(s.c,{span:24,children:(0,S.jsx)(n.c.Item,{label:F("sku"),name:"sku",children:(0,S.jsx)(c.default,{className:"w-100"})})})]})})}),(0,S.jsx)(s.c,{span:24,children:(0,S.jsx)(d.default,{title:F("media"),children:(0,S.jsx)(i.c,{children:(0,S.jsx)(s.c,{span:24,children:(0,S.jsx)(n.c.Item,{name:"images",children:(0,S.jsx)(b.c,{type:"products",imageList:B,setImageList:Y,form:G,multiple:!0})})})})})})]})})]}),(0,S.jsx)(u.c,{type:"primary",htmlType:"submit",loading:H,children:F("next")})]})}},47868:(e,l,t)=>{t.d(l,{C:()=>a});const a=[{title:"food",content:"First-content"},{title:"food.extras",content:"Second-content"},{title:"stocks",content:"Third-content"},{title:"food.property",content:"Fourth-content"},{title:"finish",content:"Finish-content"}]}}]);