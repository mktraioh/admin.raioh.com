"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[9884],{99884:(e,t,a)=>{a.r(t),a.d(t,{default:()=>y});var l=a(99584),n=a(23424),i=a(61072),o=a(65732),c=a(68496),s=a(37728),r=a(32712),d=a(18896),u=a(17488),v=a(55452),p=a(65236),g=a(424),m=a(52640),h=a(71760),f=a.n(h),b=a(56384),_=a(85084),k=a(97884);const y=()=>{const{t:e}=(0,p.G)(),{activeMenu:t}=(0,r.w1)((e=>e.menu),r.G),a=(0,r.OY)(),[h]=o.c.useForm(),y=(0,n.i6)(),{id:x}=(0,n.W4)(),[j,M]=(0,l.useState)(!1),{languages:w}=(0,r.w1)((e=>e.formLang),r.G);function N(e){if(!e)return{};const{translations:t}=e,a=w.map((e=>{var a,l;return{["title[".concat(e.locale,"]")]:null===(a=t.find((t=>t.locale===e.locale)))||void 0===a?void 0:a.title,["description[".concat(e.locale,"]")]:null===(l=t.find((t=>t.locale===e.locale)))||void 0===l?void 0:l.description}}));return Object.assign({},...a)}(0,l.useEffect)((()=>()=>{const e=h.getFieldsValue(!0);a((0,d.MH)({activeMenu:t,data:e}))}),[]);return(0,l.useEffect)((()=>{var e;t.refetch&&(e=x,M(!0),v.c.getById(e).then((e=>{var l;let n=e.data;const i={...n,...N(n),...null===n||void 0===n?void 0:n.buttons,active:!(null===n||void 0===n||!n.active),image:[(o=null===n||void 0===n||null===(l=n.galleries[0])||void 0===l?void 0:l.path,{name:o,url:m.cd+o})]};var o;h.setFieldsValue(i),a((0,d.MH)({activeMenu:t,data:i}))})).finally((()=>{a((0,d.CO)(t)),M(!1)})))}),[t.refetch]),(0,k.jsx)(c.default,{title:e("edit.page"),className:"h-100",extra:(0,k.jsx)(g.c,{}),children:j?(0,k.jsx)("div",{className:"d-flex justify-content-center align-items-center",children:(0,k.jsx)(s.c,{size:"large",className:"py-5"})}):(0,k.jsx)(_.c,{form:h,handleSubmit:(l,n)=>{const o={images:n.map((e=>e.name)),active:Number(l.active),type:l.type,title:(0,b.c)(w,l,"title"),description:(0,b.c)(w,l,"description"),buttons:{google_play_button_link:null===l||void 0===l?void 0:l.google_play_button_link,app_store_button_link:null===l||void 0===l?void 0:l.app_store_button_link}},c="pages";return f()({method:"put",url:"".concat(m.QU,"dashboard/admin/pages/").concat(x),headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))},data:o,params:{}}).then((()=>{i.m4.success(e("successfully.updated")),(0,r.wN)((()=>{a((0,d.MF)({...t,nextUrl:c})),a((0,u.A)({}))})),y("/".concat(c))})).catch((e=>{var t,a;return i.m4.error(null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)}))}})})}}}]);