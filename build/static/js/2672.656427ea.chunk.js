"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[2672],{17408:(e,t,n)=>{n.d(t,{c:()=>s});var l=n(68496),a=n(24100),o=(n(99584),n(97884));const s=e=>{let{loading:t}=e;return(0,o.jsx)(l.default,{className:"order-card",children:(0,o.jsx)(a.c,{loading:t,avatar:!0,active:!0})})}},40748:(e,t,n)=>{n.d(t,{c:()=>d});var l=n(99584),a=n(46712),o=n(78816),s=n(6724),i=n(97884);function d(e){let{handleChange:t,defaultValue:n,resetSearch:d,...c}=e;const[r,u]=(0,l.useState)(n),v=(0,l.useMemo)((()=>(0,o.debounce)((e=>{t(e)}),800)),[t]);return(0,l.useEffect)((()=>{u(n)}),[d,n]),(0,i.jsx)(a.default,{value:r,onChange:e=>{u(e.target.value),v(e.target.value)},prefix:(0,i.jsx)(s.c,{}),...c})}},71376:(e,t,n)=>{n.d(t,{g:()=>c});var l=n(99584),a=n(95976),o=n.n(a),s=n(2664),i=n(37728),d=n(97884);const c=e=>{let{fetchOptions:t,debounceTimeout:n=400,onClear:a,...c}=e;const[r,u]=(0,l.useState)(!1),[v,p]=(0,l.useState)([]),h=(0,l.useMemo)((()=>o()((e=>{p([]),u(!0),t(e).then((e=>{p(e),u(!1)}))}),n)),[t,n]);return(0,d.jsx)(s.default,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:h,onClear:()=>{h(""),a&&a()},notFoundContent:r?(0,d.jsx)(i.c,{size:"small"}):"no results",...c,options:v,onFocus:()=>{h("")}})}},78288:(e,t,n)=>{n.d(t,{A:()=>l});const l={new:[1,2,3,4,5],accepted:[1,2,3,4,5],ready:[1,2,3,4,5],on_a_way:[1,2,3,4,5],delivered:[1,2,3,4,5],canceled:[1,2,3,4,5],cooking:[1,2,3,4,5]}},33131:(e,t,n)=>{n.d(t,{c:()=>l});n(52640);function l(e){if(null===e||void 0===e||!e.location)return{lat:47.4143302506288,lng:8.532059477976883};const t=e.location.split(", ");return{lat:Number(null===t||void 0===t?void 0:t[0]),lng:Number(null===t||void 0===t?void 0:t[1])}}},24968:(e,t,n)=>{function l(e){if(!e)return"0";return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$")+" "+Number(e).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")}n.d(t,{c:()=>l})},68400:(e,t,n)=>{n.d(t,{c:()=>a});var l=n(33012);const a={orderExport:(e,t)=>l.c.get("dashboard/user/export/order/".concat(e,"/pdf"),{params:t,responseType:"blob"})}},30432:(e,t,n)=>{n.d(t,{c:()=>y});var l=n(99584),a=n(68400),o=n(45976),s=n.n(o),i=n(77180),d=n(68496),c=n(95884),r=n(87228),u=n(68768),v=n(10260),p=n(65236),h=n(5008),m=n(23216),f=n(23424),x=n(97884);const g=d.default.Meta,y=e=>{let{id:t,handleCancel:n}=e;const[o,y]=(0,l.useState)(null),{t:j}=(0,p.G)(),b=(0,f.i6)();return(0,x.jsx)(x.Fragment,{children:o?(0,x.jsx)(i.c,{}):(0,x.jsx)(c.default,{visible:!!t,title:j("selected.download"),closable:!1,handleCancel:n,footer:[(0,x.jsx)(r.c,{type:"default",onClick:n,children:j("cancel")},"cancelBtn")],children:(0,x.jsxs)(u.c,{children:[(0,x.jsx)(v.c,{span:12,children:(0,x.jsx)(d.default,{title:j("download.pdf"),onClick:()=>function(e){y(!0),a.c.orderExport(e).then((t=>{s()(t,"invoice_".concat(e,".pdf"),"application/pdf"),n()})).finally((()=>y(!1)))}(t),className:"text-center cursor-pointer",children:(0,x.jsx)(g,{className:"d-flex align-items-center justify-content-center",title:(0,x.jsx)(h.$tL,{size:80})})})}),(0,x.jsx)(v.c,{span:12,children:(0,x.jsx)(d.default,{title:j("download.check"),onClick:()=>(e=>{b("/orders/generate-invoice/".concat(e))})(t),className:"text-center cursor-pointer",children:(0,x.jsx)(g,{className:"d-flex align-items-center justify-content-center",title:(0,x.jsx)(m.cLy,{size:85})})})})]})})})}},22672:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ve});var l=n(99584),a=n(73568),o=n(66296),s=n(87228),i=n(68496),d=n(23424),c=n(3952),r=n(48292),u=n(32712),v=n(18896),p=n(65236),h=n(68256),m=n(58896),f=n(89932),x=n(40748),g=n(21064),y=n(71376),j=n(42080),b=n(69720),C=n(95312),w=n(95300),k=n(30432),S=n(61072),_=n(77020),M=n(98016),D=n(46003),I=n(83072),O=n.n(I),N=n(48820),Y=n(52148),T=n(35480),E=n(98044),P=n(79100),A=n(97884);const F=e=>{let{children:t,title:n,name:l,isDropDisabled:a,total:s=0,loading:i=!1,reloadOrder:d}=e;const{t:c}=(0,p.G)();return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(T.c,{message:(0,A.jsxs)(o.c,{children:[(0,A.jsx)(Y.c,{size:20,style:{cursor:"pointer"},spin:i,onClick:d}),c(n),(0,A.jsx)(E.c,{children:i?(0,A.jsx)(Y.c,{spin:!0}):s})]}),className:"mb-4 ".concat(l),style:{textAlign:"center",fontSize:16,textTransform:"capitalize"}}),(0,A.jsx)(P.SS,{droppableId:l,isDropDisabled:a,children:e=>(0,A.jsx)("div",{ref:e.innerRef,className:"h-screen",style:{opacity:a?.6:1},children:(0,A.jsxs)(A.Fragment,{children:[t,e.placeholder]})})})]})};var G=n(37728),z=n(44720),B=n(86524),L=n(78596),H=n(78152),V=n(51668),K=n(87104),q=n(59424),R=n(11168),U=n(98948),W=n(24100),Q=n(91612),$=n(69168),J=n(24968),Z=n(29416),X=n(75088);const{Meta:ee}=i.default,te=e=>{var t,n,l,a,s,d,c,r,u,v,h;let{data:m,goToShow:f,loading:x,setLocationsMap:g,setId:y,setIsModalVisible:j,setText:b,setDowloadModal:C,setTabType:w}=e;const k=[{title:"Client",icon:(0,A.jsx)(z.c,{}),data:"".concat((null===(t=m.user)||void 0===t?void 0:t.firstname)||"-"," ").concat((null===(n=m.user)||void 0===n?void 0:n.lastname)||"-")},{title:"Deliveryman",icon:(0,A.jsx)(B.c,{}),data:"".concat((null===(l=m.deliveryman)||void 0===l?void 0:l.firstname)||"-"," ").concat((null===(a=m.deliveryman)||void 0===a?void 0:a.lastname)||"-")},{title:"Amount",icon:(0,A.jsx)(L.c,{}),data:(0,J.c)(null===m||void 0===m?void 0:m.total_price,null===(s=m.currency)||void 0===s?void 0:s.symbol)},{title:"Payment type",icon:(0,A.jsx)(H.c,{}),data:(null===(d=m.transaction)||void 0===d||null===(c=d.payment_system)||void 0===c?void 0:c.tag)||"-"},{title:"Payment status",icon:(0,A.jsx)(V.c,{}),data:(null===(r=m.transaction)||void 0===r?void 0:r.status)||"-"},{title:"Delivery date",icon:(0,A.jsx)(K.c,{}),data:O()(null===m||void 0===m?void 0:m.delivery_date).format("YYYY-MM-DD")||"-"},{title:"Created at",icon:(0,A.jsx)(K.c,{}),data:O()(null===m||void 0===m?void 0:m.created_at).format("YYYY-MM-DD")||"-"}],{t:_}=(0,p.G)(),{isDemo:M}=(0,X.c)(),D=[(0,A.jsx)(Z.Sum,{size:20,onClick:e=>{e.stopPropagation(),g(m.id)}}),(0,A.jsx)(q.c,{onClick:e=>{M?S.m4.warning(_("cannot.work.demo")):(e.stopPropagation(),y([m.id]),j(!0),b(!0),w(m.status))}}),(0,A.jsx)(R.c,{onClick:e=>{e.stopPropagation(),C(m.id)}}),(0,A.jsx)(U.c,{onClick:e=>{e.stopPropagation(),f(m)}})];return(0,A.jsx)(i.default,{actions:D,className:"order-card",children:(0,A.jsxs)(W.c,{loading:x,avatar:!0,active:!0,children:[(0,A.jsx)(ee,{avatar:(0,A.jsx)(Q.c,{src:null===m||void 0===m||null===(u=m.shop)||void 0===u?void 0:u.logo_img}),description:"#".concat(m.id),title:null===m||void 0===m||null===(v=m.shop)||void 0===v||null===(h=v.translation)||void 0===h?void 0:h.title}),(0,A.jsx)($.cp,{itemLayout:"horizontal",dataSource:k,renderItem:(e,t)=>(0,A.jsx)($.cp.Item,{children:(0,A.jsxs)(o.c,{children:[null===e||void 0===e?void 0:e.icon,"".concat(null===e||void 0===e?void 0:e.title,":  ").concat(null===e||void 0===e?void 0:e.data)]})},t)})]})})};var ne=n(50392),le=n(27613),ae=n(78288),oe=n(17408),se=n(77180);const ie=e=>{let{goToEdit:t,goToShow:n,fetchOrderAllItem:a,fetchOrders:o,setLocationsMap:s,setId:i,setIsModalVisible:d,setText:c,setDowloadModal:r,type:v,setTabType:p}=e;const h=(0,u.OY)(),{statusList:f,loading:x}=(0,u.w1)((e=>e.orderStatus),u.G),g=null===f||void 0===f?void 0:f.map((e=>null===e||void 0===e?void 0:e.name)),{items:y}=(0,u.w1)((e=>e.orders),u.G),j=(0,u.w1)((e=>e.orders),u.G),[b,C]=(0,l.useState)(""),[w,k]=(0,l.useState)({}),[M,D]=(0,l.useState)({}),I=e=>{if(!e.destination)return;var t,n;e.destination&&w.source.droppableId!==e.destination.droppableId&&(t=e.draggableId,n={status:e.destination.droppableId},_.c.updateStatus(t,n).then((e=>{S.m4.success("#".concat(t," order status changed"))})));const l={...y},a=l[e.source.droppableId],[o,s]=((e,t)=>{const n=Array.from(e),[l]=n.splice(t,1);return[l,n]})(a,e.source.index);l[e.source.droppableId]=s;const i=l[e.destination.droppableId];l[e.destination.droppableId]=((e,t,n)=>{const l=Array.from(e);return l.splice(t,0,n),l})(i,e.destination.index,o),h((0,m.Q1)(l)),D(null)},O=e=>(0!==e||M!==g.length-1)&&!!Boolean(M>e);(0,l.useEffect)((()=>{h((0,m.Ah)()),a()}),[v]);return(0,A.jsx)(A.Fragment,{children:x?(0,A.jsx)("div",{children:(0,A.jsx)(se.c,{})}):(0,A.jsx)(P._y,{onDragEnd:I,onDragStart:e=>{const t=g.findIndex((t=>t===e.source.droppableId));k(e),D(t)},children:(0,A.jsx)("div",{className:"order-board",children:null===g||void 0===g?void 0:g.map(((e,l)=>{var a,u,v,f;return(0,A.jsx)("div",{className:"dnd-column",children:(0,A.jsx)(F,{title:e,onDragEnd:I,name:e,isDropDisabled:O(l),total:null===(a=y[e])||void 0===a?void 0:a.length,loading:j[e].loading,reloadOrder:()=>(e=>{h((0,m.M5)(e)),o({status:e})})(e),children:(0,A.jsxs)(ne.cp,{onScroll:t=>((e,t)=>{const n=e.target.lastChild,l=e.target.clientHeight+e.target.scrollTop;n&&l>n.offsetTop+n.clientHeight+19.9&&j[t].meta.last_page>j[t].meta.current_page&&!j[t].loading&&(C(t),o({page:j[t].meta.current_page+1,perPage:5,status:t}))})(t,e),autoHeight:!0,autoHeightMin:"75vh",autoHeightMax:"75vh",autoHide:!0,id:e,children:[Boolean(j[e].loading&&!(null!==(u=y[e])&&void 0!==u&&u.length))?null===(f=ae.A[e])||void 0===f?void 0:f.map((()=>(0,A.jsx)(oe.c,{loading:!0}))):null===(v=y[e])||void 0===v?void 0:v.map(((e,l)=>(0,A.jsx)(A.Fragment,{children:(0,A.jsx)(P.wf,{draggableId:e.id.toString(),index:l,children:(l,a)=>(0,A.jsx)("div",{ref:l.innerRef,...l.draggableProps,...l.dragHandleProps,children:(0,A.jsx)(te,{data:e,goToEdit:t,goToShow:n,setLocationsMap:s,setId:i,setIsModalVisible:d,setText:c,setDowloadModal:r,setTabType:p})})},e.id)}))),j[e].loading&&e===b&&(0,A.jsx)(G.c,{indicator:(0,A.jsx)(le.c,{style:{fontSize:24},spin:!0})})]})})},e)}))})})})};var de=n(96328),ce=n(50428),re=n(52640);const{RangePicker:ue}=a.default;function ve(){var e,t,n,a;const I=(0,u.OY)(),Y=(0,d.i6)(),{t:T}=(0,p.G)(),{type:E}=(0,d.W4)(),{statusList:P}=(0,u.w1)((e=>e.orderStatus),u.G),[F,G]=(0,l.useState)(null),[z,B]=(0,l.useState)(null),[L,H]=(0,l.useState)(null),[V,K]=(0,l.useState)(!1),[q,R]=(0,l.useState)(null),[U,W]=(0,l.useState)(null),{setIsModalVisible:Q}=(0,l.useContext)(M.e),{activeMenu:$}=(0,u.w1)((e=>e.menu),u.G),[J,Z]=(0,l.useState)(null),[X,ee]=(0,l.useState)(null),[te,ne]=(0,l.useState)(!1),[le,ae]=(0,l.useState)(null),oe=null===$||void 0===$?void 0:$.data,se={search:null!==oe&&void 0!==oe&&oe.search?oe.search:void 0,perPage:(null===oe||void 0===oe?void 0:oe.perPage)||5,page:(null===oe||void 0===oe?void 0:oe.page)||1,user_id:null===oe||void 0===oe?void 0:oe.client_id,status:"deleted_at"!==(null===oe||void 0===oe?void 0:oe.role)&&(null===oe||void 0===oe?void 0:oe.role),shop_id:null!==(null===(e=$.data)||void 0===e?void 0:e.shop_id)?null===(t=$.data)||void 0===t?void 0:t.shop_id:null,delivery_type:"scheduled"!==E?E:void 0,delivery_date_from:"scheduled"===E?O()().add(1,"day").format("YYYY-MM-DD"):void 0,date_from:(null===le||void 0===le||null===(n=le[0])||void 0===n?void 0:n.format("YYYY-MM-DD"))||void 0,date_to:(null===le||void 0===le||null===(a=le[1])||void 0===a?void 0:a.format("YYYY-MM-DD"))||void 0};(0,h.c)((()=>{I((0,m.Ah)()),me()}),[oe,le]);const ve=(e,t)=>{(0,u.wN)((()=>{I((0,m.Ah)()),I((0,v.MH)({activeMenu:$,data:{...oe,[t]:e}}))}))};const pe=()=>{G(null),R(null),B(null),H(null)};const he=e=>{var t,n,l,a;const o={...e,delivery_type:"scheduled"!==E?E:void 0,delivery_date_from:"scheduled"===E?O()().add(1,"day").format("YYYY-MM-DD"):void 0,search:null!==oe&&void 0!==oe&&oe.search?oe.search:void 0,user_id:null===oe||void 0===oe?void 0:oe.client_id,status:null===e||void 0===e?void 0:e.status,shop_id:null!==(null===(t=$.data)||void 0===t?void 0:t.shop_id)?null===(n=$.data)||void 0===n?void 0:n.shop_id:null,date_from:(null===le||void 0===le||null===(l=le[0])||void 0===l?void 0:l.format("YYYY-MM-DD"))||void 0,date_to:(null===le||void 0===le||null===(a=le[1])||void 0===a?void 0:a.format("YYYY-MM-DD"))||void 0};switch(null===e||void 0===e?void 0:e.status){case"new":I((0,m.Iz)(o));break;case"accepted":I((0,m.OA)(o));break;case"ready":I((0,m.QJ)(o));break;case"on_a_way":I((0,m.SE)(o));break;case"delivered":I((0,m.AT)(o));break;case"canceled":I((0,m.mM)(o));break;case"cooking":I((0,m.YL)(o));break;default:console.log("Sorry, we are out of")}},me=()=>{he({status:"new"}),he({status:"accepted"}),he({status:"ready"}),he({status:"on_a_way"}),he({status:"delivered"}),he({status:"canceled"}),he({status:"cooking"})};return(0,l.useEffect)((()=>{null!==$&&void 0!==$&&$.refetch&&(I((0,m.Gc)(se)),I((0,v.CO)($)),I((0,f.GI)()),I((0,f._c)()))}),[null===$||void 0===$?void 0:$.refetch]),(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)(o.c,{className:"w-100 justify-content-end mb-3",children:[(0,A.jsx)(de.c,{listType:"orders-board"}),(0,A.jsx)(s.c,{type:"primary",icon:(0,A.jsx)(c.c,{}),onClick:()=>{I((0,g.Qm)()),I((0,v.sN)({id:"pos.system_01",url:"pos-system",name:"pos.system"})),Y("/pos-system")},style:{width:"100%"},children:T("add.order")})]}),(0,A.jsx)(i.default,{children:(0,A.jsxs)(o.c,{wrap:!0,className:"order-filter",size:[8,15],children:[(0,A.jsx)(x.c,{defaultValue:null===oe||void 0===oe?void 0:oe.search,resetSearch:!(null!==oe&&void 0!==oe&&oe.search),placeholder:T("search"),handleChange:e=>ve(e,"search")}),(0,A.jsx)(y.g,{placeholder:T("select.shop"),fetchOptions:async function(e){const t={search:e,status:"approved"};return N.c.getAll(t).then((e=>{let{data:t}=e;return t.map((e=>{var t;return{label:null===(t=e.translation)||void 0===t?void 0:t.title,value:e.id}}))}))},style:{width:"100%"},onClear:()=>I((0,m.Ah)()),onSelect:e=>ve(e.value,"shop_id"),onDeselect:()=>ve(null,"shop_id"),allowClear:!0,value:null===oe||void 0===oe?void 0:oe.shop_id}),(0,A.jsx)(y.g,{placeholder:T("select.client"),fetchOptions:async function(e){const t={search:e,perPage:10};return j.c.search(t).then((e=>{let{data:t}=e;return t.map((e=>({label:"".concat(e.firstname," ").concat(e.lastname),value:e.id})))}))},onSelect:e=>ve(e.value,"client_id"),onDeselect:()=>ve(null,"client_id"),style:{width:"100%"},value:null===oe||void 0===oe?void 0:oe.client_id}),(0,A.jsx)(ue,{defaultValue:le,onChange:e=>{ve(JSON.stringify(e),"data_time"),ae(e)},disabledDate:e=>e&&e>O()().endOf("day"),allowClear:!0,style:{width:"100%"}}),(0,A.jsxs)(s.c,{onClick:()=>{K(!0),_.c.export(se).then((e=>{const t=re.sp+e.data.file_name;window.location.href=t})).finally((()=>K(!1)))},loading:V,style:{width:"100%"},children:[(0,A.jsx)(ce.qhB,{className:"mr-2"}),T("export")]}),(0,A.jsx)(s.c,{icon:(0,A.jsx)(r.c,{}),onClick:()=>{(0,u.wN)((()=>{I((0,m.Ah)()),I((0,v.MH)({activeMenu:$,data:null}))})),me()},style:{width:"100%"},children:T("clear")})]})}),(0,A.jsx)(ie,{goToEdit:e=>{I((0,g.Qm)()),I((0,v.WC)({url:"order/".concat(e.id),id:"order_edit",name:T("edit.order")})),Y("/order/".concat(e.id))},goToShow:e=>{I((0,v.WC)({url:"order/details/".concat(e.id),id:"order_details",name:T("order.details")})),Y("/order/details/".concat(e.id))},fetchOrderAllItem:me,fetchOrders:he,setLocationsMap:B,setId:Z,setIsModalVisible:Q,setText:ee,setDowloadModal:H,type:E,setTabType:W}),F&&(0,A.jsx)(b.c,{orderDetails:F,handleCancel:pe,status:P}),q&&(0,A.jsx)(C.c,{orderDetails:q,handleCancel:pe}),z&&(0,A.jsx)(w.c,{id:z,handleCancel:pe}),L&&(0,A.jsx)(k.c,{id:L,handleCancel:pe}),(0,A.jsx)(D.c,{click:()=>{ne(!0);const e={...Object.assign({},...J.map(((e,t)=>({["ids[".concat(t,"]")]:e}))))};_.c.delete(e).then((()=>{I((0,m.Ah)()),S.m4.success(T("successfully.deleted")),Q(!1),me({status:U}),ee(null)})).finally((()=>ne(!1)))},text:T(X?"delete":"all.delete"),loading:te,setText:Z})]})}},96328:(e,t,n)=>{n.d(t,{c:()=>c});var l=n(79416),a=(n(99584),n(5008)),o=n(57608),s=n(23424),i=n(97884);const d=[{value:"orders-board",title:"Board",icon:(0,i.jsx)(o.EZ1,{size:20})},{value:"orders",title:"List",icon:(0,i.jsx)(a.GaN,{size:20})}],c=e=>{let{listType:t}=e;const{type:n}=(0,s.W4)(),a=(0,s.i6)();return(0,i.jsx)(l.cp.Group,{value:t,onChange:e=>{a("/".concat(e.target.value).concat(n?"/".concat(n):""))},className:"float-right",buttonStyle:"solid",children:null===d||void 0===d?void 0:d.map((e=>(0,i.jsx)(l.cp.Button,{value:e.value,children:(0,i.jsxs)("div",{className:"d-flex align-items-center",style:{gap:"10px"},children:[e.icon,e.title]})},e.value)))})}},95312:(e,t,n)=>{n.d(t,{c:()=>f});var l=n(99584),a=n(65732),o=n(95884),s=n(87228),i=n(68768),d=n(10260),c=n(32712),r=n(77020),u=n(18896),v=n(65236),p=n(42080),h=n(71376),m=n(97884);function f(e){var t,n,f;let{orderDetails:x,handleCancel:g}=e;const{t:y}=(0,v.G)(),{activeMenu:j}=(0,c.w1)((e=>e.menu),c.G),[b]=a.c.useForm(),C=(0,c.OY)(),[w,k]=(0,l.useState)(!1);return(0,m.jsx)(o.default,{visible:!!x,onCancel:g,footer:[(0,m.jsx)(s.c,{type:"primary",onClick:()=>b.submit(),loading:w,children:y("save")},"saveBtn"),(0,m.jsx)(s.c,{type:"default",onClick:g,children:y("cancel")},"cancelBtn")],children:(0,m.jsx)(a.c,{form:b,layout:"vertical",onFinish:e=>{const t={deliveryman:e.deliveryman.value};k(!0),r.c.updateDelivery(x.id,t).then((()=>{g(),C((0,u.A1)(j))})).finally((()=>k(!1)))},initialValues:{deliveryman:{label:x.deliveryman?(null===x||void 0===x||null===(t=x.deliveryman)||void 0===t?void 0:t.firstname)+" "+(null===x||void 0===x||null===(n=x.deliveryman)||void 0===n?void 0:n.lastname):null,value:x.deliveryman?null===x||void 0===x||null===(f=x.deliveryman)||void 0===f?void 0:f.id:null}},children:(0,m.jsx)(i.c,{gutter:12,children:(0,m.jsx)(d.c,{span:24,children:(0,m.jsx)(a.c.Item,{label:y("deliveryman"),name:"deliveryman",rules:[{required:!0,message:y("required")}],children:(0,m.jsx)(h.g,{className:"w-100",debounceTimeout:500,placeholder:y("select.shop"),fetchOptions:async function(e){const t={search:e.length?e:void 0,page:1,perPage:10,role:"deliveryman",shop_id:x.shop.id,exist_token:1};return p.c.getAll(t).then((e=>{let{data:t}=e;return t.map((e=>({label:e.firstname+" "+e.lastname||"no name",value:e.id})))}))},allowClear:!0})})})})})})}},69720:(e,t,n)=>{n.d(t,{c:()=>m});var l=n(99584),a=n(65732),o=n(95884),s=n(87228),i=n(68768),d=n(10260),c=n(2664),r=n(32712),u=n(65236),v=n(77020),p=n(18896),h=n(97884);function m(e){let{orderDetails:t,handleCancel:n,status:m}=e;const{activeMenu:f}=(0,r.w1)((e=>e.menu),r.G),[x]=a.c.useForm(),g=(0,r.OY)(),{t:y}=(0,u.G)(),[j,b]=(0,l.useState)(!1),[C,w]=(0,l.useState)(m);(0,l.useEffect)((()=>{const e=m.findIndex((e=>e.name===t.status));let n=[m[e],m[e+1],{name:"canceled",id:8,active:!0}];e<0&&(n=[m[e+1],"canceled"]),w(n)}),[t]);return(0,h.jsx)(o.default,{visible:!!t,title:t.title,onCancel:n,footer:[(0,h.jsx)(s.c,{type:"primary",onClick:()=>x.submit(),loading:j,children:y("save")},"save-form"),(0,h.jsx)(s.c,{type:"default",onClick:n,children:y("cancel")},"cansel-modal")],children:(0,h.jsx)(a.c,{form:x,layout:"vertical",onFinish:e=>{b(!0);const l={...e};v.c.updateStatus(t.id,l).then((()=>{n(),g((0,p.A1)(f))})).finally((()=>b(!1)))},initialValues:{status:t.status},children:(0,h.jsx)(i.c,{gutter:12,children:(0,h.jsx)(d.c,{span:24,children:(0,h.jsx)(a.c.Item,{label:y("status"),name:"status",rules:[{required:!0,message:y("required")}],children:(0,h.jsx)(c.default,{children:null===C||void 0===C?void 0:C.map((e=>(0,h.jsx)(c.default.Option,{value:null===e||void 0===e?void 0:e.name,children:y(null===e||void 0===e?void 0:e.name)},null===e||void 0===e?void 0:e.name)))})})})})})})}},95300:(e,t,n)=>{n.d(t,{c:()=>Y});var l=n(52800),a=n(67692),o=n(95884),s=n(87228),i=n(68496),d=n(68768),c=n(10260),r=n(98044),u=n(99584),v=n(65236),p=n(77020),h=n(77180),m=n(5008),f=n(32712),x=n(52640),g=n(97132),y=n(57236),j=n(33131),b=n(4736),C=n(6944),w=n(88992),k=n(23216),S=n(83072),_=n.n(S),M=n(97884);const{Step:D}=a.default,I=()=>(0,M.jsx)("img",{src:g,width:"50",alt:"Pin"}),O=()=>(0,M.jsx)("img",{src:y,width:"50",alt:"Pin"}),N=["blue","red","gold","volcano","cyan","lime"],Y=e=>{var t,n,g,y,S,Y;let{id:T,handleCancel:E}=e;const{t:P}=(0,v.G)(),[A,F]=(0,u.useState)(null),[G,z]=(0,u.useState)(null),[B,L]=(0,u.useState)(null),{settings:H}=(0,f.w1)((e=>e.globalSettings),f.G),V=(0,j.c)(H),[K,q]=(0,u.useState)(0),[R,U]=(0,u.useState)((0,j.c)(H)),[W,Q]=(0,u.useState)((0,j.c)(H)),[$,J]=(0,u.useState)([{id:0,name:"new",icon:(0,M.jsx)(b.c,{})},{id:1,name:"accepted",icon:(0,M.jsx)(m.IFj,{})},{id:2,name:"ready",icon:(0,M.jsx)(C.YxA,{})},{id:3,name:"on_a_way",icon:(0,M.jsx)(w.wJ$,{})},{id:4,name:"delivered",icon:(0,M.jsx)(w.W8K,{})}]);const{google_map_key:Z}=(0,f.w1)((e=>e.globalSettings.settings),f.G);(0,u.useEffect)((()=>{F(!0),p.c.getById(T).then((e=>{var t;let{data:n}=e;J("canceled"===n.status?[{id:1,name:"new",icon:(0,M.jsx)(b.c,{})},{id:5,name:"canceled",icon:(0,M.jsx)(k.uoq,{})}]:$),q("canceled"===n.status?1:null===(t=$.find((e=>e.name===n.status)))||void 0===t?void 0:t.id),L("canceled"===n.status?"error":"success"),z(n),Q({lat:n.location.latitude,lng:n.location.longitude}),U({lat:n.shop.location.latitude,lng:n.shop.location.longitude})})).finally((()=>{F(!1)}))}),[]);return(0,M.jsx)(M.Fragment,{children:(0,M.jsx)(o.default,{visible:!!T,title:P("show.locations"),onCancel:()=>E(),style:{minWidth:"80vw"},footer:[(0,M.jsx)(s.c,{type:"default",onClick:E,children:P("cancel")},"cancelBtn")],children:A?(0,M.jsx)(h.c,{}):(0,M.jsxs)(i.default,{children:[(0,M.jsx)(a.default,{current:K,status:B,className:"mb-5",children:null===$||void 0===$?void 0:$.map(((e,t)=>(0,M.jsx)(D,{title:P(e.name),icon:null===e||void 0===e?void 0:e.icon},e.id+t)))}),(0,M.jsxs)(d.c,{gutter:12,children:[(0,M.jsxs)(c.c,{span:12,children:[(0,M.jsxs)("h3",{children:[P("order.id")," #",null===G||void 0===G?void 0:G.id]}),(0,M.jsxs)("p",{children:[(0,M.jsx)(m.kIG,{})," ",_()(null===G||void 0===G?void 0:G.created_at).format("YYYY-MM-DD HH:mm")]}),(0,M.jsxs)("p",{children:[P("schedulet.at")," ",null===G||void 0===G?void 0:G.delivery_date]}),(0,M.jsxs)("span",{children:[(0,M.jsx)("strong",{children:null===G||void 0===G||null===(t=G.shop)||void 0===t||null===(n=t.translation)||void 0===n?void 0:n.title})," ",null===G||void 0===G||null===(g=G.details)||void 0===g?void 0:g.map(((e,t)=>{var n,l,a;return(0,M.jsx)(r.c,{color:N[t],children:null===e||void 0===e||null===(n=e.stock)||void 0===n||null===(l=n.product)||void 0===l||null===(a=l.translation)||void 0===a?void 0:a.title})}))]})]}),(0,M.jsxs)(c.c,{span:12,children:[(0,M.jsxs)("p",{children:[P("status")," ","new"===(null===G||void 0===G?void 0:G.status)?(0,M.jsx)(r.c,{color:"blue",children:P(null===G||void 0===G?void 0:G.status)}):"canceled"===(null===G||void 0===G?void 0:G.status)?(0,M.jsx)(r.c,{color:"error",children:P(null===G||void 0===G?void 0:G.status)}):(0,M.jsx)(r.c,{color:"cyan",children:P(null===G||void 0===G?void 0:G.status)})]}),(0,M.jsxs)("p",{children:[P("payment.method")," ",(0,M.jsx)("strong",{children:null===G||void 0===G||null===(y=G.transaction)||void 0===y||null===(S=y.payment_system)||void 0===S?void 0:S.tag})]}),(0,M.jsxs)("p",{children:[P("order.type")," ",(0,M.jsx)("strong",{children:null===G||void 0===G?void 0:G.delivery_type})]}),(0,M.jsxs)("p",{children:[P("payment.type")," ",(0,M.jsx)("strong",{children:null===G||void 0===G||null===(Y=G.transaction)||void 0===Y?void 0:Y.status})]})]}),(0,M.jsxs)(c.c,{span:24,className:"mt-5",children:[(0,M.jsx)("h4",{children:P("map")}),(0,M.jsx)("div",{className:"map-container",style:{height:400,width:"100%"},children:(0,M.jsxs)(l.cp,{bootstrapURLKeys:{key:x.KU||Z},defaultZoom:15,center:V,yesIWantToUseGoogleMapApiInternals:!0,options:{fullscreenControl:!1},onGoogleApiLoaded:e=>{let{map:t,maps:n}=e;const l=[R,W].map((e=>({lat:Number(e.lat||"0"),lng:Number(e.lng||"0")})));let a=new n.LatLngBounds;for(var o=0;o<l.length;o++)a.extend(l[o]);t.fitBounds(a)},children:[(0,M.jsx)(O,{lat:null===R||void 0===R?void 0:R.lat,lng:null===R||void 0===R?void 0:R.lng}),(0,M.jsx)(I,{lat:null===W||void 0===W?void 0:W.lat,lng:null===W||void 0===W?void 0:W.lng})]})})]})]})]})})})}},51668:(e,t,n)=>{n.d(t,{c:()=>d});var l=n(30800),a=n(99584);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M117 368h231v64H117zm559 0h241v64H676zm-264 0h200v64H412zm0 224h200v64H412zm264 0h241v64H676zm-559 0h231v64H117zm295-160V179h-64v666h64V592zm264-64V179h-64v666h64V432z"}}]},name:"borderless-table",theme:"outlined"};var s=n(47164),i=function(e,t){return a.createElement(s.c,(0,l.c)((0,l.c)({},e),{},{ref:t,icon:o}))};i.displayName="BorderlessTableOutlined";const d=a.forwardRef(i)},79416:(e,t,n)=>{n.d(t,{cp:()=>N});var l=n(52536),a=n(45072),o=n(99584),s=n(76436),i=n(46736),d=n.n(i),c=n(71072),r=n(93500),u=n(67648),v=o.createContext(null),p=v.Provider;const h=v;var m=o.createContext(null),f=m.Provider,x=function(e,t){var n={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(n[l]=e[l]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(l=Object.getOwnPropertySymbols(e);a<l.length;a++)t.indexOf(l[a])<0&&Object.prototype.propertyIsEnumerable.call(e,l[a])&&(n[l[a]]=e[l[a]])}return n},g=function(e,t){var n,i=o.useContext(h),v=o.useContext(m),p=o.useContext(u.MT),f=p.getPrefixCls,g=p.direction,y=o.useRef(),j=(0,c.qC)(t,y),b=(0,o.useContext)(r.A9).isFormItemInput,C=e.prefixCls,w=e.className,k=e.children,S=e.style,_=x(e,["prefixCls","className","children","style"]),M=f("radio",C),D="button"===((null===i||void 0===i?void 0:i.optionType)||v)?"".concat(M,"-button"):M,I=(0,a.c)({},_);i&&(I.name=i.name,I.onChange=function(t){var n,l;null===(n=e.onChange)||void 0===n||n.call(e,t),null===(l=null===i||void 0===i?void 0:i.onChange)||void 0===l||l.call(i,t)},I.checked=e.value===i.value,I.disabled=e.disabled||i.disabled);var O=d()("".concat(D,"-wrapper"),(n={},(0,l.c)(n,"".concat(D,"-wrapper-checked"),I.checked),(0,l.c)(n,"".concat(D,"-wrapper-disabled"),I.disabled),(0,l.c)(n,"".concat(D,"-wrapper-rtl"),"rtl"===g),(0,l.c)(n,"".concat(D,"-wrapper-in-form-item"),b),n),w);return o.createElement("label",{className:O,style:S,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave},o.createElement(s.c,(0,a.c)({},I,{type:"radio",prefixCls:D,ref:j})),void 0!==k?o.createElement("span",null,k):null)},y=o.forwardRef(g);y.displayName="Radio";const j=y;var b=n(32920),C=n(68576),w=n(62672),k=n(45792),S=o.forwardRef((function(e,t){var n=o.useContext(u.MT),s=n.getPrefixCls,i=n.direction,c=o.useContext(w.c),r=(0,C.c)(e.defaultValue,{value:e.value}),v=(0,b.c)(r,2),h=v[0],m=v[1];return o.createElement(p,{value:{onChange:function(t){var n=h,l=t.target.value;"value"in e||m(l);var a=e.onChange;a&&l!==n&&a(t)},value:h,disabled:e.disabled,name:e.name,optionType:e.optionType}},function(){var n,r=e.prefixCls,u=e.className,v=void 0===u?"":u,p=e.options,m=e.buttonStyle,f=void 0===m?"outline":m,x=e.disabled,g=e.children,y=e.size,b=e.style,C=e.id,w=e.onMouseEnter,S=e.onMouseLeave,_=s("radio",r),M="".concat(_,"-group"),D=g;p&&p.length>0&&(D=p.map((function(e){return"string"===typeof e||"number"===typeof e?o.createElement(j,{key:e.toString(),prefixCls:_,disabled:x,value:e,checked:h===e},e):o.createElement(j,{key:"radio-group-value-options-".concat(e.value),prefixCls:_,disabled:e.disabled||x,value:e.value,checked:h===e.value,style:e.style},e.label)})));var I=y||c,O=d()(M,"".concat(M,"-").concat(f),(n={},(0,l.c)(n,"".concat(M,"-").concat(I),I),(0,l.c)(n,"".concat(M,"-rtl"),"rtl"===i),n),v);return o.createElement("div",(0,a.c)({},(0,k.c)(e),{className:O,style:b,onMouseEnter:w,onMouseLeave:S,id:C,ref:t}),D)}())}));const _=o.memo(S);var M=function(e,t){var n={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(n[l]=e[l]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(l=Object.getOwnPropertySymbols(e);a<l.length;a++)t.indexOf(l[a])<0&&Object.prototype.propertyIsEnumerable.call(e,l[a])&&(n[l[a]]=e[l[a]])}return n},D=function(e,t){var n=o.useContext(u.MT).getPrefixCls,l=e.prefixCls,s=M(e,["prefixCls"]),i=n("radio",l);return o.createElement(f,{value:"button"},o.createElement(j,(0,a.c)({prefixCls:i},s,{type:"radio",ref:t})))};const I=o.forwardRef(D);var O=j;O.Button=I,O.Group=_;const N=O},76436:(e,t,n)=>{n.d(t,{c:()=>m});var l=n(45072),a=n(52536),o=n(31024),s=n(30800),i=n(87088),d=n(92920),c=n(62988),r=n(33504),u=n(99584),v=n(46736),p=n.n(v),h=function(e){(0,c.c)(n,e);var t=(0,r.c)(n);function n(e){var l;(0,i.c)(this,n),(l=t.call(this,e)).handleChange=function(e){var t=l.props,n=t.disabled,a=t.onChange;n||("checked"in l.props||l.setState({checked:e.target.checked}),a&&a({target:(0,s.c)((0,s.c)({},l.props),{},{checked:e.target.checked}),stopPropagation:function(){e.stopPropagation()},preventDefault:function(){e.preventDefault()},nativeEvent:e.nativeEvent}))},l.saveInput=function(e){l.input=e};var a="checked"in e?e.checked:e.defaultChecked;return l.state={checked:a},l}return(0,d.c)(n,[{key:"focus",value:function(){this.input.focus()}},{key:"blur",value:function(){this.input.blur()}},{key:"render",value:function(){var e,t=this.props,n=t.prefixCls,s=t.className,i=t.style,d=t.name,c=t.id,r=t.type,v=t.disabled,h=t.readOnly,m=t.tabIndex,f=t.onClick,x=t.onFocus,g=t.onBlur,y=t.onKeyDown,j=t.onKeyPress,b=t.onKeyUp,C=t.autoFocus,w=t.value,k=t.required,S=(0,o.c)(t,["prefixCls","className","style","name","id","type","disabled","readOnly","tabIndex","onClick","onFocus","onBlur","onKeyDown","onKeyPress","onKeyUp","autoFocus","value","required"]),_=Object.keys(S).reduce((function(e,t){return"aria-"!==t.substr(0,5)&&"data-"!==t.substr(0,5)&&"role"!==t||(e[t]=S[t]),e}),{}),M=this.state.checked,D=p()(n,s,(e={},(0,a.c)(e,"".concat(n,"-checked"),M),(0,a.c)(e,"".concat(n,"-disabled"),v),e));return u.createElement("span",{className:D,style:i},u.createElement("input",(0,l.c)({name:d,id:c,type:r,required:k,readOnly:h,disabled:v,tabIndex:m,className:"".concat(n,"-input"),checked:!!M,onClick:f,onFocus:x,onBlur:g,onKeyUp:b,onKeyDown:y,onKeyPress:j,onChange:this.handleChange,autoFocus:C,ref:this.saveInput,value:w},_)),u.createElement("span",{className:"".concat(n,"-inner")}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return"checked"in e?(0,s.c)((0,s.c)({},t),{},{checked:e.checked}):null}}]),n}(u.Component);h.defaultProps={prefixCls:"rc-checkbox",className:"",style:{},type:"checkbox",defaultChecked:!1,onFocus:function(){},onBlur:function(){},onChange:function(){},onKeyDown:function(){},onKeyPress:function(){},onKeyUp:function(){}};const m=h},57236:(e,t,n)=>{e.exports=n.p+"static/media/shop.46d7a94ca800c711764a.png"},97132:(e,t,n)=>{e.exports=n.p+"static/media/user.fbe7078c52acde79652d.jpg"}}]);