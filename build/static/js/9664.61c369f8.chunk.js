"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[9664],{9664:(e,t,a)=>{a.r(t),a.d(t,{default:()=>q});var d=a(99584),l=a(73568),n=a(84616),i=a(98044),s=a(87228),o=a(66296),r=a(37728),c=a(68496),u=a(15752),v=a(23424),h=a(36668),x=a(98948),m=a(59424),p=a(11168),y=a(32712),j=a(18896),f=a(65236),g=a(68256),_=a(58896),w=a(19576),k=a(40748),C=a(24968),S=a(69720),M=a(95312),b=a(53992),Y=a(29416),I=a(95300),D=a(30432),G=a(61072),P=a(1428),H=a(77020),K=a(98016),O=a(46003),z=a(52640),N=a(81560),R=a(83072),T=a.n(R),V=a(97884);const{RangePicker:W}=l.default,{TabPane:E}=n.default;function q(){var e,t;const a=(0,y.OY)(),l=(0,v.i6)(),{t:R}=(0,f.G)(),{defaultCurrency:q}=(0,y.w1)((e=>e.currency),y.G),[A,B]=(0,d.useState)(null),[F,J]=(0,d.useState)(null),[L,Q]=(0,d.useState)(null),[U,X]=(0,d.useState)(null),{id:Z}=(0,v.W4)(),$=[{id:7,name:"all"},{id:3,name:"ready"},{id:4,name:"on_a_way"},{id:5,name:"delivered"},{id:6,name:"canceled"}],[ee,te]=(0,d.useState)([{title:R("id"),is_show:!0,dataIndex:"id",key:"id",sorter:!0},{title:R("client"),is_show:!0,dataIndex:"user",key:"user",render:e=>(0,V.jsxs)("div",{children:[null===e||void 0===e?void 0:e.firstname," ",null===e||void 0===e?void 0:e.lastname]})},{title:R("number.of.products"),is_show:!0,dataIndex:"order_details_count",key:"order_details_count",render:e=>(0,V.jsxs)("div",{className:"text-lowercase",children:[e||0," ",R("products")]})},{title:R("status"),is_show:!0,dataIndex:"status",key:"status",render:(e,t)=>(0,V.jsxs)("div",{children:["new"===e?(0,V.jsx)(i.c,{color:"blue",children:R(e)}):"canceled"===e?(0,V.jsx)(i.c,{color:"error",children:R(e)}):(0,V.jsx)(i.c,{color:"cyan",children:R(e)}),"delivered"!==e&&"canceled"!==e?(0,V.jsx)(h.c,{onClick:()=>B(t)}):""]})},{title:R("deliveryman"),is_show:!0,dataIndex:"deliveryman",key:"deliveryman",render:(e,t)=>(0,V.jsx)("div",{children:"ready"===t.status&&"pickup"!==t.delivery_type?(0,V.jsx)(s.c,{type:"link",onClick:()=>X(t),children:(0,V.jsxs)(o.c,{children:[e?"".concat(e.firstname," ").concat(e.lastname):R("add.deliveryman"),(0,V.jsx)(h.c,{})]})}):(0,V.jsxs)("div",{children:[null===e||void 0===e?void 0:e.firstname," ",null===e||void 0===e?void 0:e.lastname]})})},{title:R("amount"),is_show:!0,dataIndex:"total_price",key:"total_price",render:e=>(0,C.c)(e,q.symbol)},{title:R("payment.type"),is_show:!0,dataIndex:"transaction",key:"transaction",render:e=>{var t;return R(null===e||void 0===e||null===(t=e.payment_system)||void 0===t?void 0:t.tag)||"-"}},{title:R("created.at"),is_show:!0,dataIndex:"created_at",key:"created_at"},{title:R("options"),is_show:!0,key:"options",render:(e,t)=>(0,V.jsxs)(o.c,{children:[(0,V.jsx)(s.c,{icon:(0,V.jsx)(Y.Sum,{}),onClick:()=>J(t.id)}),(0,V.jsx)(s.c,{icon:(0,V.jsx)(x.c,{}),onClick:()=>(e=>{a((0,j.WC)({url:"order/details/".concat(e.id),id:"order_details",name:R("order.details")})),l("/order/details/".concat(e.id))})(t)}),(0,V.jsx)(P.c,{icon:(0,V.jsx)(m.c,{}),onClick:()=>{se([t.id]),ae(!0),re(!0)}}),(0,V.jsx)(s.c,{icon:(0,V.jsx)(p.c,{}),onClick:()=>Q(t.id)})]})}]),{setIsModalVisible:ae}=(0,d.useContext)(K.e),[de,le]=(0,d.useState)(!1),{activeMenu:ne}=(0,y.w1)((e=>e.menu),y.G),[ie,se]=(0,d.useState)(null),[oe,re]=(0,d.useState)(null),[ce,ue]=(0,d.useState)(!1),{orders:ve,meta:he,loading:xe,params:me,statistic:pe}=(0,y.w1)((e=>e.orders),y.G),ye=null===ne||void 0===ne?void 0:ne.data;(0,g.c)((()=>{const e={search:null===ye||void 0===ye?void 0:ye.search,sort:null===ye||void 0===ye?void 0:ye.sort,column:null===ye||void 0===ye?void 0:ye.column,perPage:null===ye||void 0===ye?void 0:ye.perPage,page:null===ye||void 0===ye?void 0:ye.page,deliveryman:Z,date_from:null===ye||void 0===ye?void 0:ye.date_from,date_to:null===ye||void 0===ye?void 0:ye.date_to,status:"all"===(null===ye||void 0===ye?void 0:ye.status)||null===ye||void 0===ye?void 0:ye.status};a((0,_.Gc)(e))}),[null===ne||void 0===ne?void 0:ne.data]);const je=()=>{B(null),X(null),J(null),Q(null)};(0,d.useEffect)((()=>{if(null!==ne&&void 0!==ne&&ne.refetch){const e={status:null===ye||void 0===ye?void 0:ye.status,page:null===ye||void 0===ye?void 0:ye.page,perPage:10,type:"delivery",deliveryman:Z};a((0,_.Gc)(e)),a((0,j.CO)(ne))}}),[null===ne||void 0===ne?void 0:ne.refetch]);const fe={selectedRowKeys:ie,onChange:e=>{se(e)}};return(0,V.jsxs)("div",{children:[(0,V.jsx)(r.c,{spinning:xe,children:(0,V.jsx)(N.c,{data:pe})}),(0,V.jsxs)(c.default,{title:R("orders"),extra:(0,V.jsxs)(o.c,{wrap:!0,children:[(0,V.jsx)(W,{format:"YYYY-MM-DD",onChange:e=>{return t=e,void a((0,j.MH)({activeMenu:ne,data:{...ye,date_from:t?T()(null===t||void 0===t?void 0:t[0]).format("YYYY-MM-DD").toString():void 0,date_to:t?T()(null===t||void 0===t?void 0:t[1]).format("YYYY-MM-DD").toString():void 0}}));var t}}),(0,V.jsx)(P.c,{type:"danger",onClick:()=>{null===ie||0===ie.length?G.m4.warning(R("select.the.product")):(ae(!0),re(!1))},children:R("delete.all")}),(0,V.jsx)(s.c,{onClick:()=>{le(!0),H.c.export({type:"delivery",deliveryman:Z,date_from:null===ye||void 0===ye?void 0:ye.date_from,date_to:null===ye||void 0===ye?void 0:ye.date_to,status:"all"===(null===ye||void 0===ye?void 0:ye.status)||null===ye||void 0===ye?void 0:ye.status}).then((e=>{const t=z.sp+e.data.file_name;window.location.href=t})).finally((()=>le(!1)))},loading:de,children:R("export")}),(0,V.jsx)(b.c,{setColumns:te,columns:ee})]}),children:[(0,V.jsx)("div",{className:"mt-2 mb-4",children:(0,V.jsx)(k.c,{placeholder:R("search"),width:480,handleChange:e=>{return t=e,d="search",void a((0,j.MH)({activeMenu:ne,data:{...ye,[d]:t}}));var t,d},defaultValue:null===(e=ne.data)||void 0===e?void 0:e.search,resetSearch:!(null!==(t=ne.data)&&void 0!==t&&t.search)})}),(0,V.jsx)(n.default,{onChange:e=>{const t=e;a((0,j.MH)({activeMenu:ne,data:{...ye,status:t}}))},type:"card",activeKey:null===ye||void 0===ye?void 0:ye.status,children:$.map((e=>(0,V.jsx)(E,{tab:R(e.name)},e.name)))}),(0,V.jsx)(u.c,{scroll:{x:!0},rowSelection:fe,columns:null===ee||void 0===ee?void 0:ee.filter((e=>e.is_show)),dataSource:ve,loading:xe,pagination:{pageSize:me.perPage,page:me.page,total:he.total,defaultCurrent:me.page},rowKey:e=>e.id,onChange:function(e,t,d){const{pageSize:l,current:n}=e,{field:i,order:s}=d,o=(0,w.c)(s);a((0,j.MH)({activeMenu:ne,data:{...ne.data,perPage:l,page:n,column:i,sort:o}}))}}),A&&(0,V.jsx)(S.c,{orderDetails:A,handleCancel:je,status:$}),U&&(0,V.jsx)(M.c,{orderDetails:U,handleCancel:je}),F&&(0,V.jsx)(I.c,{id:F,handleCancel:je}),L&&(0,V.jsx)(D.c,{id:L,handleCancel:je}),(0,V.jsx)(O.c,{click:()=>{ue(!0);const e={...Object.assign({},...ie.map(((e,t)=>({["ids[".concat(t,"]")]:e}))))};H.c.delete(e).then((()=>{G.m4.success(R("successfully.deleted")),ae(!1),a((0,_.Gc)()),re(null),se(null)})).finally((()=>ue(!1)))},text:R(oe?"delete":"all.delete"),loading:ce,setText:se})]})]})}}}]);