"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[5020],{71376:(e,r,t)=>{t.d(r,{g:()=>s});var l=t(99584),o=t(95976),d=t.n(o),n=t(2664),i=t(37728),a=t(97884);const s=e=>{let{fetchOptions:r,debounceTimeout:t=400,onClear:o,...s}=e;const[u,c]=(0,l.useState)(!1),[v,h]=(0,l.useState)([]),p=(0,l.useMemo)((()=>d()((e=>{h([]),c(!0),r(e).then((e=>{h(e),c(!1)}))}),t)),[r,t]);return(0,a.jsx)(n.default,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:p,onClear:()=>{p(""),o&&o()},notFoundContent:u?(0,a.jsx)(i.c,{size:"small"}):"no results",...s,options:v,onFocus:()=>{p("")}})}},19576:(e,r,t)=>{function l(e){switch(e){case"ascend":return"asc";case"descend":return"desc"}}t.d(r,{c:()=>l})},24968:(e,r,t)=>{function l(e){if(!e)return"0";return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$")+" "+Number(e).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")}t.d(r,{c:()=>l})},75020:(e,r,t)=>{t.r(r),t.d(r,{default:()=>M});var l=t(99584),o=t(73568),d=t(68496),n=t(66296),i=t(15752),a=t(23424),s=t(32712),u=t(18896),c=t(65236),v=t(68256),h=t(19576),p=t(24968),_=t(71376),f=t(42080),m=t(83072),y=t.n(m),g=t(48820),w=t(55624),x=t(97884);const{RangePicker:Y}=o.default;function M(){var e,r,t,o,m,M,b;const{type:k}=(0,a.W4)(),j=(0,s.OY)(),D=(0,a.i6)(),{t:C}=(0,c.G)(),{defaultCurrency:I}=(0,s.w1)((e=>e.currency),s.G),S=[{title:C("order.id"),is_show:!0,dataIndex:"order_id",key:"order_id",sorter:!0,render:e=>(0,x.jsxs)("span",{className:"text-hover",onClick:()=>(e=>{j((0,u.WC)({url:"order/details/".concat(e),id:"order_details",name:C("order.details")})),D("/order/details/".concat(e))})(e),children:["#",e]})},{title:C(k),is_show:!0,dataIndex:"user",key:"user",render:(e,r)=>{const t=null===r||void 0===r?void 0:r.user;return(0,x.jsxs)("div",{children:[null===t||void 0===t?void 0:t.firstname," ",(null===t||void 0===t?void 0:t.lastname)||""]})}},{title:C("order.total_price"),is_show:!0,dataIndex:"transaction",key:"transaction",render:(e,r)=>{var t;null===e||void 0===e||e.status;return(0,x.jsx)("span",{children:(0,p.c)(null===r||void 0===r||null===(t=r.order)||void 0===t?void 0:t.total_price,I.symbol)})}},..."seller"===k?[{title:C("coupon.price"),is_show:!0,dataIndex:"coupon_sum_price",key:"coupon_sum_price",render:(e,r)=>{var t;return(0,p.c)(null===r||void 0===r||null===(t=r.order)||void 0===t?void 0:t.coupon_sum_price)}}]:[],..."seller"===k?[{title:C("total.cashback"),is_show:!0,dataIndex:"point_history_sum_price",key:"point_history_sum_price",render:(e,r)=>{var t;return(0,p.c)(null===r||void 0===r||null===(t=r.order)||void 0===t?void 0:t.point_history_sum_price)}}]:[],{title:C("delivery.fee"),is_show:!0,dataIndex:"delivery_fee",key:"delivery_fee",render:(e,r)=>{var t;return(0,p.c)(null===r||void 0===r||null===(t=r.order)||void 0===t?void 0:t.delivery_fee)}},..."seller"===k?[{title:C("service.fee"),is_show:!0,dataIndex:"service_fee",key:"service_fee",render:(e,r)=>{var t;return(0,p.c)(((null===r||void 0===r||null===(t=r.order)||void 0===t?void 0:t.service_fee)||0)+((null===r||void 0===r?void 0:r.order.commission_fee)||0))}}]:[],..."seller"===k?[{title:C("seller.fee"),is_show:!0,dataIndex:"seller_fee",key:"seller_fee",render:(e,r)=>{var t;return(0,p.c)(null===r||void 0===r||null===(t=r.order)||void 0===t?void 0:t.seller_fee)}}]:[],{title:C("payment.type"),is_show:!0,dataIndex:"transaction",key:"transaction",render:e=>{var r;return C(null===e||void 0===e||null===(r=e.payment_system)||void 0===r?void 0:r.tag)||"-"}}],{activeMenu:O}=(0,s.w1)((e=>e.menu),s.G),[P,A]=(0,l.useState)(y()().subtract(1,"month"),y()()),{completedList:F,loading:G,params:N,meta:z}=(0,s.w1)((e=>e.paymentToPartners),s.G),H=O.data,R={search:null===H||void 0===H?void 0:H.search,sort:null===H||void 0===H?void 0:H.sort,column:null===H||void 0===H?void 0:H.column,perPage:null===H||void 0===H?void 0:H.perPage,page:null===H||void 0===H?void 0:H.page,user_id:null===H||void 0===H?void 0:H.user_id,shop_id:null!==(null===(e=O.data)||void 0===e?void 0:e.shop_id)?null===(r=O.data)||void 0===r?void 0:r.shop_id:null,date_from:Array.isArray(P)?null===(t=P[0])||void 0===t?void 0:t.format("YYYY-MM-DD"):y()().subtract(1,"month").format("YYYY-MM-DD"),date_to:Array.isArray(P)?null===(o=P[1])||void 0===o?void 0:o.format("YYYY-MM-DD"):y()().format("YYYY-MM-DD"),type:k};(0,v.c)((()=>{j((0,w.wR)(R))}),[H,P,k]);const E=(e,r)=>{j((0,u.MH)({activeMenu:O,data:{...H,[r]:e}}))};return(0,l.useEffect)((()=>{null!==O&&void 0!==O&&O.refetch&&(j((0,w.wR)(R)),j((0,u.CO)(O)))}),[null===O||void 0===O?void 0:O.refetch]),(0,l.useEffect)((()=>()=>{j((0,u.MH)({activeMenu:O,data:{}}))}),[]),(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(d.default,{children:(0,x.jsx)("div",{className:"flex justify-content-space-between",children:(0,x.jsxs)(n.c,{wrap:!0,className:"order-filter",style:{flex:1,width:"100%"},children:[(0,x.jsx)(_.g,{placeholder:C("select.shop"),fetchOptions:async function(e){const r={search:e,status:"approved"};return g.c.getAll(r).then((e=>{let{data:r}=e;return r.map((e=>{var r;return{label:null===(r=e.translation)||void 0===r?void 0:r.title,value:e.id}}))}))},style:{width:"100%"},onSelect:e=>E(e.value,"shop_id"),onDeselect:()=>E(null,"shop_id"),allowClear:!0,value:null===H||void 0===H?void 0:H.shop_id}),(0,x.jsx)(_.g,{placeholder:C("select.user"),fetchOptions:async function(e){const r={search:e,perPage:10,role:k};return f.c.search(r).then((e=>{let{data:r}=e;return r.map((e=>({label:"".concat(e.firstname," ").concat(e.lastname),value:e.id})))}))},onSelect:e=>E(e.value,"user_id"),onDeselect:()=>E(null,"user_id"),style:{width:"100%"},value:null===H||void 0===H?void 0:H.user_id}),(0,x.jsx)(Y,{value:P,onChange:e=>{E((r=>{var t,l;return{...r,date_from:null===e||void 0===e||null===(t=e[0])||void 0===t?void 0:t.format("YYYY-MM-DD"),date_to:null===e||void 0===e||null===(l=e[1])||void 0===l?void 0:l.format("YYYY-MM-DD")}})),A(e)},disabledDate:e=>e&&e>y()().endOf("day"),style:{width:"100%"}})]})})}),(0,x.jsx)(d.default,{children:(0,x.jsx)(i.c,{scroll:{x:!0},columns:null===S||void 0===S?void 0:S.filter((e=>e.is_show)),dataSource:F,loading:G,pagination:{pageSize:N.perPage,page:(null===(m=O.data)||void 0===m?void 0:m.page)||1,total:null===z||void 0===z?void 0:z.total,defaultCurrent:null===(M=O.data)||void 0===M?void 0:M.page,current:null===(b=O.data)||void 0===b?void 0:b.page},rowKey:e=>e.id,onChange:function(e,r,t){const{pageSize:l,current:o}=e,{field:d,order:n}=t,i=(0,h.c)(n);j((0,u.MH)({activeMenu:O,data:{...H,perPage:l,page:o,column:d,sort:i}}))}})})]})}}}]);