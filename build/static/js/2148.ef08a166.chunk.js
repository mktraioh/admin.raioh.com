(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[2148],{24692:(e,l,t)=>{"use strict";t.d(l,{o:()=>d});var n=t(99584),s=t(2664),i=t(37728),a=t(97884);const d=e=>{let{fetchOptions:l,refetch:t=!1,...d}=e;const[o,c]=(0,n.useState)(!1),[r,u]=(0,n.useState)([]);return(0,a.jsx)(s.default,{labelInValue:!0,filterOption:!1,notFoundContent:o?(0,a.jsx)(i.c,{size:"small"}):"no results",...d,options:o?[]:r,onFocus:()=>{r.length&&!t||(c(!0),l().then((e=>{u(e),c(!1)})))}})}},89896:(e,l,t)=>{"use strict";t.d(l,{c:()=>m});var n=t(99584),s=t(8808),i=t(52640);const a=t.p+"static/media/pin.0e41858db80c699cd8a2.png";var d=t(71760),o=t.n(d);async function c(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.KU,t={latlng:"".concat(null===e||void 0===e?void 0:e.lat,",").concat(null===e||void 0===e?void 0:e.lng),key:l};return o().get("https://maps.googleapis.com/maps/api/geocode/json",{params:t}).then((e=>{var l;let{data:t}=e;return null===(l=t.results[0])||void 0===l?void 0:l.formatted_address})).catch((e=>"not found"))}var r=t(29416),u=t(61072),v=t(65236),p=t(97884);const m=(0,s.GoogleApiWrapper)({apiKey:i.KU})((function(e){const[l,t]=(0,n.useState)(),{t:d}=(0,v.G)(),o=async()=>{await navigator.geolocation.getCurrentPosition((function(e){const l={lat:e.coords.latitude,lng:e.coords.longitude};t(l)}),(function(e){u.m4.warning(d("turn.on.gps"))}))};(0,n.useEffect)((()=>{o()}),[]);const m=[{lat:Number(e.location.lat)||0,lng:Number(e.location.lng)||0}];for(var h=new e.google.maps.LatLngBounds,x=0;x<m.length;x++)h.extend(m[x]);return(0,p.jsxs)("div",{className:"map-container",style:{height:400,width:"100%"},children:[(0,p.jsx)("button",{className:"map-button",type:"button",onClick:()=>{o(),l&&(async l=>{const t={lat:null===l||void 0===l?void 0:l.lat,lng:null===l||void 0===l?void 0:l.lng};e.setLocation(t);const n=await c(t,i.KU);e.setAddress(n)})(l)},children:(0,p.jsx)(r.mEX,{})}),(0,p.jsx)(s.Map,{cursor:"pointer",onClick:async(l,t,n)=>{const{latLng:s}=n,a={lat:s.lat(),lng:s.lng()};e.setLocation(a);const d=await c(a,i.KU);e.setAddress(d)},google:e.google,defaultZoom:12,zoom:10,className:"clickable",initialCenter:e.location,center:e.location,children:(0,p.jsx)(s.Marker,{position:e.location,icon:{url:a,scaledSize:new e.google.maps.Size(32,32)},className:"marker"})})]})}))},66596:(e,l,t)=>{"use strict";t.d(l,{c:()=>c});t(99584);var n=t(65236),s=t(74408);const i=t.p+"static/media/noproductsfound.1cec73868b5fd048b865.riv",a=t.p+"static/media/noresult.ac4af107751f94856a9c.riv",d=t.p+"static/media/nosell.32cb2c2cc548a15c820d.riv";var o=t(97884);const c=function(e){let{id:l="noresult",text:t=""}=e;const{t:c}=(0,n.G)(),r={src:{noproductsfound:i,noresult:a,nosell:d}[l],artboard:"New Artboard",autoplay:!0},{RiveComponent:u}=(0,s.useRive)(r);return(0,o.jsxs)("div",{className:"animation-canvas",children:[(0,o.jsx)("div",{style:{width:"100%",height:200},children:(0,o.jsx)(u,{})}),(0,o.jsx)("div",{className:"text",children:c(t)})]})}},40748:(e,l,t)=>{"use strict";t.d(l,{c:()=>o});var n=t(99584),s=t(46712),i=t(78816),a=t(6724),d=t(97884);function o(e){let{handleChange:l,defaultValue:t,resetSearch:o,...c}=e;const[r,u]=(0,n.useState)(t),v=(0,n.useMemo)((()=>(0,i.debounce)((e=>{l(e)}),800)),[l]);return(0,n.useEffect)((()=>{u(t)}),[o,t]),(0,d.jsx)(s.default,{value:r,onChange:e=>{u(e.target.value),v(e.target.value)},prefix:(0,d.jsx)(a.c,{}),...c})}},71376:(e,l,t)=>{"use strict";t.d(l,{g:()=>c});var n=t(99584),s=t(95976),i=t.n(s),a=t(2664),d=t(37728),o=t(97884);const c=e=>{let{fetchOptions:l,debounceTimeout:t=400,onClear:s,...c}=e;const[r,u]=(0,n.useState)(!1),[v,p]=(0,n.useState)([]),m=(0,n.useMemo)((()=>i()((e=>{p([]),u(!0),l(e).then((e=>{p(e),u(!1)}))}),t)),[l,t]);return(0,o.jsx)(a.default,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:m,onClear:()=>{m(""),s&&s()},notFoundContent:r?(0,o.jsx)(d.c,{size:"small"}):"no results",...c,options:v,onFocus:()=>{m("")}})}},33424:(e,l,t)=>{"use strict";t.d(l,{c:()=>a});var n=t(71760),s=t.n(n),i=t(52640);async function a(e){let l={address:e,key:arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.KU};return s().get("https://maps.googleapis.com/maps/api/geocode/json",{params:l}).then((e=>{let{data:l}=e;return l.results[0]})).catch((e=>"not found"))}},33131:(e,l,t)=>{"use strict";t.d(l,{c:()=>n});t(52640);function n(e){if(null===e||void 0===e||!e.location)return{lat:47.4143302506288,lng:8.532059477976883};const l=e.location.split(", ");return{lat:Number(null===l||void 0===l?void 0:l[0]),lng:Number(null===l||void 0===l?void 0:l[1])}}},21712:(e,l,t)=>{"use strict";function n(e,l){for(var t=[],n=[],s="",i=0;i<(null===(a=e.stocks)||void 0===a?void 0:a.length);i++){var a,d;s="";for(var o=0;o<(null===(c=e.stocks[i].extras)||void 0===c?void 0:c.length);o++){var c,r=Object.assign({},e.stocks[i].extras[o]),u=t.findIndex((e=>e.id==r.id));-1==u?(r.level=o,r.up=[s],t.push(r),s+=r.id.toString()):(t[u].up.push(s),s+=r.id.toString())}var v={id:e.stocks[i].id,extras:s,price:e.stocks[i].price,quantity:e.stocks[i].quantity,countable_id:e.stocks[i].countable_id,discount:e.stocks[i].discount,tax:e.stocks[i].tax,total_price:e.stocks[i].total_price,bonus:e.stocks[i].bonus,addons:(null===(d=e.stock)||void 0===d?void 0:d.addons)||e.stocks[i].addons};for(let e=0;e<(null===(p=v.addons)||void 0===p?void 0:p.length);e++){var p;for(let t=0;t<(null===l||void 0===l?void 0:l.length);t++){var m,h,x;v.addons[e].addon_id===((null===(m=l[t].stock)||void 0===m||null===(h=m.product)||void 0===h?void 0:h.id)||(null===(x=l[t].product)||void 0===x?void 0:x.id))&&(v.addons[e].product.quantity=l[t].quantity)}}n.push(v)}return{stock:n,extras:t}}function s(e,l,t){for(var n=""==e?[]:e.split(","),s=[],i=[],a=0;a<=n.length;a++){a-1>=0&&(i[i.length]=n[a-1].toString()),(d=l.filter((e=>{if(new Set(e.up).has(i.join("")))return e}))).length>0&&s.push(d)}a=0;if(i.length<s.length)for(;a<l.length;){var d;if(i[i.length]=s[s.length-1][0].id.toString(),0==(d=l.filter((e=>{if(new Set(e.up).has(i.join("")))return e}))).length)break;s.push(d),a++}var o=t.findIndex((e=>e.extras==i.join("")));return{stock:t[o],extras:s}}t.d(l,{M:()=>s,Y:()=>n})},66684:(e,l,t)=>{"use strict";function n(e){var l;const t=null===e||void 0===e||null===(l=e.extras)||void 0===l?void 0:l.find((e=>"image"===e.group.type));return t?t.value:""}t.d(l,{c:()=>n})},24968:(e,l,t)=>{"use strict";function n(e){if(!e)return"0";return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$")+" "+Number(e).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")}t.d(l,{c:()=>n})},71976:(e,l,t)=>{"use strict";function n(e,l){var t;const n=(null===l||void 0===l||null===(t=l.translation)||void 0===t?void 0:t.title)||"pcs";if(!e)return 0;switch(null===l||void 0===l?void 0:l.position){case"after":return e+" "+n;case"before":return n+" "+e}}t.d(l,{c:()=>n})},33552:(e,l,t)=>{"use strict";function n(e){return e.cartItems.filter((l=>l.bag_id===e.currentBag))}function s(e){return e.data.find((l=>l.bag_id===e.currentBag))}t.d(l,{KG:()=>s,QX:()=>n})},35924:(e,l,t)=>{"use strict";t.d(l,{c:()=>s});var n=t(33012);const s={getAll:e=>n.c.get("rest/brands/paginate",{params:e}),getById:(e,l)=>n.c.get("rest/brands/".concat(e),{params:l})}},37784:(e,l,t)=>{"use strict";t.d(l,{c:()=>s});var n=t(33012);const s={getAll:e=>n.c.get("dashboard/seller/categories/paginate",{params:e}),getById:(e,l)=>n.c.get("dashboard/seller/categories/".concat(e),{params:l}),search:e=>n.c.get("dashboard/seller/categories/search",{params:e}),paginateSelect:e=>n.c.get("dashboard/seller/categories/select-paginate",{params:e})}},2916:(e,l,t)=>{"use strict";t.d(l,{c:()=>s});var n=t(33012);const s={checkCoupon:e=>n.c.post("rest/coupons/check",e),checkCashback:e=>n.c.post("rest/cashback/check",e)}},88452:(e,l,t)=>{"use strict";t.r(l),t.d(l,{default:()=>Ge});var n=t(99584),s=t(68496),i=t(68768),a=t(10260),d=t(71376),o=t(35924),c=t(37784),r=t(68256),u=t(32712),v=t(63616),p=t(40748),m=t(65236),h=t(97884);const x=()=>{const{t:e}=(0,m.G)(),l=(0,u.OY)(),[t,x]=(0,n.useState)(null),[y,j]=(0,n.useState)(null),[g,f]=(0,n.useState)(null),{myShop:b}=(0,u.w1)((e=>e.myShop),u.G);return(0,r.c)((()=>{const e={brand_id:null===t||void 0===t?void 0:t.value,category_id:null===y||void 0===y?void 0:y.value,search:g,active:1,status:"published"};l((0,v.cB)(e))}),[t,y,g]),(0,h.jsx)(s.default,{children:(0,h.jsxs)(i.c,{gutter:12,children:[(0,h.jsx)(a.c,{span:12,children:(0,h.jsx)(p.c,{className:"w-100",placeholder:e("search"),handleChange:f})}),(0,h.jsx)(a.c,{span:"shop"===b.type?6:12,children:(0,h.jsx)(d.g,{className:"w-100",placeholder:e("select.category"),fetchOptions:async function(e){const l={search:0===e.length?null:e,type:"main"};return c.c.search(l).then((e=>e.data.map((e=>({label:null!==e.translation?e.translation.title:"no name",value:e.id})))))},onChange:e=>j(e),value:y})}),"shop"===b.type?(0,h.jsx)(a.c,{span:6,children:(0,h.jsx)(d.g,{className:"w-100",placeholder:e("select.brand"),fetchOptions:async function(e){const l={search:0===e.length?null:e};return o.c.getAll(l).then((e=>e.data.map((e=>({label:e.title,value:e.id})))))},onChange:e=>x(e),value:t})}):void 0]})})};var y=t(88560),j=t(37728),g=t(77748),f=t(75216),b=t(94936),_=t(71836),k=t(18896),w=t(61072),N=t(95884),S=t(87228),q=t(87968),C=t(37564),I=t(66296),G=t(3952),D=t(59956),z=t(24968),M=t(99649),V=t(71976),Y=t(66684),B=t(21712),H=t(59528);const O=e=>{var l,t;let{showExtras:n,addonCalculate:s,selectedValues:i,handleChange:a}=e;return(0,h.jsx)(I.c,{direction:"vertical",size:"middle",children:null===(l=n.stock)||void 0===l||null===(t=l.addons)||void 0===t?void 0:t.filter((e=>!!e.product)).map((e=>{var l,t;const n=i.includes(String(e.addon_id));return(0,h.jsxs)("div",{children:[(0,h.jsx)(H.c,{id:String(e.id),name:String(e.id),checked:n,onChange:()=>a(e)}),(0,h.jsxs)("label",{htmlFor:String(e.id),children:[n&&(0,h.jsxs)(I.c,{size:0,children:[(0,h.jsx)(S.c,{type:"text",className:"minus-button",style:{padding:0,height:"max-content"},size:"small",icon:(0,h.jsx)(D.c,{}),disabled:1===e.product.quantity,onClick:l=>{l.stopPropagation(),s(e.addon_id,e.product.quantity-1)}}),(0,h.jsx)("span",{className:"ml-2",children:e.product.quantity||e.product.min_qty}),(0,h.jsx)(S.c,{type:"text",className:"plus-button",style:{padding:0,height:"max-content"},size:"small",icon:(0,h.jsx)(b.c,{}),onClick:l=>{l.stopPropagation(),s(e.addon_id,e.product.quantity?e.product.quantity+1:e.product.min_qty+1)}})]}),(0,h.jsx)("span",{className:"ml-2",children:null===(l=e.product)||void 0===l||null===(t=l.translation)||void 0===t?void 0:t.title})]})]},e.id)}))})};var E=t(31e3);function F(e){var l,t,s,d;let{extrasModal:o,setExtrasModal:c}=e;const[v,p]=(0,n.useState)(!1),[x,y]=(0,n.useState)({}),{t:g}=(0,m.G)(),[f,k]=(0,n.useState)({}),H=(0,u.OY)(),[F,P]=(0,n.useState)([]),[A,T]=(0,n.useState)([]),[K,L]=(0,n.useState)([]),[U,Q]=(0,n.useState)([]),[R,X]=(0,n.useState)([]),[W,Z]=(0,n.useState)({extras:[],stock:{id:0,quantity:1,price:0}}),[$,J]=(0,n.useState)(o.quantity||x.quantity||x.min_qty),{currentBag:ee,currency:le}=(0,u.w1)((e=>e.cart),u.G);const te=()=>c(!1);function ne(e){return(null===U||void 0===U?void 0:U.reduce(((e,l)=>{var t;return e+(null===(t=l.product.stock)||void 0===t?void 0:t.price)*(l.product.quantity||l.product.min_qty)}),0))+(null===W||void 0===W?void 0:W.stock)?null===W||void 0===W?void 0:W.stock[e||"price"]:0*$}return(0,r.c)((()=>{const e=W.stock.addons.filter((e=>R.includes(String(e.addon_id))));Q(e)}),[R]),(0,n.useEffect)((()=>{null!==W&&void 0!==W&&W.stock&&k({...W.stock,extras:K})}),[W]),(0,n.useEffect)((()=>{p(!0),E.c.getById(o.uuid).then((e=>{var l;let{data:t}=e;y(t);const n=(0,B.Y)(t,null===o||void 0===o?void 0:o.addons);var s;(P(n.extras),J(o.quantity||t.quantity||t.min_qty),T(n.stock),Z((0,B.M)(K,n.extras,n.stock)),null===(l=(0,B.M)("",n.extras,n.stock).extras)||void 0===l||l.forEach((e=>{L((l=>[...l,e[0]]))})),null!==o&&void 0!==o&&o.addons)&&X((null===o||void 0===o||null===(s=o.addons)||void 0===s?void 0:s.map((e=>{var l;return String((null===e||void 0===e||null===(l=e.countable)||void 0===l?void 0:l.id)||e.countable_id)})))||[])})).finally((()=>p(!1)))}),[o.uuid]),(0,h.jsx)(N.default,{visible:!!x,title:x.name,onCancel:te,footer:[(0,h.jsx)(S.c,{icon:(0,h.jsx)(G.c,{}),type:"primary",onClick:()=>{const e=U.map((e=>({...e,stockID:e.product.stock.id,quantity:e.product.quantity||e.product.min_qty}))),l={...x,stock:f,quantity:$,id:f.id,img:(0,Y.c)(f)||x.img,bag_id:ee,stockID:f,addons:e};l.quantity>f.quantity?w.m4.warning("".concat(g("you.cannot.order.more.than")," ").concat(f.quantity)):(H((0,M.iA)(l)),c(null))},children:g("add")},"add-product"),(0,h.jsx)(S.c,{type:"default",onClick:te,children:g("cancel")},"cancel-product")],children:(0,h.jsxs)(j.c,{spinning:v,children:[(0,h.jsxs)(i.c,{gutter:24,children:[(0,h.jsx)(a.c,{span:8,children:(0,h.jsx)(q.c,{src:(0,_.c)((0,Y.c)(f)||x.img),alt:x.name,height:200,style:{objectFit:"contain"}})}),(0,h.jsx)(a.c,{span:16,children:(0,h.jsxs)(C.c,{title:null===(l=x.translation)||void 0===l?void 0:l.title,children:[(0,h.jsxs)(C.c.Item,{label:g("price"),span:3,children:[(0,h.jsx)("div",{className:null!==f&&void 0!==f&&f.discount?"strike":"",children:(0,z.c)(ne(),null===le||void 0===le?void 0:le.symbol)}),null!==f&&void 0!==f&&f.discount?(0,h.jsx)("div",{className:"ml-2 font-weight-bold",children:(0,z.c)(ne("total_price"),null===le||void 0===le?void 0:le.symbol)}):""]}),(0,h.jsx)(C.c.Item,{label:g("in.stock"),span:3,children:(0,V.c)(null===f||void 0===f?void 0:f.quantity,x.unit)}),(0,h.jsx)(C.c.Item,{label:g("tax"),span:3,children:(0,z.c)(null===f||void 0===f?void 0:f.tax,null===le||void 0===le?void 0:le.symbol)})]})})]}),null===W||void 0===W||null===(t=W.extras)||void 0===t?void 0:t.map(((e,l)=>(0,h.jsx)("div",{className:"extra-group",children:(0,h.jsx)(I.c,{className:"extras-select",children:e.map((e=>(0,h.jsx)("span",{className:"extras-text rounded ".concat(K.find((l=>l.id===e.id))?"selected":""),onClick:()=>(e=>{var l;const t=K.findIndex((l=>l.extra_group_id===e.extra_group_id));let n=K;t>-1&&(n=n.slice(0,t)),n.push(e);const s=n.map((e=>e.id)).join(",");var i=(0,B.M)(s,F,A);Z(i),null===(l=i.extras)||void 0===l||l.forEach((l=>{const t=K.findIndex((t=>l[0].extra_group_id!=e.extra_group_id?t.extra_group_id===l[0].extra_group_id:t.extra_group_id===e.extra_group_id));if(l[0].level>=e.level){var s=l[0].extra_group_id!=e.extra_group_id?l[0]:e;-1==t?n.push(s):n[t]=s}})),L(n)})(e),children:e.value})))},"extra-group"+l)}))),(0,h.jsx)(O,{showExtras:W,selectedValues:R,handleChange:e=>{const l=String(e.addon_id);R.includes(l)?X((e=>e.filter((e=>e!==l)))):X((e=>[...e,l]))},addonCalculate:function(e,l){Z((t=>({...t,stock:{...t.stock,addons:t.stock.addons.map((t=>t.addon_id===e?{...t,product:{...t.product,quantity:l}}:t))}}))),Q((t=>t.map((t=>t.addon_id===e?{...t,product:{...t.product,quantity:l}}:t))))}}),(0,h.jsx)(i.c,{gutter:12,className:"mt-3",children:(0,h.jsx)(a.c,{span:24,children:(0,h.jsxs)(I.c,{children:[(0,h.jsx)(S.c,{type:"primary",icon:(0,h.jsx)(D.c,{}),onClick:function(){1!==$&&($<=x.min_qty||J((e=>e-1)))}}),($||1)*((null===x||void 0===x?void 0:x.interval)||1),null===x||void 0===x||null===(s=x.unit)||void 0===s||null===(d=s.translation)||void 0===d?void 0:d.title,(0,h.jsx)(S.c,{type:"primary",icon:(0,h.jsx)(b.c,{}),onClick:function(){$!==(null===x||void 0===x?void 0:x.quantity)&&$!==x.max_qty&&J((e=>e+1))}})]})})})]})})}var P=t(99924),A=t(33552),T=t(5008),K=t(66596),L=t(23424);function U(){var e;const{t:l}=(0,m.G)(),t={lg:8,xl:6,xxl:6},[d,o]=(0,n.useState)(null),c=(0,u.OY)(),{products:r,loading:p,meta:x,params:y}=(0,u.w1)((e=>e.product),u.G),{activeMenu:N}=(0,u.w1)((e=>e.menu),u.G),{currency:S}=(0,u.w1)((e=>e.cart),u.G),q=(0,u.w1)((e=>(0,A.KG)(e.cart))),{before_order_phone_required:C}=(0,u.w1)((e=>e.globalSettings.settings),u.G),I=(0,L.IT)(),G=null===I||void 0===I||null===(e=I.state)||void 0===e?void 0:e.delivery_type;(0,n.useEffect)((()=>{N.refetch&&(c((0,v.cB)({perPage:10,currency_id:null===S||void 0===S?void 0:S.id,status:"published",active:1})),c((0,P.Sq)()),c((0,k.CO)(N)))}),[N.refetch]);return(0,h.jsxs)("div",{className:"px-2",children:[p?(0,h.jsx)(j.c,{className:"d-flex justify-content-center my-5"}):(0,h.jsx)(i.c,{gutter:12,className:"mt-4 product-card",children:0===r.length?(0,h.jsx)(a.c,{span:24,children:(0,h.jsx)(K.c,{id:"nosell"})}):r.map(((e,i)=>{var d;return(0,n.createElement)(a.c,{...t,key:i},(0,h.jsxs)(s.default,{className:"products-col",cover:(0,h.jsx)("img",{alt:e.name,src:(0,_.c)(e.img)}),onClick:()=>(e=>{var t;S||G?0!==(null===q||void 0===q||null===(t=q.user)||void 0===t?void 0:t.length)||G?null!==q&&void 0!==q&&q.phone||"1"!==C?Number(null===q||void 0===q?void 0:q.phone)<0?w.m4.warning(l("invalid.phone.number")):q.address||G?null!==q&&void 0!==q&&q.paymentType||G?q.deliveries||G?null!==q&&void 0!==q&&q.delivery_date||G?null!==(null===q||void 0===q?void 0:q.delivery_time)||G?o(e):w.m4.warning(l("please.select.delivery.time")):w.m4.warning(l("please.select.delivery.date")):w.m4.warning(l("please.select.delivery")):w.m4.warning(l("please.select.payment.type")):w.m4.warning(l("please.select.address")):w.m4.warning(l("please.enter.phone")):w.m4.warning(l("please.select.user")):w.m4.warning(l("please.select.currency"))})(e),children:[(0,h.jsx)(f.c,{title:e.name,description:null===(d=e.stock)||void 0===d?void 0:d.price}),(0,h.jsx)("div",{className:"preview",children:(0,h.jsx)(b.c,{})}),e.stocks.map((e=>{var l,t;return(0,h.jsxs)("span",{className:e.bonus?"show-bonus":"d-none",children:[(0,h.jsx)(T.yEO,{})," ",null===(l=e.bonus)||void 0===l?void 0:l.value,"+",null===(t=e.bonus)||void 0===t?void 0:t.bonus_quantity]})}))]},e.id))}))}),d&&(0,h.jsx)(F,{extrasModal:d,setExtrasModal:o}),(0,h.jsx)("div",{className:"d-flex justify-content-end my-5",children:(0,h.jsx)(g.c,{total:x.total,current:y.page,pageSize:12,showSizeChanger:!1,onChange:function(e){c((0,v.cB)({perPage:10,page:e,status:"published",active:1}))},active:1})})]})}var Q=t(65732),R=t(10240),X=t(46712),W=t(2664),Z=t(4736),$=t(69116),J=t(34116),ee=t(77632),le=t(78816),te=t(24692);function ne(e){let{visible:l,handleCancel:t}=e;const{t:s}=(0,m.G)(),[d]=Q.c.useForm(),[o,c]=(0,n.useState)(!1),[r,u]=(0,n.useState)(null);return(0,h.jsx)(N.default,{title:s("add.client"),visible:l,onCancel:t,footer:[(0,h.jsx)(S.c,{type:"primary",onClick:()=>d.submit(),loading:o,children:s("save")},"ok-button"),(0,h.jsx)(S.c,{onClick:t,children:s("cancel")},"cancel-button")],children:(0,h.jsx)(Q.c,{layout:"vertical",name:"user-add-form",form:d,onFinish:e=>{const l={...e,role:"user"};c(!0),ee.c.create(l).then((()=>{w.m4.success(s("successfully.added")),t()})).catch((e=>u(e.response.data.params))).finally((()=>c(!1)))},children:(0,h.jsxs)(i.c,{gutter:12,children:[(0,h.jsx)(a.c,{span:12,children:(0,h.jsx)(Q.c.Item,{label:s("firstname"),name:"firstname",help:null!==r&&void 0!==r&&r.firstname?r.firstname[0]:null,validateStatus:null!==r&&void 0!==r&&r.firstname?"error":"success",rules:[{required:!0,message:s("required")}],children:(0,h.jsx)(X.default,{})})}),(0,h.jsx)(a.c,{span:12,children:(0,h.jsx)(Q.c.Item,{label:s("lastname"),name:"lastname",help:null!==r&&void 0!==r&&r.lastname?r.lastname[0]:null,validateStatus:null!==r&&void 0!==r&&r.lastname?"error":"success",rules:[{required:!0,message:s("required")}],children:(0,h.jsx)(X.default,{})})}),(0,h.jsx)(a.c,{span:12,children:(0,h.jsx)(Q.c.Item,{label:s("phone"),name:"phone",help:null!==r&&void 0!==r&&r.phone?r.phone[0]:null,validateStatus:null!==r&&void 0!==r&&r.phone?"error":"success",rules:[{required:!0,message:s("required")}],children:(0,h.jsx)(R.c,{min:0,className:"w-100"})})}),(0,h.jsx)(a.c,{span:12,children:(0,h.jsx)(Q.c.Item,{label:s("email"),name:"email",help:null!==r&&void 0!==r&&r.email?r.email[0]:null,validateStatus:null!==r&&void 0!==r&&r.email?"error":"success",rules:[{required:!0,message:s("required")}],children:(0,h.jsx)(X.default,{type:"email"})})})]})})})}var se=t(47148),ie=t(73568),ae=t(83072),de=t.n(ae);const oe=[{title:"sunday"},{title:"monday"},{title:"tuesday"},{title:"wednesday"},{title:"thursday"},{title:"friday"},{title:"saturday"}],ce=()=>{var e,l;const{t:t}=(0,m.G)(),n=(0,u.OY)(),d=(0,u.w1)((e=>(0,A.KG)(e.cart))),{myShop:o}=(0,u.w1)((e=>e.myShop),u.G),{currentBag:c}=(0,u.w1)((e=>e.cart),u.G),r=new Date(d.delivery_date),v=null===o||void 0===o||null===(e=o.shop_working_days)||void 0===e?void 0:e.find((e=>{var l;return(null===e||void 0===e?void 0:e.day)===(null===(l=oe[r.getDay()])||void 0===l?void 0:l.title)})),p=null===o||void 0===o||null===(l=o.shop_closed_date)||void 0===l?void 0:l.map((e=>e.day));const x=(e,l)=>{const t=[];for(let n=e;n<l;n++)t.push(n);return t},y=[{label:"delivery",value:(null===o||void 0===o?void 0:o.price)||0,key:1},{label:"pickup",value:"0",key:2}];return(0,h.jsx)(s.default,{title:t("shipping.info"),className:"p-0",children:(0,h.jsxs)(i.c,{gutter:12,children:[(0,h.jsx)(a.c,{span:24,children:(0,h.jsx)(Q.c.Item,{name:"delivery",label:t("delivery"),rules:[{required:!0,message:t("required")}],children:(0,h.jsx)(W.default,{options:y,labelInValue:!0,onSelect:e=>n((0,M.SS)({delivery_fee:e.value,bag_id:c})),onChange:e=>n((0,M.SS)({deliveries:e,bag_id:c}))})})}),(0,h.jsx)(a.c,{span:24,children:(0,h.jsxs)(i.c,{gutter:12,children:[(0,h.jsx)(a.c,{span:12,children:(0,h.jsx)(Q.c.Item,{name:"delivery_date",label:t("delivery.date"),rules:[{required:!0,message:t("required")}],valuePropName:"date",children:(0,h.jsx)(ie.default,{placeholder:t("delivery.date"),className:"w-100",format:"YYYY-MM-DD",disabledDate:function(e){const l=null===p||void 0===p?void 0:p.find((l=>l===de()(e).format("YYYY-MM-DD"))),t=de()().add(-1,"days")>=e;return l||t},onChange:e=>{const l=null!==d&&void 0!==d&&d.delivery_date?null===d||void 0===d?void 0:d.delivery_date:de()(e).format("YYYY-MM-DD");n((0,M.SS)({delivery_date:l,bag_id:c}))}})})}),(0,h.jsx)(a.c,{span:12,children:(0,h.jsx)(Q.c.Item,{label:"".concat(t("delivery.time")," (").concat(t("up.to"),")"),name:"delivery_time",rules:[{required:!0,message:t("required")}],valuePropName:"date",children:(0,h.jsx)(ie.default,{disabled:!d.delivery_date,picker:"time",placeholder:t("start.time"),className:"w-100",format:"HH:mm:ss",showNow:!1,disabledTime:()=>({disabledHours:()=>((e,l)=>{const t=parseInt(e),n=parseInt(l),s=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24];for(let i=t;i<=n;i++)delete s[i];return s})(de()(new Date).format("DD")===de()(d.delivery_date).format("DD")?(null===v||void 0===v?void 0:v.from.substring(0,2))>=de()(new Date).format("HH")?null===v||void 0===v?void 0:v.from.substring(0,2):de()(new Date).format("HH"):null===v||void 0===v?void 0:v.from.substring(0,2),null===v||void 0===v?void 0:v.to.substring(0,2)),disabledMinutes:()=>x(0,60),disabledSeconds:()=>x(0,60)}),onChange:e=>{const l=de()(e).format("HH:mm:ss");n((0,M.SS)({delivery_time:l,bag_id:c}))}})})})]})})]})})};var re=t(89896),ue=t(33131),ve=t(55309),pe=t(33424),me=t(52640);function he(e){let{uuid:l,handleCancel:t}=e;const{t:s}=(0,m.G)(),[i]=Q.c.useForm(),a=(0,u.OY)(),d=(0,u.w1)((e=>(0,A.KG)(e.cart))),{currentBag:o}=(0,u.w1)((e=>e.cart),u.G),{settings:c}=(0,u.w1)((e=>e.globalSettings),u.G),[r,v]=(0,n.useState)(d.address?{lat:d.address.lat,lng:d.address.lng}:(0,ue.c)(c)),[p,x]=(0,n.useState)(""),{placePredictions:y,getPlacePredictions:j,isPlacePredictionsLoading:g}=(0,ve.c)({apiKey:me.KU,libraries:["places","geocode"]});return(0,n.useEffect)((()=>{i.setFieldsValue({address:d.address.address||null})}),[o]),(0,h.jsx)(N.default,{visible:!!l,title:s("create.address"),onCancel:t,footer:[(0,h.jsx)(S.c,{type:"primary",onClick:()=>i.submit(),children:s("save")},"saveBtn"),(0,h.jsx)(S.c,{type:"default",onClick:t,children:s("cancel")},"cancelBtn")],children:(0,h.jsxs)(Q.c,{layout:"vertical",name:"user-address",form:i,onFinish:e=>{const l={...e,active:1,lat:r.lat,lng:r.lng};a((0,M.SS)({address:l,bag_id:o})),t()},children:[(0,h.jsx)(Q.c.Item,{name:"address",label:s("address"),rules:[{required:!0,message:s("required")}],children:(0,h.jsx)(W.default,{allowClear:!0,searchValue:p,showSearch:!0,autoClearSearchValue:!0,loading:g,options:null===y||void 0===y?void 0:y.map((e=>({label:e.description,value:e.description}))),onSearch:e=>{x(e),e.length>0&&j({input:e})},onSelect:async e=>{const l=await(0,pe.c)(e);v({lat:null===l||void 0===l?void 0:l.geometry.location.lat,lng:null===l||void 0===l?void 0:l.geometry.location.lng})}})}),(0,h.jsx)(Q.c.Item,{label:s("map"),children:(0,h.jsx)(re.c,{location:r,setLocation:v,setAddress:e=>i.setFieldsValue({address:e})})})]})})}function xe(){var e;const{t:l}=(0,m.G)(),[t]=Q.c.useForm(),o=(0,u.OY)(),{currencies:c,loading:r}=(0,u.w1)((e=>e.currency),u.G),{myShop:v}=(0,u.w1)((e=>e.myShop),u.G),{currentBag:p,bags:x,currency:y}=(0,u.w1)((e=>e.cart),u.G),{payment_type:g,before_order_phone_required:f}=(0,u.w1)((e=>e.globalSettings.settings),u.G),_=(0,L.IT)(),k=null===_||void 0===_||null===(e=_.state)||void 0===e?void 0:e.delivery_type,N=(0,u.w1)((e=>(0,A.KG)(e.cart))),[q,C]=(0,n.useState)([]),[G,D]=(0,n.useState)(null),[z,V]=(0,n.useState)(null),[Y,B]=(0,n.useState)(null);return(0,n.useEffect)((()=>{if(y){const e={label:"".concat(null===y||void 0===y?void 0:y.title," (").concat(null===y||void 0===y?void 0:y.symbol,")"),value:y.id};o((0,M.SS)({formCurrency:e,bag_id:p})),t.setFieldsValue({currency:e})}else{const e=c.find((e=>e.default)),l={label:"".concat(null===e||void 0===e?void 0:e.title," (").concat(null===e||void 0===e?void 0:e.symbol,")"),value:e.id};o((0,M.SS)({currentCurrency:e,bag_id:p})),o((0,M.IX)(e)),t.setFieldsValue({currency:l})}}),[]),(0,n.useEffect)((()=>{t.setFieldsValue({user:N.user||null,payment_type:N.paymentType||null,address:N.address.address||null,delivery:N.deliveries||null,delivery_date:N.delivery_date||null,delivery_time:N.delivery_time||null,phone:(null===N||void 0===N?void 0:N.phone)||null})}),[p,N]),(0,h.jsxs)("div",{className:"order-tabs",children:[(0,h.jsxs)("div",{className:"tabs-container",children:[(0,h.jsx)("div",{className:"tabs",children:x.map((e=>(0,h.jsx)("div",{className:e===p?"tab active":"tab",onClick:()=>o((0,M.ov)(e)),children:(0,h.jsxs)(I.c,{children:[(0,h.jsx)(Z.c,{}),(0,h.jsxs)("span",{children:[l("bag")," - ",e]}),e&&e===p?(0,h.jsx)($.c,{onClick:l=>((e,l)=>{e.preventDefault(),e.stopPropagation(),o((0,M.CY)(l))})(l,e),className:"close-button",size:12}):""]})},"tab"+e)))}),(0,h.jsx)(S.c,{size:"small",type:"primary",shape:"circle",icon:(0,h.jsx)(b.c,{}),className:"tab-add-button",onClick:()=>o((0,M.Zo)())})]}),(0,h.jsxs)(Q.c,{layout:"vertical",name:"pos-form",form:t,initialValues:{user:N.user||null,address:N.address||null,currency:y||void 0,payment_type:N.paymentType||null,deliveries:N.deliveries,phone:N.phone||null},children:[(0,h.jsxs)(s.default,{className:p?"":"tab-card",children:[r&&(0,h.jsx)("div",{className:"loader",children:(0,h.jsx)(j.c,{})}),(0,h.jsxs)(i.c,{gutter:6,style:{marginBottom:15},children:[(0,h.jsx)(a.c,{span:9,children:(0,h.jsx)(Q.c.Item,{name:"user",rules:[{required:!0,message:""}],className:"w-100",children:(0,h.jsx)(d.g,{placeholder:l("select.client"),fetchOptions:async function(e){const l={search:e,perPage:10};return ee.c.getAll(l).then((e=>{let{data:l}=e;return C(l),function(e){if(!e)return;return(0,le.isArray)(e)?e.map((e=>({label:"".concat(e.firstname," ").concat(e.lastname?e.lastname:""),value:e.id}))):{label:"".concat(e.firstname," ").concat(e.lastname||""),value:e.id}}(l)}))},onSelect:function(e){const l=q.find((l=>l.id===e.value));o((0,M.SS)({user:e,userUuid:l.uuid,bag_id:p,phone:null===l||void 0===l?void 0:l.phone})),B(null===l||void 0===l?void 0:l.phone),t.setFieldsValue({address:null,phone:null===l||void 0===l?void 0:l.phone})},onClear:()=>{t.setFieldsValue({phone:null,user:null})}})})}),(0,h.jsx)(a.c,{span:3,children:(0,h.jsx)(Q.c.Item,{children:(0,h.jsx)(S.c,{icon:(0,h.jsx)(J.c,{}),onClick:()=>{V(!0)}})})}),"1"===f&&(0,h.jsx)(a.c,{span:12,children:(0,h.jsx)(Q.c.Item,{name:"phone",rules:[{required:!0,message:l("required")},{validator(e,t){if(t<0)return Promise.reject(new Error(l("must.be.positive")))}}],children:(0,h.jsx)(R.c,{className:"w-100",placeholder:l("phone.number"),disabled:Y,onChange:e=>o((0,M.SS)({phone:e,bag_id:p}))})})}),(0,h.jsx)(a.c,{span:12,children:(0,h.jsx)(Q.c.Item,{name:"address",rules:[{required:!0,message:l("required")}],children:(0,h.jsx)(X.default,{autoComplete:"off",placeholder:l("address"),onClick:()=>{N.userUuid?D(N.userUuid):w.m4.warning(l("please.select.client"))}})})}),(0,h.jsx)(a.c,{span:12,children:(0,h.jsx)(Q.c.Item,{name:"currency",rules:[{required:!0,message:l("required")}],children:(0,h.jsx)(W.default,{placeholder:l("select.currency"),onSelect:function(e){const l=c.find((l=>l.id===e.value));o((0,M.IX)(l))},labelInValue:!0,disabled:!0,children:null===c||void 0===c?void 0:c.map(((e,l)=>(0,h.jsx)(W.default.Option,{value:null===e||void 0===e?void 0:e.id,children:"".concat(null===e||void 0===e?void 0:e.title," (").concat(null===e||void 0===e?void 0:e.symbol,")")},l)))})})}),(0,h.jsx)(a.c,{span:12,children:(0,h.jsx)(Q.c.Item,{name:"payment_type",rules:[{required:!0,message:l("required")}],children:(0,h.jsx)(te.o,{fetchOptions:"admin"===g?async function(){return se.c.getAll().then((e=>{let{data:l}=e;return l.filter((e=>"cash"===e.tag||"wallet"===e.tag)).map((e=>({label:e.tag||"no name",value:e.id,key:e.id})))}))}:async function(){return await se.c.getById(v.id).then((e=>{let{data:l}=e;return l.filter((e=>"cash"!==e.tag||"wallet"!==e.tag)).map((e=>({label:e.payment.tag||"no name",value:e.payment.id,key:e.payment.id})))}))},className:"w-100",placeholder:l("select.payment.type"),onSelect:e=>{o((0,M.SS)({paymentType:e,bag_id:p}))}})})})]})]}),!k&&(0,h.jsx)(ce,{})]}),G&&(0,h.jsx)(he,{uuid:G,handleCancel:()=>D(null)}),z&&(0,h.jsx)(ne,{visible:z,handleCancel:()=>V(!1)})]})}var ye=t(59424),je=t(4496),ge=t(67148),fe=t(2916),be=t(15752),_e=t(98044),ke=t(75456),we=t(19600);const Ne=e=>{var l,t,i,a,d,o,c,r,u,v,p;let{orderId:x,handleClose:y}=e;const{t:g}=(0,m.G)(),[f,b]=(0,n.useState)(!1),[_,k]=(0,n.useState)(null),[w,q]=(0,n.useState)([]);return(0,n.useEffect)((()=>{x&&(b(!0),ge.c.getById(x).then((e=>{k(e.data);const l=e.data.details.map((e=>({...e,...e.stock.extras,numberQuantity:e.quantity,numberTax:e.tax})));q(l)})).finally((()=>b(!1))))}),[]),(0,h.jsx)(N.default,{visible:!!x,title:"Order created successfully",onOk:y,onCancel:y,footer:[(0,h.jsx)(S.c,{onClick:y,children:g("back")}),(0,h.jsxs)(S.c,{type:"primary",onClick:()=>window.print(),children:[(0,h.jsx)(we.c,{type:"printer"}),(0,h.jsx)("span",{className:"ml-1",children:g("print")})]})],style:{minWidth:"80vw"},children:(0,h.jsx)("div",{className:"py-4",children:f?(0,h.jsx)("div",{className:"w-100 text-center",children:(0,h.jsx)(j.c,{})}):(0,h.jsxs)(s.default,{title:"".concat(g("order.details")," ").concat(null!==_&&void 0!==_&&_.id?"#".concat(null===_||void 0===_?void 0:_.id):""),className:"order-details",children:[(0,h.jsxs)("div",{className:"d-flex justify-content-between mt-3",children:[(0,h.jsxs)("div",{children:[(0,h.jsxs)("h2",{className:"mb-1 font-weight-semibold",children:[g("invoice")," #",null===_||void 0===_?void 0:_.id]}),(0,h.jsx)("p",{children:de()(null===_||void 0===_?void 0:_.created_at).format("DD/M/YYYY")}),(0,h.jsx)("address",{children:(0,h.jsxs)("p",{children:[(0,h.jsxs)("span",{children:[g("delivery.type"),": ",null===_||void 0===_?void 0:_.delivery_type]}),(0,h.jsx)("br",{}),(0,h.jsxs)("span",{children:[g("delivery.address"),": ",null===_||void 0===_||null===(l=_.address)||void 0===l?void 0:l.address]}),(0,h.jsx)("br",{}),(0,h.jsxs)("span",{children:[g("delivery.date"),": ",null===_||void 0===_?void 0:_.delivery_date," ",null===_||void 0===_||null===(t=_.details[0])||void 0===t?void 0:t.delivery_time]}),(0,h.jsx)("br",{}),(0,h.jsxs)("span",{children:[g("note"),": ",null===_||void 0===_?void 0:_.note]})]})})]}),(0,h.jsx)("address",{children:(0,h.jsxs)("p",{children:[(0,h.jsxs)("span",{className:"font-weight-semibold text-dark font-size-md",children:[null===_||void 0===_||null===(i=_.user)||void 0===i?void 0:i.firstname," ",(null===_||void 0===_||null===(a=_.user)||void 0===a?void 0:a.lastname)||""]}),(0,h.jsx)("br",{}),(0,h.jsxs)("span",{children:[g("phone"),": ",null===_||void 0===_?void 0:_.phone]}),(0,h.jsx)("br",{}),(0,h.jsxs)("span",{children:[g("email"),": ",null===_||void 0===_||null===(d=_.user)||void 0===d?void 0:d.email]})]})})]}),(0,h.jsxs)("div",{className:"mt-4",children:[(0,h.jsxs)(be.c,{scroll:{x:!0},dataSource:w,pagination:!1,className:"mb-5",children:[(0,h.jsx)(ke.c,{title:"No.",dataIndex:"id"},"id"),(0,h.jsx)(ke.c,{title:"Product",dataIndex:"product",render:(e,l)=>{var t,n;return(0,h.jsxs)(I.c,{wrap:!0,children:[(0,h.jsx)("span",{children:null===e||void 0===e||null===(t=e.translation)||void 0===t?void 0:t.title}),null===(n=l.addons)||void 0===n?void 0:n.map((e=>{var l,t,n;return(0,h.jsxs)(_e.c,{children:[null===(l=e.stock)||void 0===l||null===(t=l.product)||void 0===t||null===(n=t.translation)||void 0===n?void 0:n.title," x"," ",e.quantity]},e.id)}))]})}},"product"),(0,h.jsx)(ke.c,{title:g("quantity"),dataIndex:"numberQuantity",render:(e,l)=>{var t,n,s,i;return(0,h.jsxs)("span",{children:[l.quantity,null===l||void 0===l||null===(t=l.stock)||void 0===t||null===(n=t.product)||void 0===n||null===(s=n.unit)||void 0===s||null===(i=s.translation)||void 0===i?void 0:i.title]})}},"numberQuantity"),(0,h.jsx)(ke.c,{title:g("price"),dataIndex:"total_price",render:e=>{var l;return(0,z.c)(e,null===_||void 0===_||null===(l=_.currency)||void 0===l?void 0:l.symbol)}},"total_price"),(0,h.jsx)(ke.c,{title:g("tax"),dataIndex:"numberTax",render:e=>{var l;return(0,z.c)(e,null===_||void 0===_||null===(l=_.currency)||void 0===l?void 0:l.symbol)}},"numberTax"),(0,h.jsx)(ke.c,{title:g("total.price"),dataIndex:"discount",render:e=>{var l;return(0,z.c)(e,null===_||void 0===_||null===(l=_.currency)||void 0===l?void 0:l.symbol)}},"discount")]}),(0,h.jsx)("div",{className:"d-flex justify-content-end",children:(0,h.jsxs)("div",{className:"text-right ",children:[(0,h.jsxs)("div",{className:"border-bottom",children:[(0,h.jsxs)("p",{className:"mb-2",children:[(0,h.jsxs)("span",{children:[g("sub-total.amount"),": "]}),(0,z.c)(null===_||void 0===_?void 0:_.details.reduce(((e,l)=>e+l.total_price),0),null===_||void 0===_||null===(o=_.currency)||void 0===o?void 0:o.symbol)]}),(0,h.jsxs)("p",{children:[g("delivery.price")," :"," ",(0,z.c)(null===_||void 0===_?void 0:_.delivery_fee,null===_||void 0===_||null===(c=_.currency)||void 0===c?void 0:c.symbol)]}),(0,h.jsxs)("p",{children:[g("shop.tax")," :"," ",(0,z.c)(null===_||void 0===_?void 0:_.tax,null===_||void 0===_||null===(r=_.currency)||void 0===r?void 0:r.symbol)]}),(0,h.jsxs)("p",{children:[g("product.tax")," :"," ",(0,z.c)(null===_||void 0===_||null===(u=_.details)||void 0===u?void 0:u.reduce(((e,l)=>e+l.tax),0),null===_||void 0===_||null===(v=_.currency)||void 0===v?void 0:v.symbol)]})]}),(0,h.jsxs)("h2",{className:"font-weight-semibold mt-3",children:[(0,h.jsxs)("span",{className:"mr-1",children:[g("grand.total"),": "]}),(0,z.c)(null===_||void 0===_?void 0:_.total_price,null===_||void 0===_||null===(p=_.currency)||void 0===p?void 0:p.symbol)]})]})})]})]})})})};var Se=t(62220),qe=t(84620),Ce=t.n(qe);function Ie(){var e,l,t;const{t:d}=(0,m.G)(),o=(0,u.OY)(),{cartItems:c,cartShops:p,currentBag:x,total:y,coupons:g,currency:f}=(0,u.w1)((e=>e.cart),u.G),k=(0,u.w1)((e=>(0,A.QX)(e.cart))),N=(0,u.w1)((e=>(0,A.KG)(e.cart)),u.G),[C,G]=(0,n.useState)(!1),[V,Y]=(0,n.useState)(null),[B,H]=(0,n.useState)(null),[O]=Q.c.useForm(),{myShop:E}=(0,u.w1)((e=>e.myShop),u.G),F=(0,L.IT)(),P=null===F||void 0===F||null===(e=F.state)||void 0===e?void 0:e.delivery_type,T=e=>{var l;e.quantity!==(null===e||void 0===e||null===(l=e.stock)||void 0===l?void 0:l.quantity)&&e.quantity!==e.max_qty&&o((0,M.iA)({...e,quantity:1}))},K=e=>{1!==e.quantity&&(e.quantity<=e.min_qty||o((0,M.W8)({...e,quantity:1})))};function U(){const e=function(e){var l,t,n,s,i;const a=e.map((e=>{var l,t;return{quantity:e.quantity,stock_id:e.stockID?null===(l=e.stockID)||void 0===l?void 0:l.id:null===(t=e.stock)||void 0===t?void 0:t.id}})),d=e.flatMap((e=>e.addons.map((l=>{var t,n;return{quantity:l.quantity,stock_id:l.stockID,parent_id:e.stockID?null===(t=e.stockID)||void 0===t?void 0:t.id:null===(n=e.stock)||void 0===n?void 0:n.id}})))),o={products:a.concat(d),currency_id:null===f||void 0===f?void 0:f.id,coupon:null===N||void 0===N||null===(l=N.coupon)||void 0===l?void 0:l.name,shop_id:E.id,type:P||(null===N||void 0===N||null===(t=N.deliveries)||void 0===t||null===(n=t.label)||void 0===n?void 0:n.toLowerCase()),address:{latitude:null===N||void 0===N||null===(s=N.address)||void 0===s?void 0:s.lat,longitude:null===N||void 0===N||null===(i=N.address)||void 0===i?void 0:i.lng}};return Ce().stringify(o,{addQueryPrefix:!0})}(k);G(!0),ge.c.calculate(e).then((e=>{var l;let{data:t}=e;const n=t.data,s=n.stocks.map((e=>({...k.find((l=>l.id===e.id)),...e,...e.stock.countable,stock:e.stock.stock_extras,stocks:e.stock.stock_extras,stockID:e.stock})));o((0,M.oz)(s));const i={product_total:null===(l=n.stocks)||void 0===l?void 0:l.reduce(((e,l)=>e+(l.total_price||l.price)),0),product_tax:n.total_tax,shop_tax:n.total_shop_tax,order_total:n.total_price,delivery_fee:n.delivery_fee,service_fee:null===n||void 0===n?void 0:n.service_fee};o((0,M.uq)(i))})).finally((()=>G(!1)))}(0,r.c)((()=>{o((0,v.cB)({perPage:12,currency_id:null===f||void 0===f?void 0:f.id,status:"published",active:1})),k.length&&U()}),[f]),(0,r.c)((()=>{k.length?U():o((0,M._G)())}),[c,x,null===N||void 0===N?void 0:N.address,f]);const R=()=>{var e,l,t,n,s,i,a,c,r,u,m,h,x;if(!f&&!P)return void w.m4.warning(d("please.select.currency"));if(!N.address&&!P)return void w.m4.warning(d("please.select.address"));if(!N.delivery_time&&!P)return void w.m4.warning(d("shop.closed"));if(!N.delivery_date&&!P)return void w.m4.warning(d("please.select.deliveryDate"));G(!0);const j=null===p||void 0===p?void 0:p.map((e=>({stock_id:e.stockID.id,quantity:e.countable_quantity,bonus:e.bonus}))),b=null===p||void 0===p?void 0:p.flatMap((e=>{var l;return null===(l=e.addons)||void 0===l?void 0:l.map((l=>({stock_id:l.id,quantity:l.quantity,parent_id:e.stockID.id})))})),_={user_id:null===(e=N.user)||void 0===e?void 0:e.value,currency_id:null===f||void 0===f?void 0:f.id,rate:null===f||void 0===f?void 0:f.rate,shop_id:E.id,delivery_id:null===N||void 0===N||null===(l=N.deliveries)||void 0===l?void 0:l.label,delivery_fee:N.delivery_fee,coupon:null===(t=g[0])||void 0===t?void 0:t.coupon,tax:y.order_tax,payment_type:null===(n=N.paymentType)||void 0===n?void 0:n.label,delivery_date:N.delivery_date,delivery_address_id:null===(s=N.address)||void 0===s?void 0:s.address,address:{address:null===(i=N.address)||void 0===i?void 0:i.address,office:null,house:null,floor:null},location:{latitude:null===(a=N.address)||void 0===a?void 0:a.lat,longitude:null===(c=N.address)||void 0===c?void 0:c.lng},delivery_time:de()(N.delivery_time,"HH:mm").format("HH:mm"),delivery_type:null===N||void 0===N||null===(r=N.deliveries)||void 0===r||null===(u=r.label)||void 0===u?void 0:u.toLowerCase(),delivery_type_id:null===N||void 0===N||null===(m=N.deliveries)||void 0===m?void 0:m.value,products:j.concat(...b),phone:null===N||void 0===N||null===(h=N.phone)||void 0===h?void 0:h.toString()},k={currency_id:null===f||void 0===f?void 0:f.id,delivery_type:P,payment_type:null===(x=N.paymentType)||void 0===x?void 0:x.label,products:j.concat(...b),shop_id:E.id},S=P?k:_,q={payment_sys_id:N.paymentType.value};ge.c.create(S).then((e=>{!function(e,l){Se.c.create(e,l).then((e=>{(e=>{Y(e),o((0,v.cB)({perPage:12,currency_id:null===f||void 0===f?void 0:f.id,status:"published",active:1}))})(e.data.id),O.resetFields()})).finally((()=>G(!1)))}(e.data.id,q)})).catch((e=>console.error(e))).finally((()=>G(!1)))};return(0,h.jsxs)(s.default,{children:[C&&(0,h.jsx)("div",{className:"loader",children:(0,h.jsx)(j.c,{})}),(0,h.jsxs)("div",{className:"card-save",children:[p.map((e=>{var l,t,n,s,c,r,u,v,p,m;return(0,h.jsx)("div",{children:!0!==e.bonus?(0,h.jsx)("div",{className:"custom-cart-container",children:(0,h.jsxs)(i.c,{className:"product-row",children:[(0,h.jsx)(q.c,{width:70,height:"auto",src:(0,_.c)(e.img),preview:!0,placeholder:!0,className:"rounded"}),(0,h.jsx)(a.c,{span:18,className:"product-col",children:(0,h.jsxs)("div",{children:[(0,h.jsx)("span",{className:"product-name",children:null===e||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title}),(0,h.jsx)("br",{}),(0,h.jsx)(I.c,{wrap:!0,className:"mt-2",children:null===e||void 0===e||null===(t=e.stock)||void 0===t?void 0:t.map((e=>(0,h.jsx)("span",{className:"extras-text rounded pr-2 pl-2",children:e.value})))}),(0,h.jsx)("br",{}),(0,h.jsx)(I.c,{wrap:!0,className:"mt-2",children:null===(n=e.addons)||void 0===n?void 0:n.map((e=>{var l,t;return(0,h.jsxs)("span",{className:"extras-text rounded pr-2 pl-2",children:[null===e||void 0===e||null===(l=e.countable)||void 0===l||null===(t=l.translation)||void 0===t?void 0:t.title," x"," ",e.quantity]})}))}),(0,h.jsxs)("div",{className:"product-counter",children:[(0,h.jsx)("span",{children:(0,h.jsx)("span",{children:(0,z.c)((null===e||void 0===e?void 0:e.total_price)||(null===e||void 0===e?void 0:e.price),null===f||void 0===f?void 0:f.symbol)})}),(0,h.jsxs)("div",{className:"count",children:[(0,h.jsx)(S.c,{className:"button-counter",shape:"circle",icon:(0,h.jsx)(D.c,{size:14}),onClick:()=>K(e)}),(0,h.jsxs)("span",{children:[e.countable_quantity*((null===e||void 0===e?void 0:e.interval)||1),null===e||void 0===e||null===(s=e.unit)||void 0===s||null===(c=s.translation)||void 0===c?void 0:c.title]}),(0,h.jsx)(S.c,{className:"button-counter",shape:"circle",icon:(0,h.jsx)(b.c,{size:14}),onClick:()=>T(e)}),(0,h.jsx)(S.c,{className:"button-counter",shape:"circle",onClick:()=>{return l=e,o((0,M.Qd)(l));var l},icon:(0,h.jsx)(ye.c,{size:14})})]})]})]})})]})},e.id):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("h4",{className:"mt-2",children:d("bomus.product")}),(0,h.jsx)("div",{className:"custom-cart-container",children:(0,h.jsxs)(i.c,{className:"product-row",children:[(0,h.jsx)(q.c,{width:70,height:"auto",src:(0,_.c)(e.img),preview:!0,placeholder:!0,className:"rounded"}),(0,h.jsx)(a.c,{span:18,className:"product-col",children:(0,h.jsxs)("div",{children:[(0,h.jsx)("span",{className:"product-name",children:null===e||void 0===e||null===(r=e.translation)||void 0===r?void 0:r.title}),(0,h.jsx)("br",{}),(0,h.jsx)(I.c,{wrap:!0,className:"mt-2",children:null===e||void 0===e||null===(u=e.stock)||void 0===u?void 0:u.map((e=>(0,h.jsx)("span",{className:"extras-text rounded pr-2 pl-2",children:e.value})))}),(0,h.jsx)("br",{}),(0,h.jsx)(I.c,{wrap:!0,className:"mt-2",children:null===(v=e.addons)||void 0===v?void 0:v.map((e=>{var l,t;return(0,h.jsxs)("span",{className:"extras-text rounded pr-2 pl-2",children:[null===e||void 0===e||null===(l=e.countable)||void 0===l||null===(t=l.translation)||void 0===t?void 0:t.title," x"," ",e.quantity]})}))}),(0,h.jsxs)("div",{className:"product-counter",children:[(0,h.jsx)("span",{children:(0,z.c)((null===e||void 0===e?void 0:e.total_price)||(null===e||void 0===e?void 0:e.price),null===f||void 0===f?void 0:f.symbol)}),(0,h.jsxs)("div",{className:"count",children:[(0,h.jsx)(S.c,{className:"button-counter",shape:"circle",icon:(0,h.jsx)(D.c,{size:14}),onClick:()=>K(e),disabled:!0}),(0,h.jsxs)("span",{children:[e.countable_quantity*((null===e||void 0===e?void 0:e.interval)||1),null===e||void 0===e||null===(p=e.unit)||void 0===p||null===(m=p.translation)||void 0===m?void 0:m.title]}),(0,h.jsx)(S.c,{className:"button-counter",shape:"circle",icon:(0,h.jsx)(b.c,{size:14}),onClick:()=>T(e),disabled:!0})]})]})]})})]})},e.id)]})})})),p.length?(0,h.jsxs)("div",{className:"d-flex my-3",children:[(0,h.jsx)(X.default,{placeholder:d("coupon"),className:"w-100 mr-2",addonAfter:null!==(l=g.find((e=>e.shop_id===p[0].shop_id)))&&void 0!==l&&l.verified?(0,h.jsx)(je.c,{style:{color:"#18a695"}}):null,defaultValue:null===(t=g.find((e=>e.shop_id===p[0].shop_id)))||void 0===t?void 0:t.coupon,onBlur:e=>{var l;return o((0,M.ew)({coupon:e.target.value,user_id:null===(l=N.user)||void 0===l?void 0:l.value,shop_id:p[0].shop_id,verified:!1}))}}),(0,h.jsx)(S.c,{onClick:()=>function(e){let l=g.find((l=>l.shop_id===e));l&&(H(e),fe.c.checkCoupon(l).then((l=>o((0,M.uA)({shop_id:e,price:l.data.price,verified:!0})))).catch((()=>o((0,M.uA)({shop_id:e,price:0,verified:!1})))).finally((()=>H(null))))}(p[0].shop_id),loading:B===p[0].shop_id,children:d("check.coupon")})]}):"",(0,h.jsx)(i.c,{className:"all-price-row",children:(0,h.jsxs)(a.c,{span:24,className:"col",children:[(0,h.jsxs)("div",{className:"all-price-container",children:[(0,h.jsx)("span",{children:d("sub.total")}),(0,h.jsx)("span",{children:(0,z.c)(y.product_total,null===f||void 0===f?void 0:f.symbol)})]}),(0,h.jsxs)("div",{className:"all-price-container",children:[(0,h.jsx)("span",{children:d("product.tax")}),(0,h.jsx)("span",{children:(0,z.c)(y.product_tax,null===f||void 0===f?void 0:f.symbol)})]}),(0,h.jsxs)("div",{className:"all-price-container",children:[(0,h.jsx)("span",{children:d("shop.tax")}),(0,h.jsx)("span",{children:(0,z.c)(y.shop_tax,null===f||void 0===f?void 0:f.symbol)})]}),(0,h.jsxs)("div",{className:"all-price-container",children:[(0,h.jsx)("span",{children:d("delivery.fee")}),(0,h.jsx)("span",{children:(0,z.c)(y.delivery_fee,null===f||void 0===f?void 0:f.symbol)})]})]})}),(0,h.jsxs)(i.c,{className:"submit-row",children:[(0,h.jsxs)(a.c,{span:14,className:"col",children:[(0,h.jsx)("span",{children:d("total.amount")}),(0,h.jsx)("span",{children:(0,z.c)(y.order_total,null===f||void 0===f?void 0:f.symbol)})]}),(0,h.jsx)(a.c,{className:"col2",children:(0,h.jsx)(S.c,{type:"primary",onClick:()=>R(),disabled:!p.length,children:d("place.order")})})]})]}),V?(0,h.jsx)(Ne,{orderId:V,handleClose:()=>{Y(null),o((0,M.am)()),0!==x&&o((0,M.CY)(x)),w.m4.success(d("successfully.closed"))}}):""]})}function Ge(){return(0,h.jsx)("div",{className:"pos-system",children:(0,h.jsx)(y.default,{className:"site-layout",children:(0,h.jsxs)(i.c,{gutter:24,children:[(0,h.jsxs)(a.c,{span:15,children:[(0,h.jsx)(x,{}),(0,h.jsx)(U,{})]}),(0,h.jsxs)(a.c,{span:9,children:[(0,h.jsx)(xe,{}),(0,h.jsx)(Ie,{})]})]})})})}},59956:(e,l,t)=>{"use strict";t.d(l,{c:()=>o});var n=t(30800),s=t(99584);const i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h720c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"minus",theme:"outlined"};var a=t(47164),d=function(e,l){return s.createElement(a.c,(0,n.c)((0,n.c)({},e),{},{ref:l,icon:i}))};d.displayName="MinusOutlined";const o=s.forwardRef(d)},3952:(e,l,t)=>{"use strict";t.d(l,{c:()=>o});var n=t(30800),s=t(99584);const i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"};var a=t(47164),d=function(e,l){return s.createElement(a.c,(0,n.c)((0,n.c)({},e),{},{ref:l,icon:i}))};d.displayName="PlusCircleOutlined";const o=s.forwardRef(d)},19600:(e,l,t)=>{"use strict";t.d(l,{c:()=>o});var n=t(30800),s=t(99584);const i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M820 436h-40c-4.4 0-8 3.6-8 8v40c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-40c0-4.4-3.6-8-8-8zm32-104H732V120c0-4.4-3.6-8-8-8H300c-4.4 0-8 3.6-8 8v212H172c-44.2 0-80 35.8-80 80v328c0 17.7 14.3 32 32 32h168v132c0 4.4 3.6 8 8 8h424c4.4 0 8-3.6 8-8V772h168c17.7 0 32-14.3 32-32V412c0-44.2-35.8-80-80-80zM360 180h304v152H360V180zm304 664H360V568h304v276zm200-140H732V500H292v204H160V412c0-6.6 5.4-12 12-12h680c6.6 0 12 5.4 12 12v292z"}}]},name:"printer",theme:"outlined"};var a=t(47164),d=function(e,l){return s.createElement(a.c,(0,n.c)((0,n.c)({},e),{},{ref:l,icon:i}))};d.displayName="PrinterOutlined";const o=s.forwardRef(d)},75456:(e,l)=>{"use strict";l.c=void 0;var t=function(e){return null};l.c=t},16204:()=>{}}]);