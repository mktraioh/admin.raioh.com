(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[8392],{4400:(e,t,a)=>{"use strict";a.d(t,{c:()=>h});var o=a(99584),n=a(68496),r=a(11672),l=a(36228),s=a(98980),i=a(97884);const c={position:"absolute",zIndex:"1"},d={position:"absolute",zIndex:"1",right:"0",top:"-2px"},u=e=>{let{title:t,series:a,width:u,height:h,xAxis:v,customOptions:p,card:x,type:m,extra:f,direction:g,bodyClass:y}=e,j=JSON.parse(JSON.stringify((e=>{switch(e){case"line":default:return s.YQ;case"bar":return s.YA;case"area":return s.Ur;case"pie":return s.cX}})(m)));const b=window.innerWidth<768,w=()=>{if(C.current){var e;const t=C.current.querySelectorAll("div.apexcharts-legend")[0];t.style.marginRight="".concat(b?0:null===(e=_.current)||void 0===e?void 0:e.offsetWidth,"px"),"rtl"===g&&(t.style.right="auto",t.style.left="0"),b&&(t.style.position="relative",t.style.top=0,t.style.justifyContent="start",t.style.padding=0)}};(0,o.useEffect)((()=>{w()}),[]);const _=(0,o.useRef)(null),C=(0,o.useRef)();j.xaxis={categories:v},p&&(j={...j,...p});const z=()=>(0,i.jsx)(l.cp,{onResize:void setTimeout((()=>{w()}),600),children:(0,i.jsx)("div",{style:"rtl"===g?{direction:"ltr"}:{},className:"chartRef",ref:C,children:(0,i.jsx)(r.c,{options:j,type:m,series:a,width:u,height:h})})});return(0,i.jsx)(i.Fragment,{children:x?(0,i.jsx)(n.default,{children:(0,i.jsxs)("div",{className:"position-relative ".concat(y),children:[(0,i.jsx)("div",{style:b?{}:c,children:t})&&(0,i.jsx)("h4",{className:"font-weight-bold",style:b?{}:c,children:t}),f&&(0,i.jsx)("div",{ref:_,style:b?{}:d,children:f}),z()]})}):z()})};u.defaultProps={series:[],height:300,width:"100%",card:!0,type:"line"};const h=u},53992:(e,t,a)=>{"use strict";a.d(t,{c:()=>x});var o=a(99584),n=a(49308),r=a(92200),l=a(66296),s=a(26012),i=a(72192),c=a(35928),d=a(87228),u=a(55512),h=a(65236),v=a(97884);const{Text:p}=n.default,x=e=>{let{columns:t=[],setColumns:a,style:n,size:x="",iconOnly:m}=e;const{t:f}=(0,h.G)(),[g,y]=(0,o.useState)(!1),j=(0,v.jsx)(r.c,{children:null===t||void 0===t?void 0:t.map(((e,o)=>(0,v.jsx)(r.c.Item,{children:(0,v.jsxs)(l.c,{className:"d-flex justify-content-between",children:[(0,v.jsx)(p,{children:e.title}),(0,v.jsx)(s.c,{defaultChecked:!0,onClick:()=>function(e){const o=null===t||void 0===t?void 0:t.map((t=>(t.dataIndex===e.dataIndex&&(t.is_show=!(null!==t&&void 0!==t&&t.is_show)),t)));a(o)}(e),disabled:1===o})]})},e+o)))});return(0,v.jsx)(i.c,{overlay:j,trigger:["click"],onVisibleChange:e=>{y(e)},visible:g,children:(0,v.jsx)(c.c,{title:f("change.columns"),children:(0,v.jsx)(d.c,{style:{...n},size:x,icon:(0,v.jsx)(u.c,{}),children:m?null:f("Columns")})})})}},53680:(e,t,a)=>{"use strict";a.d(t,{c:()=>y});var o=a(49308),n=a(68768),r=a(10260),l=a(68496),s=a(66296),i=a(2664),c=a(50452),d=a(99584),u=a(58048),h=a(44672),v=a(4400),p=a(98980),x=a(65236),m=a(9147),f=a(97884);const{Title:g}=o.default,y=e=>{let{reportData:t={}}=e;const{by_time:a,options:o,handleByTime:y,chart_type:j,setChartType:b}=(0,d.useContext)(m.a),{t:w}=(0,x.G)(),_=(0,d.useMemo)((()=>{var e;return null===t||void 0===t||null===(e=t.chart)||void 0===e?void 0:e.map((e=>e.time))}),[null===t||void 0===t?void 0:t.chart]),C=(0,d.useMemo)((()=>{var e;return Boolean(t.charts)?t.charts.map((e=>{var t;return{name:e.translation.title,data:(null===(t=e.stocks)||void 0===t?void 0:t.map((e=>e.total_order_quantity||e.avg_quantity||e.quantity||e.count||e.price||e.order_details_sum_quantity||0)))||[]}})):[{name:w("orders"),data:(null===t||void 0===t||null===(e=t.chart)||void 0===e?void 0:e.map((e=>parseInt(e.count||e.total_price||e.quantity||e.price||e.products_count||e.order_details_avg_quantity||e.order_details_avg_total_price||e.order_details_sum_quantity||e.avg_price||e.avg_quantity||0,10))))||[]}]}),[null===t||void 0===t?void 0:t.chart]);return(0,f.jsx)(n.c,{gutter:24,children:(0,f.jsx)(r.c,{span:24,children:(0,f.jsxs)(l.default,{children:[(0,f.jsx)(n.c,{gutter:24,className:"w-100",children:(0,f.jsxs)("div",{className:"d-flex justify-content-between w-100",children:[(0,f.jsx)(s.c,{size:"large",className:"d-flex",children:(0,f.jsx)(g,{level:3,className:"mb-0",children:w("item.sold")})}),(0,f.jsxs)("div",{className:"d-flex",children:[(0,f.jsx)(i.default,{style:{width:100},onChange:y,options:o,defaultValue:a}),(0,f.jsx)(c.c,{type:"vertical",style:{height:"100%"}}),(0,f.jsxs)(s.c,{children:[(0,f.jsx)(u.c,{style:{fontSize:"22px",cursor:"pointer",color:"area"===j?"green":""},onClick:()=>b("area")}),(0,f.jsx)(h.c,{style:{fontSize:"22px",cursor:"pointer",color:"bar"===j?"green":""},onClick:()=>b("bar")})]})]})]})}),(0,f.jsx)(c.c,{}),(0,f.jsx)(v.c,{type:j||"area",card:!1,series:C,xAxis:_,height:280,customOptions:{colors:[p.yY[1],p.yY[2],p.yY[3],p.yY[4],p.yY[5],p.yY[6],p.yY[0]],legend:{show:!1},stroke:{width:2.5,curve:"smooth"}}})]})})})}},40748:(e,t,a)=>{"use strict";a.d(t,{c:()=>i});var o=a(99584),n=a(46712),r=a(78816),l=a(6724),s=a(97884);function i(e){let{handleChange:t,defaultValue:a,resetSearch:i,...c}=e;const[d,u]=(0,o.useState)(a),h=(0,o.useMemo)((()=>(0,r.debounce)((e=>{t(e)}),800)),[t]);return(0,o.useEffect)((()=>{u(a)}),[i,a]),(0,s.jsx)(n.default,{value:d,onChange:e=>{u(e.target.value),h(e.target.value)},prefix:(0,s.jsx)(l.c,{}),...c})}},71376:(e,t,a)=>{"use strict";a.d(t,{g:()=>c});var o=a(99584),n=a(95976),r=a.n(n),l=a(2664),s=a(37728),i=a(97884);const c=e=>{let{fetchOptions:t,debounceTimeout:a=400,onClear:n,...c}=e;const[d,u]=(0,o.useState)(!1),[h,v]=(0,o.useState)([]),p=(0,o.useMemo)((()=>r()((e=>{v([]),u(!0),t(e).then((e=>{v(e),u(!1)}))}),a)),[t,a]);return(0,i.jsx)(l.default,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:p,onClear:()=>{p(""),n&&n()},notFoundContent:d?(0,i.jsx)(s.c,{size:"small"}):"no results",...c,options:h,onFocus:()=>{p("")}})}},98980:(e,t,a)=>{"use strict";a.d(t,{Ur:()=>r,YA:()=>l,YQ:()=>n,cX:()=>s,yY:()=>o});const o=["#3e82f7","#04d182","#ff6b72","#ffc107","#a461d8","#fa8c16","#17bcff"],n={chart:{zoom:{enabled:!1},toolbar:{show:!1}},colors:[...o],dataLabels:{enabled:!1},stroke:{width:3,curve:"smooth",lineCap:"round"},legend:{position:"top",horizontalAlign:"right",offsetY:-15,itemMargin:{vertical:20},tooltipHoverFormatter:function(e,t){return e+" - "+t.w.globals.series[t.seriesIndex][t.dataPointIndex]}},xaxis:{categories:[]},grid:{xaxis:{lines:{show:!0}},yaxis:{lines:{show:!1}}}},r={...n},l={chart:{zoom:{enabled:!1},toolbar:{show:!1}},plotOptions:{bar:{horizontal:!1,columnWidth:"25px",startingShapre:"rounded",endingShape:"rounded"}},colors:[...o],dataLabels:{enabled:!1},stroke:{show:!0,width:6,curve:"smooth",colors:["transparent"]},legend:{position:"top",horizontalAlign:"right",offsetY:-15,inverseOrder:!0,itemMargin:{vertical:20},tooltipHoverFormatter:function(e,t){return e+" - "+t.w.globals.series[t.seriesIndex][t.dataPointIndex]}},xaxis:{categories:[]},fill:{opacity:1},tooltip:{y:{formatter:e=>"".concat(e)}}},s={colors:[...o],plotOptions:{pie:{size:200,donut:{labels:{show:!0,total:{show:!1,showAlways:!0,label:"",fontSize:"18px",fontFamily:"Roboto",fontWeight:"bold",color:"#1a3353",formatter:function(e){return e.globals.seriesTotals.reduce(((e,t)=>e+t),0)+"Orders count"}}},size:"100%"}}},labels:[],dataLabels:{enabled:!0},legend:{show:!0}}},24968:(e,t,a)=>{"use strict";function o(e){if(!e)return"0";return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$")+" "+Number(e).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")}a.d(t,{c:()=>o})},68712:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>A});var o=a(49308),n=a(73568),r=a(15752),l=a(98044),s=a(37728),i=a(68768),c=a(10260),d=a(66296),u=a(68496),h=a(87228),v=a(99584),p=a(40748),x=a(34296),m=a(15344),f=a(18896),g=a(32712),y=a(53680),j=a(83072),b=a.n(j),w=a(9147),_=a(53992),C=a(52640),z=a(31880),k=a(68256),S=a(23424),q=a(16940),I=a(84620),N=a.n(I),R=a(33072),H=a(24968),O=a(1284),V=a(71376),Y=a(97884);const{Text:M,Title:T}=o.default,{RangePicker:E}=n.default,A=()=>{var e,t,a;const n=(0,g.OY)(),j=(0,S.IT)(),I=(0,S.i6)(),A=N().parse(j.search,[])["?category_id"],L=N().parse(j.search,[])["?product_id"],[B,F]=(0,v.useState)(),[P,D]=(0,v.useState)(10),{date_from:G,date_to:K,by_time:W,chart:J,handleChart:Q,handleDateRange:U}=(0,v.useContext)(w.a),{activeMenu:X}=(0,g.w1)((e=>e.menu),g.G),{loading:$,chartData:Z,productList:ee}=(0,g.w1)((e=>e.productReport),g.G),[te,ae]=(0,v.useState)([]),[oe,ne]=(0,v.useState)(!1),[re,le]=(0,v.useState)(""),{defaultCurrency:se}=(0,g.w1)((e=>e.currency),g.G),[ie,ce]=(0,v.useState)([{title:(0,R.t)("product.title"),dataIndex:"translation_title",key:"translation_title",render:(e,t)=>(0,Y.jsx)(q.cH,{to:"/report/products?product_id=".concat(t.id),children:null===t||void 0===t?void 0:t.translation.title}),is_show:!0,sorter:(e,t)=>{var a,o;return null===e||void 0===e||null===(a=e.translation)||void 0===a?void 0:a.title.localeCompare(null===t||void 0===t||null===(o=t.translation)||void 0===o?void 0:o.title)}},{title:(0,R.t)("bar.code"),dataIndex:"bar_code",key:"bar_code",is_show:!0,render:(e,t)=>(0,Y.jsx)(Y.Fragment,{children:(null===t||void 0===t?void 0:t.bar_code)||"-"})},{title:(0,R.t)("item.sold"),dataIndex:"quantity",key:"quantity",sorter:(e,t)=>e.quantity-t.quantity,is_show:!0,render:(e,t)=>{var a;const o=null===t||void 0===t||null===(a=t.stocks)||void 0===a?void 0:a.map((e=>e.order_quantity)).reduce(((e,t)=>e+t),0);return(0,Y.jsx)("div",{children:o})}},{title:(0,R.t)("net.sales"),dataIndex:"price",key:"price",is_show:!0,render:e=>(0,H.c)(e,null===se||void 0===se?void 0:se.symbol),sorter:(e,t)=>e.price-t.price},{title:(0,R.t)("orders"),key:"count",dataIndex:"count",is_show:!0,sorter:(e,t)=>e.count-t.count},{title:(0,R.t)("category"),key:"category",dataIndex:"category",is_show:!0,render:(e,t)=>{var a,o,n;return(0,Y.jsx)(q.cH,{to:"/report/products?category_id=".concat(null===(a=t.category)||void 0===a?void 0:a.id),children:null===t||void 0===t||null===(o=t.category)||void 0===o||null===(n=o.translation)||void 0===n?void 0:n.title})}},{title:(0,R.t)("status"),key:"active",dataIndex:"active",render:(e,t)=>{const a=Boolean(null===t||void 0===t?void 0:t.active);return(0,Y.jsx)(l.c,{color:a?"green":"red",children:a?"Active":"Inactive"},t.id)},is_show:!0}]),de=(0,v.useMemo)((()=>[{label:"item.sold",value:"quantity",qty:"quantity",price:!1},{label:"net.sales",value:"price",qty:"price",price:!0},{label:"orders",value:"count",qty:"count",price:!1}]),[]),ue=()=>{const e={date_from:G,date_to:K,type:W,chart:J};A&&(e.categories=[A]),L&&(e.products=[L]),de.find((e=>e.value===J))&&n((0,z.c1)(e))},he=(e,t)=>{const a={date_from:G,date_to:K,type:W,page:e,perPage:t,search:re||null};A&&(a.categories=[A]),L&&(a.products=[L]),B&&(a.shop_id=B),n((0,z.C0)(a))};(0,v.useEffect)((()=>{Q(de[0].value)}),[]),(0,v.useEffect)((()=>{X.refetch&&(he(),ue(),n((0,f.CO)(X)))}),[X.refetch]),(0,k.c)((()=>{he()}),[K,re,A,L,W,G,B]),(0,k.c)((()=>{ue()}),[K,W,J,A,L,G]);const ve={selectedRowKeys:te,onChange:e=>{ae(e)}};return(0,Y.jsxs)(s.c,{size:"large",spinning:$,children:[(0,Y.jsx)(i.c,{gutter:24,className:"mb-3",children:(0,Y.jsx)(c.c,{span:12,children:(0,Y.jsx)(d.c,{children:(0,Y.jsx)(E,{defaultValue:[b()(G),b()(K)],onChange:U})})})}),(0,Y.jsx)(i.c,{gutter:24,className:"report-products",children:null===de||void 0===de?void 0:de.map((e=>(0,Y.jsx)(c.c,{span:8,onClick:()=>Q(e.value),children:(0,Y.jsxs)(u.default,{className:J===e.value&&"active",children:[(0,Y.jsx)(i.c,{className:"mb-5",children:(0,Y.jsx)(c.c,{children:(0,Y.jsx)(M,{children:(0,R.t)(e.label)})})}),(0,Y.jsx)(i.c,{gutter:24,children:(0,Y.jsx)(c.c,{span:12,children:(0,Y.jsx)(T,{level:2,children:null!==e&&void 0!==e&&e.price?(0,H.c)(Z[e.qty],null===se||void 0===se?void 0:se.symbol):Z[e.qty]})})})]})},e.label)))}),(0,Y.jsx)(y.c,{reportData:Z,chart_data:"quantities_sum"}),(0,Y.jsxs)(u.default,{children:[(0,Y.jsxs)(d.c,{className:"d-flex justify-content-between align-center",children:[(0,Y.jsx)(o.default.Text,{strong:!0,level:3,children:(0,R.t)("products")}),(0,Y.jsxs)(d.c,{className:"d-flex justify-content-between",children:[(0,Y.jsx)(p.c,{style:{minWidth:"300px"},handleChange:e=>le(e)}),(0,Y.jsx)(V.g,{fetchOptions:e=>{const t={perPage:10,search:e};return O.c.selectPaginate(t).then((e=>null===e||void 0===e?void 0:e.map((e=>{var t;return{label:null===e||void 0===e||null===(t=e.translation)||void 0===t?void 0:t.title,value:null===e||void 0===e?void 0:e.id}})))).catch((e=>console.log("report product ERROR => ",e)))},placeholder:(0,R.t)("select.shop"),onSelect:e=>F(e.value),onClear:()=>(F(void 0),(0,z.C0)(),void(0,z.c1)({}))}),(0,Y.jsx)(h.c,{type:Boolean(te.length)||A||L||B?"primary":"default",danger:Boolean(te.length)||!!A||!!L||!!B,onClick:()=>{n((0,z.yS)()),F(void 0),ae([]),he(),ue(),I("/report/products")},children:(0,R.t)("clear")}),(0,Y.jsx)(h.c,{icon:(0,Y.jsx)(x.c,{}),loading:oe,onClick:()=>{ne(!0),m.c.getReportProductList({date_from:G,date_to:K,type:W,export:"excel",shop_id:B,products:null!==ve&&void 0!==ve&&ve.selectedRowKeys[0]?null===ve||void 0===ve?void 0:ve.selectedRowKeys:L?[L]:void 0}).then((e=>{const t=C.sp+e.data.file_name;window.location.href=t})).finally((()=>ne(!1)))},children:(0,R.t)("download")}),(0,Y.jsx)(_.c,{columns:ie,setColumns:ce})]})]}),(0,Y.jsx)(r.c,{expandable:{expandedRowRender:e=>{const t=[{title:(0,R.t)("extras.name"),dataIndex:"Extras name",render:(e,t)=>{var a;return null===(a=t.extras)||void 0===a?void 0:a.map((e=>{var t;return null===(t=e.group.translation)||void 0===t?void 0:t.title})).join(",")},key:"Extras name"},{title:(0,R.t)("item.sold"),dataIndex:"order_quantity",key:"order_quantity"},{title:(0,R.t)("net.sales"),dataIndex:"upgradeNum",render:(e,t)=>(0,H.c)(t.price,null===se||void 0===se?void 0:se.symbol),key:"upgradeNum"},{title:(0,R.t)("orders"),dataIndex:"count",key:"count"},{title:(0,R.t)("stock"),dataIndex:"quantity",key:"quantity"}];return(0,Y.jsx)(r.c,{scroll:{x:!0},columns:t,dataSource:e.stocks,pagination:!1})},defaultExpandedRowKeys:["0"]},rowSelection:ve,columns:null===ie||void 0===ie?void 0:ie.filter((e=>e.is_show)),dataSource:null===(e=ee.data)||void 0===e?void 0:e.data,rowKey:e=>e.id,loading:$,pagination:{pageSize:P,page:(null===ee||void 0===ee||null===(t=ee.data)||void 0===t?void 0:t.meta.page)||1,total:null===ee||void 0===ee||null===(a=ee.data)||void 0===a?void 0:a.meta.total,defaultCurrent:1},onChange:e=>{const{pageSize:t,current:a}=e;D(t),he(a,t)},scroll:{x:1500}})]})]})}},34296:(e,t,a)=>{"use strict";a.d(t,{c:()=>i});var o=a(30800),n=a(99584);const r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M624 706.3h-74.1V464c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v242.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.7a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9z"}},{tag:"path",attrs:{d:"M811.4 366.7C765.6 245.9 648.9 160 512.2 160S258.8 245.8 213 366.6C127.3 389.1 64 467.2 64 560c0 110.5 89.5 200 199.9 200H304c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8h-40.1c-33.7 0-65.4-13.4-89-37.7-23.5-24.2-36-56.8-34.9-90.6.9-26.4 9.9-51.2 26.2-72.1 16.7-21.3 40.1-36.8 66.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0152.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10C846.1 454.5 884 503.8 884 560c0 33.1-12.9 64.3-36.3 87.7a123.07 123.07 0 01-87.6 36.3H720c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h40.1C870.5 760 960 670.5 960 560c0-92.7-63.1-170.7-148.6-193.3z"}}]},name:"cloud-download",theme:"outlined"};var l=a(47164),s=function(e,t){return n.createElement(l.c,(0,o.c)((0,o.c)({},e),{},{ref:t,icon:r}))};s.displayName="CloudDownloadOutlined";const i=n.forwardRef(s)},58048:(e,t,a)=>{"use strict";a.d(t,{c:()=>i});var o=a(30800),n=a(99584);const r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM305.8 637.7c3.1 3.1 8.1 3.1 11.3 0l138.3-137.6L583 628.5c3.1 3.1 8.2 3.1 11.3 0l275.4-275.3c3.1-3.1 3.1-8.2 0-11.3l-39.6-39.6a8.03 8.03 0 00-11.3 0l-230 229.9L461.4 404a8.03 8.03 0 00-11.3 0L266.3 586.7a8.03 8.03 0 000 11.3l39.5 39.7z"}}]},name:"line-chart",theme:"outlined"};var l=a(47164),s=function(e,t){return n.createElement(l.c,(0,o.c)((0,o.c)({},e),{},{ref:t,icon:r}))};s.displayName="LineChartOutlined";const i=n.forwardRef(s)},55512:(e,t,a)=>{"use strict";a.d(t,{c:()=>i});var o=a(30800),n=a(99584);const r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 208H676V232h212v136zm0 224H676V432h212v160zM412 432h200v160H412V432zm200-64H412V232h200v136zm-476 64h212v160H136V432zm0-200h212v136H136V232zm0 424h212v136H136V656zm276 0h200v136H412V656zm476 136H676V656h212v136z"}}]},name:"table",theme:"outlined"};var l=a(47164),s=function(e,t){return n.createElement(l.c,(0,o.c)((0,o.c)({},e),{},{ref:t,icon:r}))};s.displayName="TableOutlined";const i=n.forwardRef(s)},16204:()=>{}}]);