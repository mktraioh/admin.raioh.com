(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[5448],{1428:(e,t,l)=>{"use strict";l.d(t,{c:()=>c});l(99584);var n=l(87228),a=l(59424),s=l(61072),i=l(65236),d=l(75088),o=l(97884);function c(e){let{size:t="",onClick:l,type:c="default",...r}=e;const{t:u}=(0,i.G)(),{isDemo:v}=(0,d.c)();return(0,o.jsx)(n.c,{size:t,icon:(0,o.jsx)(a.c,{}),onClick:e=>{v?s.m4.warning(u("cannot.work.demo")):l(e)},type:c,...r})}},53992:(e,t,l)=>{"use strict";l.d(t,{c:()=>p});var n=l(99584),a=l(49308),s=l(92200),i=l(66296),d=l(26012),o=l(72192),c=l(35928),r=l(87228),u=l(55512),v=l(65236),h=l(97884);const{Text:m}=a.default,p=e=>{let{columns:t=[],setColumns:l,style:a,size:p="",iconOnly:x}=e;const{t:f}=(0,v.G)(),[j,y]=(0,n.useState)(!1),g=(0,h.jsx)(s.c,{children:null===t||void 0===t?void 0:t.map(((e,n)=>(0,h.jsx)(s.c.Item,{children:(0,h.jsxs)(i.c,{className:"d-flex justify-content-between",children:[(0,h.jsx)(m,{children:e.title}),(0,h.jsx)(d.c,{defaultChecked:!0,onClick:()=>function(e){const n=null===t||void 0===t?void 0:t.map((t=>(t.dataIndex===e.dataIndex&&(t.is_show=!(null!==t&&void 0!==t&&t.is_show)),t)));l(n)}(e),disabled:1===n})]})},e+n)))});return(0,h.jsx)(o.c,{overlay:g,trigger:["click"],onVisibleChange:e=>{y(e)},visible:j,children:(0,h.jsx)(c.c,{title:f("change.columns"),children:(0,h.jsx)(r.c,{style:{...a},size:p,icon:(0,h.jsx)(u.c,{}),children:x?null:f("Columns")})})})}},88200:(e,t,l)=>{"use strict";l.d(t,{c:()=>o});l(99584);var n=l(95884),a=l(31508),s=l(87228),i=l(65236),d=l(97884);const o=e=>{let{open:t,handleCancel:l,text:o,click:c,loading:r,subTitle:u}=e;const{t:v}=(0,i.G)();return(0,d.jsxs)(n.default,{closable:!1,visible:t,footer:null,centered:!0,children:[(0,d.jsx)(a.cp,{status:"warning",title:o,subTitle:u}),(0,d.jsxs)("div",{className:"d-flex justify-content-end",children:[(0,d.jsx)(s.c,{type:"primary",className:"mr-2",onClick:c,loading:r,children:v("yes")}),(0,d.jsx)(s.c,{onClick:()=>l(),children:v("no")})]})]})}},40748:(e,t,l)=>{"use strict";l.d(t,{c:()=>o});var n=l(99584),a=l(46712),s=l(78816),i=l(6724),d=l(97884);function o(e){let{handleChange:t,defaultValue:l,resetSearch:o,...c}=e;const[r,u]=(0,n.useState)(l),v=(0,n.useMemo)((()=>(0,s.debounce)((e=>{t(e)}),800)),[t]);return(0,n.useEffect)((()=>{u(l)}),[o,l]),(0,d.jsx)(a.default,{value:r,onChange:e=>{u(e.target.value),v(e.target.value)},prefix:(0,d.jsx)(i.c,{}),...c})}},71376:(e,t,l)=>{"use strict";l.d(t,{g:()=>c});var n=l(99584),a=l(95976),s=l.n(a),i=l(2664),d=l(37728),o=l(97884);const c=e=>{let{fetchOptions:t,debounceTimeout:l=400,onClear:a,...c}=e;const[r,u]=(0,n.useState)(!1),[v,h]=(0,n.useState)([]),m=(0,n.useMemo)((()=>s()((e=>{h([]),u(!0),t(e).then((e=>{h(e),u(!1)}))}),l)),[t,l]);return(0,o.jsx)(i.default,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:m,onClear:()=>{m(""),a&&a()},notFoundContent:r?(0,o.jsx)(d.c,{size:"small"}):"no results",...c,options:v,onFocus:()=>{m("")}})}},19576:(e,t,l)=>{"use strict";function n(e){switch(e){case"ascend":return"asc";case"descend":return"desc"}}l.d(t,{c:()=>n})},33131:(e,t,l)=>{"use strict";l.d(t,{c:()=>n});l(52640);function n(e){if(null===e||void 0===e||!e.location)return{lat:47.4143302506288,lng:8.532059477976883};const t=e.location.split(", ");return{lat:Number(null===t||void 0===t?void 0:t[0]),lng:Number(null===t||void 0===t?void 0:t[1])}}},24968:(e,t,l)=>{"use strict";function n(e){if(!e)return"0";return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$")+" "+Number(e).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")}l.d(t,{c:()=>n})},20556:(e,t,l)=>{"use strict";l.d(t,{W:()=>i});var n=l(23424),a=l(84620),s=l.n(a);const i=()=>{const e=(0,n.i6)(),t=(0,n.IT)(),l=s().parse(t.search,{ignoreQueryPrefix:!0});return{values:l,set:(t,n)=>e({search:s().stringify({...l,[t]:n})}),reset:t=>{const n={...l};n[t]&&delete n[t],e({search:s().stringify({...n})})},clear:()=>e({search:s().stringify({})}),merge:t=>e({search:s().stringify({...l,...t})})}}},68400:(e,t,l)=>{"use strict";l.d(t,{c:()=>a});var n=l(33012);const a={orderExport:(e,t)=>n.c.get("dashboard/user/export/order/".concat(e,"/pdf"),{params:t,responseType:"blob"})}},30432:(e,t,l)=>{"use strict";l.d(t,{c:()=>y});var n=l(99584),a=l(68400),s=l(45976),i=l.n(s),d=l(77180),o=l(68496),c=l(95884),r=l(87228),u=l(68768),v=l(10260),h=l(65236),m=l(5008),p=l(23216),x=l(23424),f=l(97884);const j=o.default.Meta,y=e=>{let{id:t,handleCancel:l}=e;const[s,y]=(0,n.useState)(null),{t:g}=(0,h.G)(),b=(0,x.i6)();return(0,f.jsx)(f.Fragment,{children:s?(0,f.jsx)(d.c,{}):(0,f.jsx)(c.default,{visible:!!t,title:g("selected.download"),closable:!1,handleCancel:l,footer:[(0,f.jsx)(r.c,{type:"default",onClick:l,children:g("cancel")},"cancelBtn")],children:(0,f.jsxs)(u.c,{children:[(0,f.jsx)(v.c,{span:12,children:(0,f.jsx)(o.default,{title:g("download.pdf"),onClick:()=>function(e){y(!0),a.c.orderExport(e).then((t=>{i()(t,"invoice_".concat(e,".pdf"),"application/pdf"),l()})).finally((()=>y(!1)))}(t),className:"text-center cursor-pointer",children:(0,f.jsx)(j,{className:"d-flex align-items-center justify-content-center",title:(0,f.jsx)(m.$tL,{size:80})})})}),(0,f.jsx)(v.c,{span:12,children:(0,f.jsx)(o.default,{title:g("download.check"),onClick:()=>(e=>{b("/orders/generate-invoice/".concat(e))})(t),className:"text-center cursor-pointer",children:(0,f.jsx)(j,{className:"d-flex align-items-center justify-content-center",title:(0,f.jsx)(p.cLy,{size:85})})})})]})})})}},46980:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>ne});var n=l(99584),a=l(84616),s=l(73568),i=l(98044),d=l(87228),o=l(66296),c=l(92200),r=l(68496),u=l(35928),v=l(72192),h=l(15752),m=l(23424),p=l(36668),x=l(98948),f=l(59424),j=l(11168),y=l(3952),g=l(48292),b=l(32712),w=l(18896),C=l(65236),_=l(68256),k=l(58896),S=l(19576),M=l(40748),N=l(21064),Y=l(24968),G=l(71376),H=l(42080),I=l(69720),D=l(95312),z=l(53992),V=l(89932),T=l(95300),B=l(30432),O=l(61072),A=l(1428),P=l(77020),L=l(98016),R=l(46003),U=l(83072),E=l.n(U),F=l(52640),W=l(29416),K=l(74788),q=l(50428),$=l(88200),Q=l(48820),Z=l(20556),J=l(96328),X=l(75088),ee=l(97884);const{TabPane:te}=a.default,{RangePicker:le}=s.default;function ne(){var e,t,l,s,U,ne,ae,se;const{type:ie}=(0,m.W4)(),de=(0,b.OY)(),oe=(0,m.i6)(),{t:ce}=(0,C.G)(),{defaultCurrency:re}=(0,b.w1)((e=>e.currency),b.G),{statusList:ue}=(0,b.w1)((e=>e.orderStatus),b.G),{isDemo:ve}=(0,X.c)(),[he,me]=(0,n.useState)(null),[pe,xe]=(0,n.useState)(null),[fe,je]=(0,n.useState)(null),[ye,ge]=(0,n.useState)(null),be=[{name:"all",id:"0",active:!0,sort:0},...ue,{name:"deleted_at",id:null===ue||void 0===ue?void 0:ue.length,active:!0,sort:null===ue||void 0===ue?void 0:ue.length}],[we,Ce]=(0,n.useState)(null),_e=e=>{de((0,w.WC)({url:"order/details/".concat(e.id),id:"order_details",name:ce("order.details")})),oe("/order/details/".concat(e.id))},[ke,Se]=(0,n.useState)([{title:ce("id"),is_show:!0,dataIndex:"id",key:"id",sorter:!0},{title:ce("client"),is_show:!0,dataIndex:"user",key:"user",render:e=>(0,ee.jsxs)("div",{children:[null===e||void 0===e?void 0:e.firstname," ",(null===e||void 0===e?void 0:e.lastname)||""]})},{title:ce("status"),is_show:!0,dataIndex:"status",key:"status",render:(e,t)=>(0,ee.jsxs)("div",{className:"cursor-pointer",children:["new"===e?(0,ee.jsx)(i.c,{color:"blue",children:ce(e)}):"canceled"===e?(0,ee.jsx)(i.c,{color:"error",children:ce(e)}):(0,ee.jsx)(i.c,{color:"cyan",children:ce(e)}),"delivered"===e||"canceled"===e||t.deleted_at?"":(0,ee.jsx)(p.c,{onClick:e=>{e.stopPropagation(),me(t)},disabled:t.deleted_at})]})},{title:ce("deliveryman"),is_show:!0,dataIndex:"deliveryman",key:"deliveryman",render:(e,t)=>(0,ee.jsx)("div",{children:"ready"===t.status&&"pickup"!==t.delivery_type?(0,ee.jsx)(d.c,{disabled:t.deleted_at,type:"link",onClick:()=>ge(t),children:(0,ee.jsxs)(o.c,{children:[e?"".concat(e.firstname," ").concat(e.lastname):ce("add.deliveryman"),(0,ee.jsx)(p.c,{})]})}):(0,ee.jsxs)("div",{children:[null===e||void 0===e?void 0:e.firstname," ",null===e||void 0===e?void 0:e.lastname]})})},{title:ce("number.of.products"),dataIndex:"order_details_count",key:"order_details_count",is_show:!0,render:e=>(0,ee.jsxs)("div",{className:"text-lowercase",children:[e||0," ",ce("products")]})},{title:ce("amount"),is_show:!0,dataIndex:"total_price",key:"total_price",render:(e,t)=>{var l,n;const a=null===(l=t.transaction)||void 0===l?void 0:l.status;return(0,ee.jsxs)(ee.Fragment,{children:[(0,ee.jsx)("span",{children:(0,Y.c)(e,re.symbol)}),(0,ee.jsx)("br",{}),(0,ee.jsx)("span",{className:"progress"===a?"text-primary":"paid"===a?"text-success":"rejected"===a?"text-danger":"text-info",children:null===(n=t.transaction)||void 0===n?void 0:n.status})]})}},{title:ce("payment.type"),is_show:!0,dataIndex:"transaction",key:"transaction",render:e=>{var t;return ce(null===e||void 0===e||null===(t=e.payment_system)||void 0===t?void 0:t.tag)||"-"}},{title:ce("created.at"),is_show:!0,dataIndex:"created_at",key:"created_at",render:(e,t)=>E()(null===t||void 0===t?void 0:t.created_at).format("YYYY-MM-DD HH:mm")},{title:ce("delivery.date"),is_show:!0,dataIndex:"delivery_date",key:"delivery_date"},{title:ce("options"),is_show:!0,key:"options",render:(e,t)=>(0,ee.jsxs)(o.c,{children:[(0,ee.jsx)(d.c,{disabled:t.deleted_at,icon:(0,ee.jsx)(W.Sum,{}),onClick:e=>{e.stopPropagation(),xe(t.id)}}),(0,ee.jsx)(d.c,{disabled:t.deleted_at,icon:(0,ee.jsx)(x.c,{}),onClick:e=>{e.stopPropagation(),_e(t)}}),(0,ee.jsx)(d.c,{type:"primary",icon:(0,ee.jsx)(p.c,{}),onClick:e=>{e.stopPropagation(),(e=>{de((0,N.Qm)()),de((0,w.WC)({url:"order/".concat(e.id),id:"order_edit",name:ce("edit.order")})),oe("/order/".concat(e.id))})(t)},disabled:"delivered"===t.status||"canceled"===t.status||t.deleted_at}),(0,ee.jsx)(A.c,{disabled:t.deleted_at,icon:(0,ee.jsx)(f.c,{}),onClick:e=>{e.stopPropagation(),Te([t.id]),Me(!0),Oe(!0)}}),(0,ee.jsx)(d.c,{disabled:t.deleted_at,icon:(0,ee.jsx)(j.c,{}),onClick:e=>{e.stopPropagation(),je(t.id)}})]})}]),{setIsModalVisible:Me}=(0,n.useContext)(L.e),[Ne,Ye]=(0,n.useState)(!1),{activeMenu:Ge}=(0,b.w1)((e=>e.menu),b.G),He=(0,Z.W)(),[Ie,De]=(0,n.useState)(He.values.status||"all"),ze=(null===(e=Ge.data)||void 0===e?void 0:e.role)||Ie,[Ve,Te]=(0,n.useState)(null),[Be,Oe]=(0,n.useState)(null),[Ae,Pe]=(0,n.useState)(!1),[Le,Re]=(0,n.useState)(E()().subtract(1,"months"),E()()),{orders:Ue,loading:Ee,params:Fe,statistic:We,meta:Ke}=(0,b.w1)((e=>e.orders),b.G),qe=Ge.data,$e={search:null===qe||void 0===qe?void 0:qe.search,sort:null===qe||void 0===qe?void 0:qe.sort,column:null===qe||void 0===qe?void 0:qe.column,perPage:null===qe||void 0===qe?void 0:qe.perPage,page:null===qe||void 0===qe?void 0:qe.page,user_id:null===qe||void 0===qe?void 0:qe.user_id,status:"deleted_at"===ze||"all"===ze?void 0:ze,deleted_at:"deleted_at"===ze?"deleted_at":void 0,shop_id:null!==(null===(t=Ge.data)||void 0===t?void 0:t.shop_id)?null===(l=Ge.data)||void 0===l?void 0:l.shop_id:null,delivery_type:"scheduled"!==ie?ie:void 0,delivery_date_from:"scheduled"===ie?E()().add(1,"day").format("YYYY-MM-DD"):void 0,date_from:(null===Le||void 0===Le||null===(s=Le[0])||void 0===s?void 0:s.format("YYYY-MM-DD"))||null,date_to:(null===Le||void 0===Le||null===(U=Le[1])||void 0===U?void 0:U.format("YYYY-MM-DD"))||null};(0,_.c)((()=>{de((0,k.Gc)($e))}),[qe,Le,ie]);const Qe=(e,t)=>{de((0,w.MH)({activeMenu:Ge,data:{...qe,[t]:e}}))};const Ze=()=>{me(null),ge(null),xe(null),je(null)};(0,n.useEffect)((()=>{null!==Ge&&void 0!==Ge&&Ge.refetch&&(de((0,k.Gc)($e)),de((0,w.CO)(Ge)))}),[null===Ge||void 0===Ge?void 0:Ge.refetch]),(0,n.useEffect)((()=>{de((0,V.GI)())}),[]);const Je={selectedRowKeys:Ve,onChange:e=>{Te(e)}},Xe=(0,ee.jsxs)(c.c,{children:[(0,ee.jsx)(c.c.Item,{onClick:()=>{ve?O.m4.warning(ce("cannot.work.demo")):Ce({delete:!0})},disabled:"deleted_at"===ze,children:(0,ee.jsxs)(o.c,{children:[(0,ee.jsx)(f.c,{}),ce("delete.all")]})}),(0,ee.jsx)(c.c.Item,{onClick:()=>{ve?O.m4.warning(ce("cannot.work.demo")):Ce({restore:!0})},children:(0,ee.jsxs)(o.c,{children:[(0,ee.jsx)(K.icK,{}),ce("restore.all")]})})]});return(0,ee.jsxs)(ee.Fragment,{children:[(0,ee.jsxs)(o.c,{className:"justify-content-end w-100 mb-3",children:[(0,ee.jsx)(J.c,{listType:"orders"}),(0,ee.jsx)(d.c,{type:"primary",icon:(0,ee.jsx)(y.c,{}),onClick:()=>{de((0,N.Qm)()),de((0,w.sN)({id:"pos.system_01",url:"pos-system",name:"pos.system"})),oe("/pos-system")},style:{width:"100%"},children:ce("add.order")})]}),(0,ee.jsx)(r.default,{children:(0,ee.jsxs)(o.c,{wrap:!0,className:"order-filter",children:[(0,ee.jsx)(M.c,{defaultValue:null===qe||void 0===qe?void 0:qe.search,resetSearch:!(null!==qe&&void 0!==qe&&qe.search),placeholder:ce("search"),handleChange:e=>Qe(e,"search")}),(0,ee.jsx)(G.g,{placeholder:ce("select.shop"),fetchOptions:async function(e){const t={search:e,status:"approved"};return Q.c.getAll(t).then((e=>{let{data:t}=e;return t.map((e=>{var t;return{label:null===(t=e.translation)||void 0===t?void 0:t.title,value:e.id}}))}))},style:{width:"100%"},onSelect:e=>Qe(e.value,"shop_id"),onDeselect:()=>Qe(null,"shop_id"),allowClear:!0,value:null===qe||void 0===qe?void 0:qe.shop_id}),(0,ee.jsx)(G.g,{placeholder:ce("select.client"),fetchOptions:async function(e){const t={search:e,perPage:10};return H.c.search(t).then((e=>{let{data:t}=e;return t.map((e=>({label:"".concat(e.firstname," ").concat(e.lastname),value:e.id})))}))},onSelect:e=>Qe(e.value,"user_id"),onDeselect:()=>Qe(null,"user_id"),style:{width:"100%"},value:null===qe||void 0===qe?void 0:qe.user_id}),(0,ee.jsx)(le,{value:Le,onChange:e=>{Qe((t=>{var l,n;return{...t,date_from:null===e||void 0===e||null===(l=e[0])||void 0===l?void 0:l.format("YYYY-MM-DD"),date_to:null===e||void 0===e||null===(n=e[1])||void 0===n?void 0:n.format("YYYY-MM-DD")}})),Re(e)},disabledDate:e=>e&&e>E()().endOf("day"),style:{width:"100%"}}),(0,ee.jsxs)(d.c,{onClick:()=>{Ye(!0),P.c.export($e).then((e=>{const t=F.sp+e.data.file_name;window.location.href=t})).finally((()=>Ye(!1)))},loading:Ne,style:{width:"100%"},children:[(0,ee.jsx)(q.qhB,{className:"mr-2"}),ce("export")]}),(0,ee.jsx)(d.c,{onClick:()=>{(0,b.wN)((()=>{de((0,k.Ah)()),de((0,w.MH)({activeMenu:Ge,data:null}))})),de((0,k.Gc)({status:null,page:null===qe||void 0===qe?void 0:qe.page,perPage:20}))},style:{width:"100%"},icon:(0,ee.jsx)(g.c,{}),children:ce("clear")})]})}),(0,ee.jsxs)(r.default,{children:[(0,ee.jsxs)(o.c,{className:"justify-content-between align-items-start w-100",children:[(0,ee.jsx)(a.default,{onChange:e=>{const t=e;de((0,w.MH)({activeMenu:Ge,data:{role:t,page:1}})),De(e),oe("?status=".concat(t))},type:"card",activeKey:ze,children:be.filter((e=>!0===e.active)).map((e=>(0,ee.jsx)(te,{tab:ce(e.name)},e.name)))}),(0,ee.jsxs)(o.c,{children:[(0,ee.jsx)(u.c,{title:ce("delete.selected"),children:(0,ee.jsx)(A.c,{disabled:"deleted_at"===ze,type:"primary",onClick:()=>{null===Ve||0===Ve.length?O.m4.warning(ce("select.the.product")):(Me(!0),Oe(!1))}})}),(0,ee.jsx)(z.c,{setColumns:Se,columns:ke,iconOnly:!0}),(0,ee.jsx)(v.c,{overlay:Xe,children:(0,ee.jsx)(d.c,{children:ce("options")})})]})]}),(0,ee.jsx)(h.c,{scroll:{x:!0},rowSelection:Je,columns:null===ke||void 0===ke?void 0:ke.filter((e=>e.is_show)),dataSource:Ue,loading:Ee,pagination:{pageSize:Fe.perPage,page:(null===(ne=Ge.data)||void 0===ne?void 0:ne.page)||1,total:null===Ke||void 0===Ke?void 0:Ke.total,defaultCurrent:null===(ae=Ge.data)||void 0===ae?void 0:ae.page,current:null===(se=Ge.data)||void 0===se?void 0:se.page},rowKey:e=>e.id,onChange:function(e,t,l){const{pageSize:n,current:a}=e,{field:s,order:i}=l,d=(0,S.c)(i);de((0,w.MH)({activeMenu:Ge,data:{...qe,perPage:n,page:a,column:s,sort:d}}))},onRow:e=>({onClick:()=>{"deleted_at"!==ze&&_e(e)}})})]}),he&&(0,ee.jsx)(I.c,{orderDetails:he,handleCancel:Ze,status:ue}),ye&&(0,ee.jsx)(D.c,{orderDetails:ye,handleCancel:Ze}),pe&&(0,ee.jsx)(T.c,{id:pe,handleCancel:Ze}),fe&&(0,ee.jsx)(B.c,{id:fe,handleCancel:Ze}),(0,ee.jsx)(R.c,{click:()=>{Pe(!0);const e={...Object.assign({},...Ve.map(((e,t)=>({["ids[".concat(t,"]")]:e}))))};P.c.delete(e).then((()=>{O.m4.success(ce("successfully.deleted")),Me(!1),de((0,k.Gc)($e)),Oe(null)})).finally((()=>{Te(null),Pe(!1)}))},text:ce(Be?"delete":"all.delete"),loading:Ae,setText:Te}),we&&(0,ee.jsx)($.c,{open:we,handleCancel:()=>Ce(null),click:we.restore?()=>{Pe(!0),P.c.restoreAll().then((()=>{O.m4.success(ce("it.will.take.some.time.to.return.the.files")),de((0,k.Gc)($e)),Ce(null)})).finally((()=>Pe(!1)))}:()=>{Pe(!0),P.c.dropAll().then((()=>{O.m4.success(ce("successfully.deleted")),de((0,k.Gc)($e)),Ce(null)})).finally((()=>Pe(!1)))},text:we.restore?ce("restore.modal.text"):ce("read.carefully"),subTitle:we.restore?"":ce("confirm.deletion"),loading:Ae,setText:Te})]})}},96328:(e,t,l)=>{"use strict";l.d(t,{c:()=>c});var n=l(79416),a=(l(99584),l(5008)),s=l(57608),i=l(23424),d=l(97884);const o=[{value:"orders-board",title:"Board",icon:(0,d.jsx)(s.EZ1,{size:20})},{value:"orders",title:"List",icon:(0,d.jsx)(a.GaN,{size:20})}],c=e=>{let{listType:t}=e;const{type:l}=(0,i.W4)(),a=(0,i.i6)();return(0,d.jsx)(n.cp.Group,{value:t,onChange:e=>{a("/".concat(e.target.value).concat(l?"/".concat(l):""))},className:"float-right",buttonStyle:"solid",children:null===o||void 0===o?void 0:o.map((e=>(0,d.jsx)(n.cp.Button,{value:e.value,children:(0,d.jsxs)("div",{className:"d-flex align-items-center",style:{gap:"10px"},children:[e.icon,e.title]})},e.value)))})}},95312:(e,t,l)=>{"use strict";l.d(t,{c:()=>x});var n=l(99584),a=l(65732),s=l(95884),i=l(87228),d=l(68768),o=l(10260),c=l(32712),r=l(77020),u=l(18896),v=l(65236),h=l(42080),m=l(71376),p=l(97884);function x(e){var t,l,x;let{orderDetails:f,handleCancel:j}=e;const{t:y}=(0,v.G)(),{activeMenu:g}=(0,c.w1)((e=>e.menu),c.G),[b]=a.c.useForm(),w=(0,c.OY)(),[C,_]=(0,n.useState)(!1);return(0,p.jsx)(s.default,{visible:!!f,onCancel:j,footer:[(0,p.jsx)(i.c,{type:"primary",onClick:()=>b.submit(),loading:C,children:y("save")},"saveBtn"),(0,p.jsx)(i.c,{type:"default",onClick:j,children:y("cancel")},"cancelBtn")],children:(0,p.jsx)(a.c,{form:b,layout:"vertical",onFinish:e=>{const t={deliveryman:e.deliveryman.value};_(!0),r.c.updateDelivery(f.id,t).then((()=>{j(),w((0,u.A1)(g))})).finally((()=>_(!1)))},initialValues:{deliveryman:{label:f.deliveryman?(null===f||void 0===f||null===(t=f.deliveryman)||void 0===t?void 0:t.firstname)+" "+(null===f||void 0===f||null===(l=f.deliveryman)||void 0===l?void 0:l.lastname):null,value:f.deliveryman?null===f||void 0===f||null===(x=f.deliveryman)||void 0===x?void 0:x.id:null}},children:(0,p.jsx)(d.c,{gutter:12,children:(0,p.jsx)(o.c,{span:24,children:(0,p.jsx)(a.c.Item,{label:y("deliveryman"),name:"deliveryman",rules:[{required:!0,message:y("required")}],children:(0,p.jsx)(m.g,{className:"w-100",debounceTimeout:500,placeholder:y("select.shop"),fetchOptions:async function(e){const t={search:e.length?e:void 0,page:1,perPage:10,role:"deliveryman",shop_id:f.shop.id,exist_token:1};return h.c.getAll(t).then((e=>{let{data:t}=e;return t.map((e=>({label:e.firstname+" "+e.lastname||"no name",value:e.id})))}))},allowClear:!0})})})})})})}},69720:(e,t,l)=>{"use strict";l.d(t,{c:()=>p});var n=l(99584),a=l(65732),s=l(95884),i=l(87228),d=l(68768),o=l(10260),c=l(2664),r=l(32712),u=l(65236),v=l(77020),h=l(18896),m=l(97884);function p(e){let{orderDetails:t,handleCancel:l,status:p}=e;const{activeMenu:x}=(0,r.w1)((e=>e.menu),r.G),[f]=a.c.useForm(),j=(0,r.OY)(),{t:y}=(0,u.G)(),[g,b]=(0,n.useState)(!1),[w,C]=(0,n.useState)(p);(0,n.useEffect)((()=>{const e=p.findIndex((e=>e.name===t.status));let l=[p[e],p[e+1],{name:"canceled",id:8,active:!0}];e<0&&(l=[p[e+1],"canceled"]),C(l)}),[t]);return(0,m.jsx)(s.default,{visible:!!t,title:t.title,onCancel:l,footer:[(0,m.jsx)(i.c,{type:"primary",onClick:()=>f.submit(),loading:g,children:y("save")},"save-form"),(0,m.jsx)(i.c,{type:"default",onClick:l,children:y("cancel")},"cansel-modal")],children:(0,m.jsx)(a.c,{form:f,layout:"vertical",onFinish:e=>{b(!0);const n={...e};v.c.updateStatus(t.id,n).then((()=>{l(),j((0,h.A1)(x))})).finally((()=>b(!1)))},initialValues:{status:t.status},children:(0,m.jsx)(d.c,{gutter:12,children:(0,m.jsx)(o.c,{span:24,children:(0,m.jsx)(a.c.Item,{label:y("status"),name:"status",rules:[{required:!0,message:y("required")}],children:(0,m.jsx)(c.default,{children:null===w||void 0===w?void 0:w.map((e=>(0,m.jsx)(c.default.Option,{value:null===e||void 0===e?void 0:e.name,children:y(null===e||void 0===e?void 0:e.name)},null===e||void 0===e?void 0:e.name)))})})})})})})}},95300:(e,t,l)=>{"use strict";l.d(t,{c:()=>I});var n=l(52800),a=l(67692),s=l(95884),i=l(87228),d=l(68496),o=l(68768),c=l(10260),r=l(98044),u=l(99584),v=l(65236),h=l(77020),m=l(77180),p=l(5008),x=l(32712),f=l(52640),j=l(97132),y=l(57236),g=l(33131),b=l(4736),w=l(6944),C=l(88992),_=l(23216),k=l(83072),S=l.n(k),M=l(97884);const{Step:N}=a.default,Y=()=>(0,M.jsx)("img",{src:j,width:"50",alt:"Pin"}),G=()=>(0,M.jsx)("img",{src:y,width:"50",alt:"Pin"}),H=["blue","red","gold","volcano","cyan","lime"],I=e=>{var t,l,j,y,k,I;let{id:D,handleCancel:z}=e;const{t:V}=(0,v.G)(),[T,B]=(0,u.useState)(null),[O,A]=(0,u.useState)(null),[P,L]=(0,u.useState)(null),{settings:R}=(0,x.w1)((e=>e.globalSettings),x.G),U=(0,g.c)(R),[E,F]=(0,u.useState)(0),[W,K]=(0,u.useState)((0,g.c)(R)),[q,$]=(0,u.useState)((0,g.c)(R)),[Q,Z]=(0,u.useState)([{id:0,name:"new",icon:(0,M.jsx)(b.c,{})},{id:1,name:"accepted",icon:(0,M.jsx)(p.IFj,{})},{id:2,name:"ready",icon:(0,M.jsx)(w.YxA,{})},{id:3,name:"on_a_way",icon:(0,M.jsx)(C.wJ$,{})},{id:4,name:"delivered",icon:(0,M.jsx)(C.W8K,{})}]);const{google_map_key:J}=(0,x.w1)((e=>e.globalSettings.settings),x.G);(0,u.useEffect)((()=>{B(!0),h.c.getById(D).then((e=>{var t;let{data:l}=e;Z("canceled"===l.status?[{id:1,name:"new",icon:(0,M.jsx)(b.c,{})},{id:5,name:"canceled",icon:(0,M.jsx)(_.uoq,{})}]:Q),F("canceled"===l.status?1:null===(t=Q.find((e=>e.name===l.status)))||void 0===t?void 0:t.id),L("canceled"===l.status?"error":"success"),A(l),$({lat:l.location.latitude,lng:l.location.longitude}),K({lat:l.shop.location.latitude,lng:l.shop.location.longitude})})).finally((()=>{B(!1)}))}),[]);return(0,M.jsx)(M.Fragment,{children:(0,M.jsx)(s.default,{visible:!!D,title:V("show.locations"),onCancel:()=>z(),style:{minWidth:"80vw"},footer:[(0,M.jsx)(i.c,{type:"default",onClick:z,children:V("cancel")},"cancelBtn")],children:T?(0,M.jsx)(m.c,{}):(0,M.jsxs)(d.default,{children:[(0,M.jsx)(a.default,{current:E,status:P,className:"mb-5",children:null===Q||void 0===Q?void 0:Q.map(((e,t)=>(0,M.jsx)(N,{title:V(e.name),icon:null===e||void 0===e?void 0:e.icon},e.id+t)))}),(0,M.jsxs)(o.c,{gutter:12,children:[(0,M.jsxs)(c.c,{span:12,children:[(0,M.jsxs)("h3",{children:[V("order.id")," #",null===O||void 0===O?void 0:O.id]}),(0,M.jsxs)("p",{children:[(0,M.jsx)(p.kIG,{})," ",S()(null===O||void 0===O?void 0:O.created_at).format("YYYY-MM-DD HH:mm")]}),(0,M.jsxs)("p",{children:[V("schedulet.at")," ",null===O||void 0===O?void 0:O.delivery_date]}),(0,M.jsxs)("span",{children:[(0,M.jsx)("strong",{children:null===O||void 0===O||null===(t=O.shop)||void 0===t||null===(l=t.translation)||void 0===l?void 0:l.title})," ",null===O||void 0===O||null===(j=O.details)||void 0===j?void 0:j.map(((e,t)=>{var l,n,a;return(0,M.jsx)(r.c,{color:H[t],children:null===e||void 0===e||null===(l=e.stock)||void 0===l||null===(n=l.product)||void 0===n||null===(a=n.translation)||void 0===a?void 0:a.title})}))]})]}),(0,M.jsxs)(c.c,{span:12,children:[(0,M.jsxs)("p",{children:[V("status")," ","new"===(null===O||void 0===O?void 0:O.status)?(0,M.jsx)(r.c,{color:"blue",children:V(null===O||void 0===O?void 0:O.status)}):"canceled"===(null===O||void 0===O?void 0:O.status)?(0,M.jsx)(r.c,{color:"error",children:V(null===O||void 0===O?void 0:O.status)}):(0,M.jsx)(r.c,{color:"cyan",children:V(null===O||void 0===O?void 0:O.status)})]}),(0,M.jsxs)("p",{children:[V("payment.method")," ",(0,M.jsx)("strong",{children:null===O||void 0===O||null===(y=O.transaction)||void 0===y||null===(k=y.payment_system)||void 0===k?void 0:k.tag})]}),(0,M.jsxs)("p",{children:[V("order.type")," ",(0,M.jsx)("strong",{children:null===O||void 0===O?void 0:O.delivery_type})]}),(0,M.jsxs)("p",{children:[V("payment.type")," ",(0,M.jsx)("strong",{children:null===O||void 0===O||null===(I=O.transaction)||void 0===I?void 0:I.status})]})]}),(0,M.jsxs)(c.c,{span:24,className:"mt-5",children:[(0,M.jsx)("h4",{children:V("map")}),(0,M.jsx)("div",{className:"map-container",style:{height:400,width:"100%"},children:(0,M.jsxs)(n.cp,{bootstrapURLKeys:{key:f.KU||J},defaultZoom:15,center:U,yesIWantToUseGoogleMapApiInternals:!0,options:{fullscreenControl:!1},onGoogleApiLoaded:e=>{let{map:t,maps:l}=e;const n=[W,q].map((e=>({lat:Number(e.lat||"0"),lng:Number(e.lng||"0")})));let a=new l.LatLngBounds;for(var s=0;s<n.length;s++)a.extend(n[s]);t.fitBounds(a)},children:[(0,M.jsx)(G,{lat:null===W||void 0===W?void 0:W.lat,lng:null===W||void 0===W?void 0:W.lng}),(0,M.jsx)(Y,{lat:null===q||void 0===q?void 0:q.lat,lng:null===q||void 0===q?void 0:q.lng})]})})]})]})]})})})}},48292:(e,t,l)=>{"use strict";l.d(t,{c:()=>o});var n=l(30800),a=l(99584);const s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M899.1 869.6l-53-305.6H864c14.4 0 26-11.6 26-26V346c0-14.4-11.6-26-26-26H618V138c0-14.4-11.6-26-26-26H432c-14.4 0-26 11.6-26 26v182H160c-14.4 0-26 11.6-26 26v192c0 14.4 11.6 26 26 26h17.9l-53 305.6a25.95 25.95 0 0025.6 30.4h723c1.5 0 3-.1 4.4-.4a25.88 25.88 0 0021.2-30zM204 390h272V182h72v208h272v104H204V390zm468 440V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H416V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H202.8l45.1-260H776l45.1 260H672z"}}]},name:"clear",theme:"outlined"};var i=l(47164),d=function(e,t){return a.createElement(i.c,(0,n.c)((0,n.c)({},e),{},{ref:t,icon:s}))};d.displayName="ClearOutlined";const o=a.forwardRef(d)},55512:(e,t,l)=>{"use strict";l.d(t,{c:()=>o});var n=l(30800),a=l(99584);const s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 208H676V232h212v136zm0 224H676V432h212v160zM412 432h200v160H412V432zm200-64H412V232h200v136zm-476 64h212v160H136V432zm0-200h212v136H136V232zm0 424h212v136H136V656zm276 0h200v136H412V656zm476 136H676V656h212v136z"}}]},name:"table",theme:"outlined"};var i=l(47164),d=function(e,t){return a.createElement(i.c,(0,n.c)((0,n.c)({},e),{},{ref:t,icon:s}))};d.displayName="TableOutlined";const o=a.forwardRef(d)},45976:function(e,t){var l,n,a;n=[],void 0===(a="function"===typeof(l=function(){return function e(t,l,n){var a,s,i=window,d="application/octet-stream",o=n||d,c=t,r=!l&&!n&&c,u=document.createElement("a"),v=function(e){return String(e)},h=i.Blob||i.MozBlob||i.WebKitBlob||v,m=l||"download";if(h=h.call?h.bind(i):Blob,"true"===String(this)&&(o=(c=[c,o])[0],c=c[1]),r&&r.length<2048&&(m=r.split("/").pop().split("?")[0],u.href=r,-1!==u.href.indexOf(r))){var p=new XMLHttpRequest;return p.open("GET",r,!0),p.responseType="blob",p.onload=function(t){e(t.target.response,m,d)},setTimeout((function(){p.send()}),0),p}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(c)){if(!(c.length>2096103.424&&h!==v))return navigator.msSaveBlob?navigator.msSaveBlob(y(c),m):g(c);o=(c=y(c)).type||d}else if(/([\x80-\xff])/.test(c)){for(var x=0,f=new Uint8Array(c.length),j=f.length;x<j;++x)f[x]=c.charCodeAt(x);c=new h([f],{type:o})}function y(e){for(var t=e.split(/[:;,]/),l=t[1],n=("base64"==t[2]?atob:decodeURIComponent)(t.pop()),a=n.length,s=0,i=new Uint8Array(a);s<a;++s)i[s]=n.charCodeAt(s);return new h([i],{type:l})}function g(e,t){if("download"in u)return u.href=e,u.setAttribute("download",m),u.className="download-js-link",u.innerHTML="downloading...",u.style.display="none",document.body.appendChild(u),setTimeout((function(){u.click(),document.body.removeChild(u),!0===t&&setTimeout((function(){i.URL.revokeObjectURL(u.href)}),250)}),66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(e)&&(e="data:"+e.replace(/^data:([\w\/\-\+]+)/,d)),window.open(e)||confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")&&(location.href=e),!0;var l=document.createElement("iframe");document.body.appendChild(l),!t&&/^data:/.test(e)&&(e="data:"+e.replace(/^data:([\w\/\-\+]+)/,d)),l.src=e,setTimeout((function(){document.body.removeChild(l)}),333)}if(a=c instanceof h?c:new h([c],{type:o}),navigator.msSaveBlob)return navigator.msSaveBlob(a,m);if(i.URL)g(i.URL.createObjectURL(a),!0);else{if("string"===typeof a||a.constructor===v)try{return g("data:"+o+";base64,"+i.btoa(a))}catch(b){return g("data:"+o+","+encodeURIComponent(a))}(s=new FileReader).onload=function(e){g(this.result)},s.readAsDataURL(a)}return!0}})?l.apply(t,n):l)||(e.exports=a)},57236:(e,t,l)=>{"use strict";e.exports=l.p+"static/media/shop.46d7a94ca800c711764a.png"},97132:(e,t,l)=>{"use strict";e.exports=l.p+"static/media/user.fbe7078c52acde79652d.jpg"},16204:()=>{}}]);