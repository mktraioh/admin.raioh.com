"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[8160],{33131:(e,l,i)=>{i.d(l,{c:()=>n});i(52640);function n(e){if(null===e||void 0===e||!e.location)return{lat:47.4143302506288,lng:8.532059477976883};const l=e.location.split(", ");return{lat:Number(null===l||void 0===l?void 0:l[0]),lng:Number(null===l||void 0===l?void 0:l[1])}}},24968:(e,l,i)=>{function n(e){if(!e)return"0";return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$")+" "+Number(e).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")}i.d(l,{c:()=>n})},45776:(e,l,i)=>{i.r(l),i.d(l,{default:()=>F});var n=i(99584),t=i(87968),d=i(68496),s=i(87228),a=i(37728),c=i(68768),o=i(10260),r=i(98044),u=i(15752),v=i(66296),x=i(23424),h=i(8216),m=i(71836),j=i(32712),p=i(18896),y=i(65732),f=i(95884),g=i(2664),b=i(65236),w=i(97884);const _=["new","accepted","ready","on_a_way","delivered"];function k(e){let{orderDetails:l,handleCancel:i}=e;const{activeMenu:t}=(0,j.w1)((e=>e.menu),j.G),[d]=y.c.useForm(),a=(0,j.OY)(),{t:r}=(0,b.G)(),[u,v]=(0,n.useState)(!1),[x,m]=(0,n.useState)(_);(0,n.useEffect)((()=>{const e=_.findIndex((e=>e===l.status));let i=[_[e],_[e+1],"canceled"];e<0&&(i=[_[e+1],"canceled"]),m(i)}),[l]);return(0,w.jsx)(f.default,{visible:!!l,title:l.title,onCancel:i,footer:[(0,w.jsx)(s.c,{type:"primary",onClick:()=>d.submit(),loading:u,children:r("save")}),(0,w.jsx)(s.c,{type:"default",onClick:i,children:r("cancel")})],children:(0,w.jsx)(y.c,{form:d,layout:"vertical",onFinish:e=>{v(!0);const n={...e};h.c.updateStatus(l.id,n).then((()=>{i(),a((0,p.A1)(t))})).finally((()=>v(!1)))},initialValues:{status:l.status},children:(0,w.jsx)(c.c,{gutter:12,children:(0,w.jsx)(o.c,{span:24,children:(0,w.jsx)(y.c.Item,{label:r("status"),name:"status",rules:[{required:!0,message:r("required")}],children:(0,w.jsx)(g.default,{children:x.map(((e,l)=>(0,w.jsx)(g.default.Option,{value:e,children:r(e)},e+l)))})})})})})})}var N=i(7893),C=i(24968),S=i(38572),I=i(5008),G=i(26493),q=i(83072),Y=i.n(q);function F(){var e,l,i,y;const{activeMenu:f}=(0,j.w1)((e=>e.menu),j.G),{defaultCurrency:g}=(0,j.w1)((e=>e.currency),j.G),{statusList:_}=(0,j.w1)((e=>e.orderStatus),j.G),q=null===f||void 0===f||null===(e=f.data)||void 0===e?void 0:e.data,{t:F}=(0,b.G)(),{id:D}=(0,x.W4)(),M=(0,j.OY)(),O=(0,n.useRef)(),A=(0,n.useRef)(),[B,H]=(0,n.useState)(!1),[L,K]=(0,n.useState)(null),[E,R]=(0,n.useState)(null),[W,$]=(0,n.useState)(null),P=[{title:F("id"),dataIndex:"id",key:"id",render:(e,l)=>{var i;return null===(i=l.stock)||void 0===i?void 0:i.id}},{title:F("product.name"),dataIndex:"product",key:"product",render:(e,l)=>{var i,n,t;return null===(i=l.stock)||void 0===i||null===(n=i.product)||void 0===n||null===(t=n.translation)||void 0===t?void 0:t.title}},{title:F("image"),dataIndex:"img",key:"img",render:(e,l)=>{var i,n;return(0,w.jsx)(t.c,{src:(0,m.c)(null===(i=l.stock)||void 0===i||null===(n=i.product)||void 0===n?void 0:n.img),alt:"product",width:100,height:"auto",className:"rounded",preview:!0,placeholder:!0})}},{title:F("price"),dataIndex:"origin_price",key:"origin_price",render:e=>(0,C.c)(e,null===g||void 0===g?void 0:g.symbol)},{title:F("quantity"),dataIndex:"quantity",key:"quantity"},{title:F("discount"),dataIndex:"discount",key:"discount",render:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,l=arguments.length>1?arguments[1]:void 0;return(0,C.c)(e/l.quantity,null===g||void 0===g?void 0:g.symbol)}},{title:F("tax"),dataIndex:"tax",key:"tax",render:(e,l)=>(0,C.c)(e/l.quantity,null===g||void 0===g?void 0:g.symbol)},{title:F("total.price"),dataIndex:"total_price",key:"total_price",render:(e,l)=>{var i;const n=e+(null===l||void 0===l||null===(i=l.addons)||void 0===i?void 0:i.reduce(((e,l)=>e+l.total_price),0));return(0,C.c)(n,null===g||void 0===g?void 0:g.symbol)}}],U=()=>{K(null),R(null),$(null)};return(0,n.useEffect)((()=>{f.refetch&&(H(!0),h.c.getById(D).then((e=>{let{data:l}=e;const i=l.currency,n=l.user,t=l.id,d=l.price,s=l.created_at,a=l.details.map((e=>{var l,i;return{...e,title:null===(l=e.shop)||void 0===l||null===(i=l.translation)||void 0===i?void 0:i.title}}));M((0,p.MH)({activeMenu:f,data:{details:a,currency:i,user:n,id:t,createdAt:s,price:d,data:l}}))})).finally((()=>{H(!1),M((0,p.CO)(f))})))}),[f.refetch]),(0,w.jsxs)("div",{className:"order_details",children:[(0,w.jsx)(d.default,{className:"order-details-info",title:(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(G.Y7g,{className:"mr-2 icon"}),"".concat(F("order")," ").concat(null!==q&&void 0!==q&&q.id?"#".concat(null===q||void 0===q?void 0:q.id," "):"")," ",F("from.order")," ",null===q||void 0===q||null===(l=q.table)||void 0===l?void 0:l.name]}),extra:"delivered"!==(null===q||void 0===q?void 0:q.status)&&"canceled"!==(null===q||void 0===q?void 0:q.status)&&"accepted"!==(null===q||void 0===q?void 0:q.status)&&"cooking"!==(null===q||void 0===q?void 0:q.status)?(0,w.jsx)(s.c,{type:"primary",onClick:()=>K(q),children:F("change.status")}):null}),(0,w.jsx)(a.c,{spinning:B,children:(0,w.jsx)(d.default,{style:{minHeight:"200px"},children:(0,w.jsxs)(c.c,{hidden:B,className:"mb-3 order_detail",children:[(0,w.jsx)(o.c,{span:12,children:(0,w.jsxs)("div",{children:[F("created.date.&.time"),":",(0,w.jsxs)("span",{className:"ml-2",children:[(0,w.jsx)(I.qiH,{className:"mr-1"})," ",Y()(null===q||void 0===q?void 0:q.created_at).format("YYYY-MM-DD HH:mm")," "]})]})}),(0,w.jsx)(o.c,{span:12,children:(0,w.jsxs)("div",{children:[F("status"),":",(0,w.jsx)("span",{className:"ml-2",children:"new"===(null===q||void 0===q?void 0:q.status)?(0,w.jsx)(r.c,{color:"blue",children:F(null===q||void 0===q?void 0:q.status)}):"canceled"===(null===q||void 0===q?void 0:q.status)?(0,w.jsx)(r.c,{color:"error",children:F(null===q||void 0===q?void 0:q.status)}):(0,w.jsx)(r.c,{color:"cyan",children:F(null===q||void 0===q?void 0:q.status)})})]})})," ",(0,w.jsx)(o.c,{span:12,children:(0,w.jsxs)("div",{children:[F("table"),":",(0,w.jsx)("span",{className:"ml-2",children:(null===q||void 0===q||null===(i=q.table)||void 0===i?void 0:i.name)||F("unspecified")})]})}),(0,w.jsx)(o.c,{span:12,children:(0,w.jsxs)("div",{children:[F("delivery_type"),":",(0,w.jsx)("span",{className:"ml-2",children:(null===q||void 0===q?void 0:q.delivery_type)||F("unspecified")})]})})]})})}),(0,w.jsxs)(d.default,{className:"w-100 order-table",children:[(0,w.jsx)(u.c,{ref:A,scroll:{x:!0},columns:P,dataSource:(null===(y=f.data)||void 0===y?void 0:y.details)||[],loading:B,rowKey:e=>e.id,pagination:!1}),(0,w.jsxs)(v.c,{size:100,className:"d-flex justify-content-end w-100 order-table__summary",children:[(0,w.jsxs)("div",{children:[(0,w.jsxs)("span",{children:[F("delivery.fee"),":"]}),(0,w.jsx)("br",{}),(0,w.jsxs)("span",{children:[F("order.tax"),":"]}),(0,w.jsx)("br",{}),(0,w.jsxs)("span",{children:[F("product"),":"]}),(0,w.jsx)("br",{}),(0,w.jsxs)("span",{children:[F("discount"),":"]}),(0,w.jsx)("br",{}),(0,w.jsxs)("h3",{children:[F("total.price"),":"]})]}),(0,w.jsxs)("div",{children:[(0,w.jsx)("span",{children:(0,C.c)(null===q||void 0===q?void 0:q.delivery_fee,null===g||void 0===g?void 0:g.symbol)}),(0,w.jsx)("br",{}),(0,w.jsx)("span",{children:(0,C.c)(null===q||void 0===q?void 0:q.tax,null===g||void 0===g?void 0:g.symbol)}),(0,w.jsx)("br",{}),(0,w.jsx)("span",{children:(0,C.c)(null===q||void 0===q?void 0:q.origin_price,null===g||void 0===g?void 0:g.symbol)}),(0,w.jsx)("br",{}),(0,w.jsx)("span",{children:(0,C.c)(null===q||void 0===q?void 0:q.total_discount,null===g||void 0===g?void 0:g.symbol)}),(0,w.jsx)("br",{}),(0,w.jsx)("h3",{ref:O,children:(0,C.c)(null===q||void 0===q?void 0:q.total_price,null===g||void 0===g?void 0:g.symbol)})]})]})]}),L&&(0,w.jsx)(k,{orderDetails:L,handleCancel:U,status:_}),E&&(0,w.jsx)(N.c,{orderDetails:E,handleCancel:U}),W&&(0,w.jsx)(S.c,{id:W,handleCancel:U})]})}},7893:(e,l,i)=>{i.d(l,{c:()=>m});var n=i(99584),t=i(65732),d=i(95884),s=i(87228),a=i(68768),c=i(10260),o=i(2664),r=i(32712),u=i(8216),v=i(18896),x=i(65236),h=i(97884);function m(e){var l;let{orderDetails:i,handleCancel:m}=e;const{t:j}=(0,x.G)(),{activeMenu:p}=(0,r.w1)((e=>e.menu),r.G),{deliverymans:y}=(0,r.w1)((e=>e.deliveryman),r.G),[f]=t.c.useForm(),g=(0,r.OY)(),[b,w]=(0,n.useState)(!1);return(0,h.jsx)(d.default,{visible:!!i,title:i.title,onCancel:m,footer:[(0,h.jsx)(s.c,{type:"primary",onClick:()=>f.submit(),loading:b,children:j("save")}),(0,h.jsx)(s.c,{type:"default",onClick:m,children:j("cancel")})],children:(0,h.jsx)(t.c,{form:f,layout:"vertical",onFinish:e=>{const l={...e};w(!0),u.c.updateDelivery(i.id,l).then((()=>{m(),g((0,v.A1)(p))})).finally((()=>w(!1)))},initialValues:{deliveryman:null===(l=i.deliveryman)||void 0===l?void 0:l.id},children:(0,h.jsx)(a.c,{gutter:12,children:(0,h.jsx)(c.c,{span:24,children:(0,h.jsx)(t.c.Item,{label:j("deliveryman"),name:"deliveryman",rules:[{required:!0,message:j("required")}],children:(0,h.jsx)(o.default,{children:y.map(((e,l)=>(0,h.jsxs)(o.default.Option,{value:e.id,className:"d-block",children:[e.firstname," ",e.lastname||""]},e.id)))})})})})})})}},38572:(e,l,i)=>{i.d(l,{c:()=>q});var n=i(52800),t=i(67692),d=i(95884),s=i(87228),a=i(68496),c=i(68768),o=i(10260),r=i(98044),u=i(99584),v=i(65236),x=i(8216),h=i(77180),m=i(5008),j=i(32712),p=i(52640),y=i(97132),f=i(57236),g=i(33131),b=i(4736),w=i(6944),_=i(88992),k=i(23216),N=i(97884);const{Step:C}=t.default,S=()=>(0,N.jsx)("img",{src:y,width:"50",alt:"Pin"}),I=()=>(0,N.jsx)("img",{src:f,width:"50",alt:"Pin"}),G=["blue","red","gold","volcano","cyan","lime"],q=e=>{var l,i,y,f,q,Y;let{id:F,handleCancel:D}=e;const{t:M}=(0,v.G)(),[O,A]=(0,u.useState)(null),[B,H]=(0,u.useState)(null),[L,K]=(0,u.useState)(null),{settings:E}=(0,j.w1)((e=>e.globalSettings),j.G),R=(0,g.c)(E),[W,$]=(0,u.useState)(0),[P,U]=(0,u.useState)((0,g.c)(E)),[V,z]=(0,u.useState)((0,g.c)(E)),[J,Z]=(0,u.useState)([{id:0,name:"new",icon:(0,N.jsx)(b.c,{})},{id:1,name:"accepted",icon:(0,N.jsx)(m.IFj,{})},{id:2,name:"ready",icon:(0,N.jsx)(w.YxA,{})},{id:3,name:"on_a_way",icon:(0,N.jsx)(_.wJ$,{})},{id:4,name:"delivered",icon:(0,N.jsx)(_.W8K,{})}]);const{google_map_key:Q}=(0,j.w1)((e=>e.globalSettings.settings),j.G);(0,u.useEffect)((()=>{A(!0),x.c.getById(F).then((e=>{var l;let{data:i}=e;Z("canceled"===i.status?[{id:1,name:"new",icon:(0,N.jsx)(b.c,{})},{id:5,name:"canceled",icon:(0,N.jsx)(k.uoq,{})}]:J),$("canceled"===i.status?1:null===(l=J.find((e=>e.name===i.status)))||void 0===l?void 0:l.id),K("canceled"===i.status?"error":"success"),H(i),z({lat:i.location.latitude,lng:i.location.longitude}),U({lat:i.shop.location.latitude,lng:i.shop.location.longitude})})).finally((()=>{A(!1)}))}),[]);return(0,N.jsx)(N.Fragment,{children:(0,N.jsx)(d.default,{visible:!!F,title:M("show.locations"),closable:!0,onCancel:D,style:{minWidth:"80vw"},footer:[(0,N.jsx)(s.c,{type:"default",onClick:D,children:M("cancel")},"cancelBtn")],children:O?(0,N.jsx)(h.c,{}):(0,N.jsxs)(a.default,{children:[(0,N.jsx)(t.default,{current:W,status:L,className:"mb-5",children:null===J||void 0===J?void 0:J.map(((e,l)=>(0,N.jsx)(C,{title:M(e.name),icon:null===e||void 0===e?void 0:e.icon},e.id+l)))}),(0,N.jsxs)(c.c,{gutter:12,children:[(0,N.jsxs)(o.c,{span:12,children:[(0,N.jsxs)("h3",{children:[M("order.id")," #",null===B||void 0===B?void 0:B.id]}),(0,N.jsxs)("p",{children:[(0,N.jsx)(m.kIG,{})," ",null===B||void 0===B?void 0:B.created_at]}),(0,N.jsxs)("p",{children:[M("schedulet.at")," ",null===B||void 0===B?void 0:B.delivery_date]}),(0,N.jsxs)("span",{children:[(0,N.jsx)("strong",{children:null===B||void 0===B||null===(l=B.shop)||void 0===l||null===(i=l.translation)||void 0===i?void 0:i.title})," ",null===B||void 0===B||null===(y=B.details)||void 0===y?void 0:y.map(((e,l)=>{var i;return(0,N.jsx)(r.c,{className:"mb-2",color:G[l],children:null===e||void 0===e||null===(i=e.stock)||void 0===i?void 0:i.product.translation.title})}))]})]}),(0,N.jsxs)(o.c,{span:12,children:[(0,N.jsxs)("p",{children:[M("status")," ","new"===(null===B||void 0===B?void 0:B.status)?(0,N.jsx)(r.c,{color:"blue",children:M(null===B||void 0===B?void 0:B.status)}):"canceled"===(null===B||void 0===B?void 0:B.status)?(0,N.jsx)(r.c,{color:"error",children:M(null===B||void 0===B?void 0:B.status)}):(0,N.jsx)(r.c,{color:"cyan",children:M(null===B||void 0===B?void 0:B.status)})]}),(0,N.jsxs)("p",{children:[M("payment.method")," ",(0,N.jsx)("strong",{children:null===B||void 0===B||null===(f=B.transaction)||void 0===f||null===(q=f.payment_system)||void 0===q?void 0:q.tag})]}),(0,N.jsxs)("p",{children:[M("order.type")," ",(0,N.jsx)("strong",{children:null===B||void 0===B?void 0:B.delivery_type})]}),(0,N.jsxs)("p",{children:[M("payment.type")," ",(0,N.jsx)("strong",{children:null===B||void 0===B||null===(Y=B.transaction)||void 0===Y?void 0:Y.status})]})]}),(0,N.jsxs)(o.c,{span:24,className:"mt-5",children:[(0,N.jsx)("h4",{children:M("map")}),(0,N.jsx)("div",{className:"map-container",style:{height:400,width:"100%"},children:(0,N.jsxs)(n.cp,{bootstrapURLKeys:{key:Q||p.KU},defaultZoom:14,center:R,options:{fullscreenControl:!1},onGoogleApiLoaded:e=>{let{map:l,maps:i}=e;const n=[P,V].map((e=>({lat:Number(e.lat||"0"),lng:Number(e.lng||"0")})));let t=new i.LatLngBounds;for(var d=0;d<n.length;d++)t.extend(n[d]);l.fitBounds(t)},children:[(0,N.jsx)(I,{lat:null===P||void 0===P?void 0:P.lat,lng:null===P||void 0===P?void 0:P.lng}),(0,N.jsx)(S,{lat:null===V||void 0===V?void 0:V.lat,lng:null===V||void 0===V?void 0:V.lng})]})})]})]})]})})})}},57236:(e,l,i)=>{e.exports=i.p+"static/media/shop.46d7a94ca800c711764a.png"},97132:(e,l,i)=>{e.exports=i.p+"static/media/user.fbe7078c52acde79652d.jpg"}}]);