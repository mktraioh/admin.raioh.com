"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[4416],{1428:(e,t,a)=>{a.d(t,{c:()=>r});a(99584);var n=a(87228),l=a(59424),s=a(61072),c=a(65236),i=a(75088),d=a(97884);function r(e){let{size:t="",onClick:a,type:r="default",...o}=e;const{t:u}=(0,c.G)(),{isDemo:h}=(0,i.c)();return(0,d.jsx)(n.c,{size:t,icon:(0,d.jsx)(l.c,{}),onClick:e=>{h?s.m4.warning(u("cannot.work.demo")):a(e)},type:r,...o})}},53992:(e,t,a)=>{a.d(t,{c:()=>p});var n=a(99584),l=a(49308),s=a(92200),c=a(66296),i=a(26012),d=a(72192),r=a(35928),o=a(87228),u=a(55512),h=a(65236),v=a(97884);const{Text:m}=l.default,p=e=>{let{columns:t=[],setColumns:a,style:l,size:p="",iconOnly:x}=e;const{t:f}=(0,h.G)(),[j,g]=(0,n.useState)(!1),b=(0,v.jsx)(s.c,{children:null===t||void 0===t?void 0:t.map(((e,n)=>(0,v.jsx)(s.c.Item,{children:(0,v.jsxs)(c.c,{className:"d-flex justify-content-between",children:[(0,v.jsx)(m,{children:e.title}),(0,v.jsx)(i.c,{defaultChecked:!0,onClick:()=>function(e){const n=null===t||void 0===t?void 0:t.map((t=>(t.dataIndex===e.dataIndex&&(t.is_show=!(null!==t&&void 0!==t&&t.is_show)),t)));a(n)}(e),disabled:1===n})]})},e+n)))});return(0,v.jsx)(d.c,{overlay:b,trigger:["click"],onVisibleChange:e=>{g(e)},visible:j,children:(0,v.jsx)(r.c,{title:f("change.columns"),children:(0,v.jsx)(o.c,{style:{...l},size:p,icon:(0,v.jsx)(u.c,{}),children:x?null:f("Columns")})})})}},71376:(e,t,a)=>{a.d(t,{g:()=>r});var n=a(99584),l=a(95976),s=a.n(l),c=a(2664),i=a(37728),d=a(97884);const r=e=>{let{fetchOptions:t,debounceTimeout:a=400,onClear:l,...r}=e;const[o,u]=(0,n.useState)(!1),[h,v]=(0,n.useState)([]),m=(0,n.useMemo)((()=>s()((e=>{v([]),u(!0),t(e).then((e=>{v(e),u(!1)}))}),a)),[t,a]);return(0,d.jsx)(c.default,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:m,onClear:()=>{m(""),l&&l()},notFoundContent:o?(0,d.jsx)(i.c,{size:"small"}):"no results",...r,options:h,onFocus:()=>{m("")}})}},19576:(e,t,a)=>{function n(e){switch(e){case"ascend":return"asc";case"descend":return"desc"}}a.d(t,{c:()=>n})},24968:(e,t,a)=>{function n(e){if(!e)return"0";return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$")+" "+Number(e).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")}a.d(t,{c:()=>n})},56796:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Y});var n=a(36668),l=a(59424),s=a(3952),c=a(26012),i=a(66296),d=a(87228),r=a(68496),o=a(15752),u=a(83072),h=a.n(u),v=a(99584),m=a(65236),p=a(32712),x=a(61072),f=a(1428),j=a(53992),g=a(46003),b=a(98016),y=a(19576),k=a(24968),C=a(68256),w=a(18896),_=a(82320),z=a(23944),S=a(65732),I=a(95884),V=a(68768),H=a(10260),M=a(10240),q=a(77180),O=a(48820),G=a(71376),A=a(97884);function F(e){let{visibility:t,handleCancel:a}=e;const[n]=S.c.useForm(),{t:l}=(0,m.G)(),{activeMenu:s}=(0,p.w1)((e=>e.menu),p.G),c=(0,p.OY)(),[i,r]=(0,v.useState)(!1),[o,u]=(0,v.useState)(!1);(0,v.useEffect)((()=>{r(!0),z.c.getById(t).then((e=>{var t,a,l;let{data:s}=e;const c={...s,shop_id:{label:null===s||void 0===s||null===(t=s.shop)||void 0===t||null===(a=t.translation)||void 0===a?void 0:a.title,value:null===s||void 0===s||null===(l=s.shop)||void 0===l?void 0:l.id}};n.setFieldsValue(c)})).finally((()=>r(!1)))}),[t]);return(0,A.jsx)(I.default,{visible:!!t,title:l("edit.cashback"),onCancel:a,footer:[(0,A.jsx)(d.c,{type:"primary",onClick:()=>n.submit(),loading:o,children:l("save")},"save-cashback"),(0,A.jsx)(d.c,{type:"default",onClick:a,children:l("cancel")},"cancel-cashback")],children:i?(0,A.jsx)(q.c,{}):(0,A.jsx)(S.c,{form:n,layout:"vertical",onFinish:e=>{u(!0);const n={...e,type:"percent",shop_id:e.shop_id.value};z.c.update(t,n).then((()=>{a(),c((0,w.A1)(s))})).finally((()=>u(!1)))},children:(0,A.jsxs)(V.c,{gutter:12,children:[(0,A.jsx)(H.c,{span:24,children:(0,A.jsx)(S.c.Item,{label:l("shop/restaurant"),name:"shop_id",rules:[{required:!0,message:l("required")}],children:(0,A.jsx)(G.g,{placeholder:l("select.shop"),fetchOptions:async function(e){const t={search:e,status:"approved"};return O.c.getAll(t).then((e=>{let{data:t}=e;return t.map((e=>{var t;return{label:null===(t=e.translation)||void 0===t?void 0:t.title,value:e.id}}))}))},style:{minWidth:150},allowClear:!1})})}),(0,A.jsx)(H.c,{span:24,children:(0,A.jsx)(S.c.Item,{label:l("cashback"),name:"price",rules:[{required:!0,message:l("required")}],children:(0,A.jsx)(M.c,{min:0,className:"w-100",addonAfter:"%"})})}),(0,A.jsx)(H.c,{span:24,children:(0,A.jsx)(S.c.Item,{label:l("min.amount"),name:"value",rules:[{required:!0,message:l("required")}],children:(0,A.jsx)(M.c,{min:0,className:"w-100"})})})]})})})}function N(e){let{visibility:t,handleCancel:a}=e;const[n]=S.c.useForm(),{t:l}=(0,m.G)(),{activeMenu:s}=(0,p.w1)((e=>e.menu),p.G),c=(0,p.OY)(),[i,r]=(0,v.useState)(!1);return(0,A.jsx)(I.default,{visible:t,title:l("add.cashback"),onCancel:a,footer:[(0,A.jsx)(d.c,{type:"primary",onClick:()=>n.submit(),loading:i,children:l("save")},"save-cashback"),(0,A.jsx)(d.c,{type:"default",onClick:a,children:l("cancel")},"cancel-cashback")],children:(0,A.jsx)(S.c,{form:n,layout:"vertical",onFinish:e=>{r(!0);const t={...e,type:"percent",shop_id:e.shop_id.value};z.c.create(t).then((()=>{a(),c((0,w.A1)(s))})).finally((()=>r(!1)))},children:(0,A.jsxs)(V.c,{gutter:12,children:[(0,A.jsx)(H.c,{span:24,children:(0,A.jsx)(S.c.Item,{label:l("shop/restaurant"),name:"shop_id",rules:[{required:!0,message:l("required")}],children:(0,A.jsx)(G.g,{placeholder:l("select.shop"),fetchOptions:async function(e){const t={search:e,status:"approved"};return O.c.getAll(t).then((e=>{let{data:t}=e;return t.map((e=>{var t;return{label:null===(t=e.translation)||void 0===t?void 0:t.title,value:e.id}}))}))},style:{minWidth:150},allowClear:!1})})}),(0,A.jsx)(H.c,{span:24,children:(0,A.jsx)(S.c.Item,{label:l("cashback"),name:"price",rules:[{required:!0,message:l("required")}],children:(0,A.jsx)(M.c,{min:0,className:"w-100",addonAfter:"%"})})}),(0,A.jsx)(H.c,{span:24,children:(0,A.jsx)(S.c.Item,{label:l("min.amount"),name:"value",rules:[{required:!0,message:l("required")}],children:(0,A.jsx)(M.c,{min:0,className:"w-100"})})})]})})})}function Y(){var e,t,a;const{t:u}=(0,m.G)(),S=(0,p.OY)(),{defaultCurrency:I}=(0,p.w1)((e=>e.currency),p.G),{setIsModalVisible:V}=(0,v.useContext)(b.e),[H,M]=(0,v.useState)(null),[q,O]=(0,v.useState)(null),[G,Y]=(0,v.useState)(null),[E,T]=(0,v.useState)(!1),[B,D]=(0,v.useState)(!1),[P,R]=(0,v.useState)(null),[K,W]=(0,v.useState)(null),[$,J]=(0,v.useState)([{title:u("id"),dataIndex:"id",key:"id",is_show:!0},{title:u("shop.name"),dataIndex:"shop",key:"shop",is_show:!0,render:(e,t)=>{var a,n;return null===t||void 0===t||null===(a=t.shop)||void 0===a||null===(n=a.translation)||void 0===n?void 0:n.title}},{title:u("cashback"),dataIndex:"price",key:"price",is_show:!0,render:e=>"".concat(e," %")},{title:u("min.amount"),dataIndex:"value",key:"value",is_show:!0,render:e=>(0,k.c)(e,null===I||void 0===I?void 0:I.symbol)},{title:u("active"),dataIndex:"active",key:"active",is_show:!0,render:(e,t)=>(0,A.jsx)(c.c,{onChange:()=>{V(!0),O(t.id),Y(!0)},checked:e},t.id+e)},{title:u("created.at"),dataIndex:"created_at",key:"created_at",is_show:!0,render:e=>h()(e).format("YYYY-MM-DD")},{title:u("options"),key:"options",dataIndex:"options",is_show:!0,render:(e,t)=>(0,A.jsxs)(i.c,{children:[(0,A.jsx)(d.c,{disabled:t.deleted_at,type:"primary",icon:(0,A.jsx)(n.c,{}),onClick:()=>R(t.id)}),(0,A.jsx)(f.c,{disabled:t.deleted_at,icon:(0,A.jsx)(l.c,{}),onClick:()=>{V(!0),M([t.id]),Y(!1),W(!0)}})]})}]),{activeMenu:L}=(0,p.w1)((e=>e.menu),p.G),{points:Q,meta:U,loading:X,params:Z}=(0,p.w1)((e=>e.point),p.G),ee=L.data,te={search:null===ee||void 0===ee?void 0:ee.search,pageSize:null===ee||void 0===ee?void 0:ee.per_page,page:null===ee||void 0===ee?void 0:ee.page};(0,v.useEffect)((()=>{L.refetch&&(S((0,_.s)(te)),S((0,w.CO)(L)))}),[L.refetch]),(0,C.c)((()=>{S((0,_.s)(te))}),[L.data]);const ae={selectedRowKeys:H,onChange:e=>{M(e)}};return(0,A.jsxs)(r.default,{title:u("cashback"),extra:(0,A.jsxs)(i.c,{children:[(0,A.jsx)(d.c,{icon:(0,A.jsx)(s.c,{}),type:"primary",onClick:()=>D(!0),children:u("add.cashback")}),(0,A.jsx)(f.c,{size:"",onClick:()=>{null===H||0===(null===H||void 0===H?void 0:H.length)?x.m4.warning(u("select.the.product")):(V(!0),W(!1))},children:u("delete.selected")}),(0,A.jsx)(j.c,{columns:$,setColumns:J})]}),children:[(0,A.jsx)(o.c,{scroll:{x:!0},rowSelection:ae,columns:null===$||void 0===$?void 0:$.filter((e=>e.is_show)),dataSource:Q,pagination:{pageSize:Z.perPage,page:(null===(e=L.data)||void 0===e?void 0:e.page)||1,total:U.total,defaultCurrent:null===(t=L.data)||void 0===t?void 0:t.page,current:null===(a=L.data)||void 0===a?void 0:a.page},rowKey:e=>e.id,loading:X,onChange:function(e,t,a){const{pageSize:n,current:l}=e,{field:s,order:c}=a,i=(0,y.c)(c);S((0,w.MH)({activeMenu:L,data:{...L.data,perPage:n,page:l,column:s,sort:i}}))}}),(0,A.jsx)(g.c,{click:G?()=>{T(!0),z.c.setActive(q).then((()=>{V(!1),S((0,_.s)()),x.m4.success(u("successfully.updated"))})).finally((()=>T(!1)))}:()=>{T(!0);const e={...Object.assign({},...H.map(((e,t)=>({["ids[".concat(t,"]")]:e}))))};z.c.delete(e).then((()=>{S((0,_.s)()),x.m4.success(u("successfully.deleted")),W(null)})).finally((()=>{V(!1),T(!1)}))},text:u(G?"set.active.cashback":K?"delete":"all.delete"),loading:E,setText:M,setActive:M}),B&&(0,A.jsx)(N,{visibility:B,handleCancel:()=>D(!1)}),P&&(0,A.jsx)(F,{visibility:P,handleCancel:()=>R(null)})]})}},3952:(e,t,a)=>{a.d(t,{c:()=>d});var n=a(30800),l=a(99584);const s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"};var c=a(47164),i=function(e,t){return l.createElement(c.c,(0,n.c)((0,n.c)({},e),{},{ref:t,icon:s}))};i.displayName="PlusCircleOutlined";const d=l.forwardRef(i)},55512:(e,t,a)=>{a.d(t,{c:()=>d});var n=a(30800),l=a(99584);const s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 208H676V232h212v136zm0 224H676V432h212v160zM412 432h200v160H412V432zm200-64H412V232h200v136zm-476 64h212v160H136V432zm0-200h212v136H136V232zm0 424h212v136H136V656zm276 0h200v136H412V656zm476 136H676V656h212v136z"}}]},name:"table",theme:"outlined"};var c=a(47164),i=function(e,t){return l.createElement(c.c,(0,n.c)((0,n.c)({},e),{},{ref:t,icon:s}))};i.displayName="TableOutlined";const d=l.forwardRef(i)}}]);