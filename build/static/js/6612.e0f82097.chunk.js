(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[6612],{20556:(e,s,a)=>{"use strict";a.d(s,{W:()=>i});var l=a(23424),t=a(84620),n=a.n(t);const i=()=>{const e=(0,l.i6)(),s=(0,l.IT)(),a=n().parse(s.search,{ignoreQueryPrefix:!0});return{values:a,set:(s,l)=>e({search:n().stringify({...a,[s]:l})}),reset:s=>{const l={...a};l[s]&&delete l[s],e({search:n().stringify({...l})})},clear:()=>e({search:n().stringify({})}),merge:s=>e({search:n().stringify({...a,...s})})}}},88276:(e,s,a)=>{"use strict";a.d(s,{c:()=>O});var l=a(99584),t=a(65732),n=a(66296),i=a(87228),r=a(23424),d=a(68768),c=a(10260),o=a(68496),u=a(46712),m=a(26012),h=a(10240),p=a(50452),g=a(2664),x=a(64212),j=a(42080),v=a(32712),f=a(65236),y=a(75808),b=a(89896),_=a(34560),w=a(52640),q=a(97884);function I(e){let{setLocation:s,form:a,item:l,idx:n,defaultLang:i}=e;const{t:r}=(0,f.G)(),{google_map_key:d}=(0,v.w1)((e=>e.globalSettings.settings),v.G),{ref:c}=(0,_.usePlacesWidget)({apiKey:d||w.KU,onPlaceSelected:e=>{const l={lat:null===e||void 0===e?void 0:e.geometry.location.lat(),lng:null===e||void 0===e?void 0:e.geometry.location.lng()};s(l),a.setFieldsValue({["address[".concat(i,"]")]:null===e||void 0===e?void 0:e.formatted_address})}});return(0,q.jsx)(t.c.Item,{label:r("address"),name:"address[".concat(null===l||void 0===l?void 0:l.locale,"]"),rules:[{required:(null===l||void 0===l?void 0:l.locale)===i,message:r("required")}],hidden:(null===l||void 0===l?void 0:l.locale)!==i,children:(0,q.jsx)("input",{className:"address-input",ref:c,placeholder:""})},"address"+n)}var k=a(40936),S=a(24332),F=a(84640),N=a(2340),L=a(6428),M=a(21984);const C=e=>{let{logoImage:s,setLogoImage:a,backImage:n,setBackImage:r,form:_,location:w,setLocation:C,user:H}=e;const{t:Y}=(0,f.G)(),[G,O]=(0,l.useState)(null),[V,D]=(0,l.useState)(null),[P,B]=(0,l.useState)(null),{defaultLang:A,languages:T}=(0,v.w1)((e=>e.formLang),v.G);const W=()=>{O(!0),B(!0)},E=()=>{D(!0),B(!0)},K=()=>{O(!1),D(!1)};return(0,q.jsxs)(d.c,{gutter:12,children:[(0,q.jsx)(c.c,{span:24,children:(0,q.jsx)(o.default,{children:(0,q.jsxs)(d.c,{gutter:12,children:[(0,q.jsx)(c.c,{span:4,children:(0,q.jsx)(t.c.Item,{label:Y("logo.image"),children:(0,q.jsx)(k.c,{type:"shops/logo",imageList:s,setImageList:a,form:_,multiple:!1,name:"logo_img"})})}),(0,q.jsx)(c.c,{span:4,children:(0,q.jsx)(t.c.Item,{label:Y("background.image"),children:(0,q.jsx)(k.c,{type:"shops/background",imageList:n,setImageList:r,form:_,multiple:!1,name:"background_img"})})}),(0,q.jsx)(c.c,{span:10,children:(0,q.jsx)(t.c.Item,{label:Y("status.note"),name:"status_note",children:(0,q.jsx)(x.c,{rows:4})})}),(0,q.jsx)(c.c,{span:4,children:(0,q.jsx)(t.c.Item,{name:"status",label:Y("status"),children:(0,q.jsx)(u.default,{disabled:!0})})}),(0,q.jsx)(c.c,{span:2,children:(0,q.jsx)(t.c.Item,{label:Y("open"),name:"open",valuePropName:"checked",children:(0,q.jsx)(m.c,{disabled:!0})})})]})})}),(0,q.jsx)(c.c,{span:24,children:(0,q.jsx)(o.default,{title:Y("general"),children:(0,q.jsxs)(d.c,{gutter:12,children:[(0,q.jsx)(c.c,{span:12,children:(0,q.jsxs)(d.c,{gutter:12,children:[(0,q.jsx)(c.c,{span:24,children:T.map(((e,s)=>(0,q.jsx)(t.c.Item,{label:Y("title"),name:"title[".concat(e.locale,"]"),rules:[{required:e.locale===A,message:Y("required")},{min:2,message:Y("title.required")}],hidden:e.locale!==A,children:(0,q.jsx)(u.default,{})},"title"+s)))}),(0,q.jsx)(c.c,{span:24,children:(0,q.jsx)(t.c.Item,{label:Y("phone"),name:"phone",rules:[{required:!0,message:Y("required")}],children:(0,q.jsx)(h.c,{min:0,className:"w-100"})})})]})}),(0,q.jsx)(c.c,{span:12,children:T.map(((e,s)=>(0,q.jsx)(t.c.Item,{label:Y("description"),name:"description[".concat(e.locale,"]"),rules:[{required:e.locale===A,message:Y("required")},{min:3,message:Y("required")}],hidden:e.locale!==A,children:(0,q.jsx)(x.c,{rows:4})},"desc"+s)))}),(0,q.jsx)(c.c,{span:8,children:(0,q.jsx)(t.c.Item,{label:Y("restaurant.tags"),name:"tags",rules:[{required:!1,message:Y("required")}],children:(0,q.jsx)(L.u,{mode:"multiple",fetchOptions:async function(e){B(!1);const s={search:e};return M.c.getAll(s).then((e=>{let{data:s}=e;return s.map((e=>{var s;return{label:(null===(s=e.translation)||void 0===s?void 0:s.title)||"no name",value:e.id}}))}))},refetch:P})})}),(0,q.jsx)(c.c,{span:8,children:(0,q.jsx)(t.c.Item,{label:Y("seller"),name:"user",rules:[{required:!0,message:Y("required")}],children:(0,q.jsx)(L.u,{disabled:H,fetchOptions:async function(e){const s={search:e,roles:"user","empty-shop":1};return B(!1),j.c.search(s).then((e=>e.data.map((e=>({label:e.firstname+" "+(e.lastname?e.lastname:""),value:e.id})))))},refetch:P,dropdownRender:e=>(0,q.jsxs)(q.Fragment,{children:[e,(0,q.jsx)(p.c,{style:{margin:"8px 0"}}),(0,q.jsx)(i.c,{className:"w-100",disabled:H,icon:(0,q.jsx)(S.c,{}),onClick:W,children:Y("add.user")})]})})})}),(0,q.jsx)(c.c,{span:8,children:(0,q.jsx)(t.c.Item,{label:Y("categories"),name:"categories",rules:[{required:!0,message:Y("required")}],children:(0,q.jsx)(L.u,{mode:"multiple",fetchOptions:async function(e){const s={search:e,type:"shop"};return B(!1),y.c.getAll(s).then((e=>{let{data:s}=e;return s.map((e=>{var s;return{label:(null===(s=e.translation)||void 0===s?void 0:s.title)||"no name",value:e.id}}))}))},refetch:P,dropdownRender:e=>(0,q.jsxs)(q.Fragment,{children:[e,(0,q.jsx)(p.c,{style:{margin:"8px 0"}}),(0,q.jsx)(i.c,{className:"w-100",icon:(0,q.jsx)(S.c,{}),onClick:E,children:Y("add.category")})]})})})})]})})}),(0,q.jsx)(c.c,{span:8,children:(0,q.jsx)(o.default,{title:Y("delivery"),children:(0,q.jsxs)(d.c,{gutter:8,children:[(0,q.jsx)(c.c,{span:12,children:(0,q.jsx)(t.c.Item,{name:"price",label:Y("min.price"),rules:[{required:!0,message:Y("required")}],children:(0,q.jsx)(h.c,{className:"w-100"})})}),(0,q.jsx)(c.c,{span:12,children:(0,q.jsx)(t.c.Item,{name:"price_per_km",label:Y("price.per.km"),rules:[{required:!0,message:Y("required")}],children:(0,q.jsx)(h.c,{className:"w-100"})})})]})})}),(0,q.jsx)(c.c,{span:8,children:(0,q.jsx)(o.default,{title:Y("delivery.time"),children:(0,q.jsxs)(d.c,{gutter:12,children:[(0,q.jsx)(c.c,{span:12,children:(0,q.jsx)(t.c.Item,{name:"delivery_time_type",label:Y("delivery_time_type"),rules:[{required:!0,message:Y("required")}],children:(0,q.jsxs)(g.default,{className:"w-100",children:[(0,q.jsx)(g.default.Option,{value:"minute",label:Y("minutes")}),(0,q.jsx)(g.default.Option,{value:"hour",label:Y("hour")})]})})}),(0,q.jsx)(c.c,{span:12,children:(0,q.jsx)(t.c.Item,{name:"delivery_time_from",label:Y("delivery_time_from"),rules:[{required:!0,message:Y("required")}],children:(0,q.jsx)(h.c,{className:"w-100"})})}),(0,q.jsx)(c.c,{span:12,children:(0,q.jsx)(t.c.Item,{name:"delivery_time_to",label:Y("delivery_time_to"),rules:[{required:!0,message:Y("required")}],children:(0,q.jsx)(h.c,{className:"w-100"})})})]})})}),(0,q.jsx)(c.c,{span:8,children:(0,q.jsx)(o.default,{title:Y("order.info"),children:(0,q.jsxs)(d.c,{gutter:12,children:[(0,q.jsx)(c.c,{span:12,children:(0,q.jsx)(t.c.Item,{label:Y("min.amount"),name:"min_amount",rules:[{required:!0,message:Y("required")}],children:(0,q.jsx)(h.c,{min:0,className:"w-100"})})}),(0,q.jsx)(c.c,{span:12,children:(0,q.jsx)(t.c.Item,{label:Y("tax"),name:"tax",rules:[{required:!0,message:Y("required")}],children:(0,q.jsx)(h.c,{min:0,addonAfter:"%",className:"w-100"})})}),(0,q.jsx)(c.c,{span:12,children:(0,q.jsx)(t.c.Item,{label:Y("admin.comission"),name:"percentage",rules:[{required:!0,message:Y("required")}],children:(0,q.jsx)(h.c,{min:0,className:"w-100",addonAfter:"%"})})})]})})}),(0,q.jsx)(c.c,{span:24,children:(0,q.jsx)(o.default,{title:Y("address"),children:(0,q.jsxs)(d.c,{gutter:12,children:[(0,q.jsx)(c.c,{span:12,children:T.map(((e,s)=>(0,q.jsx)(I,{setLocation:C,form:_,item:e,idx:s,defaultLang:A},s)))}),(0,q.jsx)(c.c,{span:24,children:(0,q.jsx)(b.c,{location:w,setLocation:C,setAddress:e=>_.setFieldsValue({["address[".concat(A,"]")]:e})})})]})})}),G&&(0,q.jsx)(F.c,{visible:G,handleCancel:()=>K()}),V&&(0,q.jsx)(N.c,{visible:V,handleCancel:()=>K()})]})};var H=a(18896),Y=a(48820),G=a(33131);const O=e=>{var s,a,d,c,o,u,m,h,p;let{next:g,action_type:x="",user:j}=e;const{t:y}=(0,f.G)(),[b]=t.c.useForm(),_=(0,r.i6)(),w=(0,v.OY)(),{uuid:I}=(0,r.W4)(),{activeMenu:k}=(0,v.w1)((e=>e.menu),v.G),[S,F]=(0,l.useState)(!1),[N,L]=(0,l.useState)(null!==(s=k.data)&&void 0!==s&&s.logo_img?[null===(a=k.data)||void 0===a?void 0:a.logo_img]:[]),[M,O]=(0,l.useState)(null!==(d=k.data)&&void 0!==d&&d.background_img?[null===(c=k.data)||void 0===c?void 0:c.background_img]:[]),{settings:V}=(0,v.w1)((e=>e.globalSettings),v.G),[D,P]=(0,l.useState)(null!==k&&void 0!==k&&null!==(o=k.data)&&void 0!==o&&o.location?{lat:parseFloat(null===k||void 0===k||null===(u=k.data)||void 0===u||null===(m=u.location)||void 0===m?void 0:m.latitude),lng:parseFloat(null===k||void 0===k||null===(h=k.data)||void 0===h||null===(p=h.location)||void 0===p?void 0:p.longitude)}:(0,G.c)(V));(0,l.useEffect)((()=>()=>{const e=b.getFieldsValue(!0);e.open_time=JSON.stringify(null===e||void 0===e?void 0:e.open_time),e.close_time=JSON.stringify(null===e||void 0===e?void 0:e.close_time),w((0,H.MH)({activeMenu:k,data:{...k.data,...e}}))}),[]);return(0,q.jsx)(q.Fragment,{children:(0,q.jsxs)(t.c,{form:b,name:"basic",layout:"vertical",onFinish:e=>{var s,a,l;F(!0);const t={...e,"images[0]":null===(s=N[0])||void 0===s?void 0:s.name,"images[1]":null===(a=M[0])||void 0===a?void 0:a.name,delivery_time_type:e.delivery_time_type,delivery_time_to:e.delivery_time_to,delivery_time_from:e.delivery_time_from,categories:e.categories.map((e=>e.value)),tags:null===e||void 0===e||null===(l=e.tags)||void 0===l?void 0:l.map((e=>e.value)),user_id:e.user.value,open:void 0,"location[latitude]":D.lat,"location[longitude]":D.lng,user:void 0,delivery_time:0,type:"restaurant"};"edit"===x?function(e,s){Y.c.update(I,s).then((()=>{w((0,H.MH)({activeMenu:k,data:e})),g()})).catch((e=>console.error(e))).finally((()=>F(!1)))}(e,t):function(e,s){Y.c.create(s).then((s=>{let{data:a}=s;w((0,H.Ke)({id:"restaurant-".concat(a.uuid),url:"restaurant/".concat(a.uuid),name:y("add.restaurant"),data:{...a,background_img:{name:null===a||void 0===a?void 0:a.background_img},logo_img:{name:null===a||void 0===a?void 0:a.logo_img},...e},refetch:!1})),_("/restaurant/".concat(a.uuid,"?step=1"))})).catch((e=>console.error(e))).finally((()=>F(!1)))}(e,t)},initialValues:{open:!1,status:"new",...k.data},children:[(0,q.jsx)(C,{logoImage:N,setLogoImage:L,backImage:M,setBackImage:O,form:b,location:D,setLocation:P,user:j}),(0,q.jsx)(n.c,{children:(0,q.jsx)(i.c,{type:"primary",htmlType:"submit",loading:S,children:y("next")})})]})})}},90956:(e,s,a)=>{"use strict";a.d(s,{c:()=>p});var l=a(65732),t=a(99584),n=a(77180),i=a(83072),r=a.n(i),d=a(94192),c=a(73259),o=a(23424),u=a(54112),m=a(75424),h=a(97884);const p=e=>{let{next:s,prev:a}=e;const[i]=l.c.useForm(),[p,g]=(0,t.useState)([]),[x,j]=(0,t.useState)(new Array(7).fill(!1)),[v,f]=(0,t.useState)(!1),[y,b]=(0,t.useState)(!1),{uuid:_}=(0,o.W4)();return(0,t.useEffect)((()=>{i.setFieldsValue({working_days:u.Q}),_&&(b(!0),c.c.getById(_).then((e=>{g(e.data.closed_dates.filter((e=>e.day>r()(new Date).format("YYYY-MM-DD"))).map((e=>new Date(e.day))))})),d.c.getById(_).then((e=>{j(0!==e.data.dates.length?e.data.dates.map((e=>e.disabled)):[]),0!==e.data.dates.length&&i.setFieldsValue({working_days:e.data.dates.map((e=>({title:e.day,from:r()(e.from,"HH:mm:ss"),to:r()(e.to,"HH:mm:ss"),disabled:Boolean(e.disabled)})))})})).finally((()=>b(!1))))}),[]),(0,h.jsx)(h.Fragment,{children:y?(0,h.jsx)(n.c,{}):(0,h.jsx)(m.c,{onFinish:e=>{f(!0);const a={dates:p?p.map((e=>r()(e).format("YYYY-MM-DD"))):void 0},l={dates:e.working_days.map((e=>({day:e.title,from:r()(e.from?e.from:"00").format("HH-mm"),to:r()(e.to?e.to:"00").format("HH-mm"),disabled:e.disabled})))};c.c.update(_,a).then((()=>{s()})).finally((()=>f(!1))),0!==e.working_days.length&&d.c.update(_,l).then((()=>{s()})).finally((()=>f(!1)))},prev:a,form:i,lines:x,loadingBtn:v,days:p,setDays:g,setLines:j,weeks:u.Q})})}},85836:(e,s,a)=>{"use strict";a.d(s,{C:()=>l});const l=[{title:"restaurant",content:"First-content"},{title:"map",content:"Second-content"},{title:"delivery",content:"Third-content"},{title:"user",content:"Four-content"}]},26144:(e,s,a)=>{"use strict";a.d(s,{c:()=>_});var l=a(99584),t=a(65732),n=a(68768),i=a(10260),r=a(46712),d=a(10240),c=a(66296),o=a(87228),u=a(23424),m=a(32712),h=a(42080),p=a(61072),g=a(18896),x=a(83072),j=a.n(x),v=a(65236),f=a(77180),y=a(75088),b=a(97884);function _(e){var s;let{prev:a}=e;const{isDemo:x}=(0,y.c)(),{t:_}=(0,v.G)(),{activeMenu:w}=(0,m.w1)((e=>e.menu),m.G),q=(0,m.OY)(),I=(0,u.i6)(),[k,S]=(0,l.useState)(null),[F,N]=(0,l.useState)(!1),[L,M]=(0,l.useState)(!1),[C]=t.c.useForm();console.log(x);return(0,l.useEffect)((()=>{var e,s,a;null!==w&&void 0!==w&&w.data&&(a=null===w||void 0===w||null===(e=w.data)||void 0===e||null===(s=e.seller)||void 0===s?void 0:s.uuid,M(!0),h.c.getById(a).then((e=>{const s=e.data;C.setFieldsValue({firstname:s.firstname,lastname:s.lastname,email:s.email,phone:s.phone,password_confirmation:s.password_confirmation,password:s.password})})).finally((()=>M(!1))))}),[]),(0,b.jsx)(b.Fragment,{children:L?(0,b.jsx)(f.c,{}):(0,b.jsx)(t.c,{form:C,layout:"vertical",initialValues:{gender:"male",role:"admin",...w.data,birthday:null!==(s=w.data)&&void 0!==s&&s.birthday?j()(w.data.birthday):null},onFinish:e=>{var s,a;N(!0);const l={firstname:e.firstname,lastname:e.lastname,email:e.email,phone:e.phone,password_confirmation:e.password_confirmation,password:e.password},t="restaurants";h.c.update(null===w||void 0===w||null===(s=w.data)||void 0===s||null===(a=s.seller)||void 0===a?void 0:a.uuid,l).then((()=>{p.m4.success(_("successfully.updated")),I("/".concat(t)),q((0,g.MF)({...w,nextUrl:t}))})).catch((e=>S(e.response.data.params))).finally((()=>N(!1)))},className:"py-4",children:(0,b.jsxs)(n.c,{gutter:12,children:[(0,b.jsx)(i.c,{span:12,children:(0,b.jsx)(t.c.Item,{label:_("firstname"),name:"firstname",help:null!==k&&void 0!==k&&k.firstname?k.firstname[0]:null,validateStatus:null!==k&&void 0!==k&&k.firstname?"error":"success",rules:[{required:!1,message:_("required")}],children:(0,b.jsx)(r.default,{className:"w-100"})})}),(0,b.jsx)(i.c,{span:12,children:(0,b.jsx)(t.c.Item,{label:_("lastname"),name:"lastname",help:null!==k&&void 0!==k&&k.lastname?k.lastname[0]:null,validateStatus:null!==k&&void 0!==k&&k.lastname?"error":"success",rules:[{required:!1,message:_("required")}],children:(0,b.jsx)(r.default,{className:"w-100"})})}),x||(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(i.c,{span:12,children:(0,b.jsx)(t.c.Item,{label:_("phone"),name:"phone",help:null!==k&&void 0!==k&&k.phone?k.phone[0]:null,validateStatus:null!==k&&void 0!==k&&k.phone?"error":"success",rules:[{required:!1,message:_("required")}],children:(0,b.jsx)(d.c,{min:0,className:"w-100"})})}),(0,b.jsx)(i.c,{span:12,children:(0,b.jsx)(t.c.Item,{label:_("email"),name:"email",help:null!==k&&void 0!==k&&k.email?k.email[0]:null,validateStatus:null!==k&&void 0!==k&&k.email?"error":"success",rules:[{required:!0,message:_("required")}],children:(0,b.jsx)(r.default,{type:"email",className:"w-100"})})}),(0,b.jsx)(i.c,{span:12,children:(0,b.jsx)(t.c.Item,{label:_("password"),name:"password",help:null!==k&&void 0!==k&&k.password?k.password[0]:null,validateStatus:null!==k&&void 0!==k&&k.password?"error":"success",rules:[{required:!1,message:_("required")}],children:(0,b.jsx)(r.default.Password,{type:"password",className:"w-100",autoComplete:"off"})})}),(0,b.jsx)(i.c,{span:12,children:(0,b.jsx)(t.c.Item,{label:_("password.confirmation"),help:null!==k&&void 0!==k&&k.password_confirmation?k.password_confirmation[0]:null,validateStatus:null!==k&&void 0!==k&&k.password_confirmation?"error":"success",name:"password_confirmation",dependencies:["password"],hasFeedback:!0,rules:[{required:!1,message:_("required")},e=>{let{getFieldValue:s}=e;return{validator:(e,a)=>a&&s("password")!==a?Promise.reject(_("passwords.do.not.match")):Promise.resolve()}}],children:(0,b.jsx)(r.default.Password,{type:"password",className:"w-100",autoComplete:"off"})})})]}),(0,b.jsx)(i.c,{span:24,children:(0,b.jsxs)(c.c,{children:[(0,b.jsx)(o.c,{type:"primary",htmlType:"submit",loading:F,children:_("save")}),(0,b.jsx)(o.c,{htmlType:"submit",onClick:()=>a(),children:_("prev")})]})})]})})})}},16204:()=>{}}]);